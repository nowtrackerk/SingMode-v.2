var c2=r=>{throw TypeError(r)};var vc=(r,e,t)=>e.has(r)?c2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);function u2(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Nd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fp={exports:{}},bc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function h2(){if(Ub)return bc;Ub=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var p in a)p!=="key"&&(l[p]=a[p])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:u,ref:a!==void 0?a:null,props:l}}return bc.Fragment=e,bc.jsx=t,bc.jsxs=t,bc}var zb;function d2(){return zb||(zb=1,Fp.exports=h2()),Fp.exports}var h=d2(),$p={exports:{}},Le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function f2(){if(Bb)return Le;Bb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function k(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Z={};function ae(P,K,oe){this.props=P,this.context=K,this.refs=Z,this.updater=oe||V}ae.prototype.isReactComponent={},ae.prototype.setState=function(P,K){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,K,"setState")},ae.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function he(){}he.prototype=ae.prototype;function pe(P,K,oe){this.props=P,this.context=K,this.refs=Z,this.updater=oe||V}var ye=pe.prototype=new he;ye.constructor=pe,$(ye,ae.prototype),ye.isPureReactComponent=!0;var De=Array.isArray;function Ee(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(P,K,oe){var de=oe.ref;return{$$typeof:r,type:P,key:K,ref:de!==void 0?de:null,props:oe}}function L(P,K){return R(P.type,K,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function O(P){var K={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return K[oe]})}var I=/\/+/g;function rt(P,K){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):K.toString(36)}function bt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Ee,Ee):(P.status="pending",P.then(function(K){P.status==="pending"&&(P.status="fulfilled",P.value=K)},function(K){P.status==="pending"&&(P.status="rejected",P.reason=K)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Q(P,K,oe,de,Ne){var je=typeof P;(je==="undefined"||je==="boolean")&&(P=null);var Re=!1;if(P===null)Re=!0;else switch(je){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(P.$$typeof){case r:case e:Re=!0;break;case b:return Re=P._init,Q(Re(P._payload),K,oe,de,Ne)}}if(Re)return Ne=Ne(P),Re=de===""?"."+rt(P,0):de,De(Ne)?(oe="",Re!=null&&(oe=Re.replace(I,"$&/")+"/"),Q(Ne,K,oe,"",function(Hn){return Hn})):Ne!=null&&(j(Ne)&&(Ne=L(Ne,oe+(Ne.key==null||P&&P.key===Ne.key?"":(""+Ne.key).replace(I,"$&/")+"/")+Re)),K.push(Ne)),1;Re=0;var dt=de===""?".":de+":";if(De(P))for(var ft=0;ft<P.length;ft++)de=P[ft],je=dt+rt(de,ft),Re+=Q(de,K,oe,je,Ne);else if(ft=k(P),typeof ft=="function")for(P=ft.call(P),ft=0;!(de=P.next()).done;)de=de.value,je=dt+rt(de,ft++),Re+=Q(de,K,oe,je,Ne);else if(je==="object"){if(typeof P.then=="function")return Q(bt(P),K,oe,de,Ne);throw K=String(P),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Re}function le(P,K,oe){if(P==null)return P;var de=[],Ne=0;return Q(P,de,"","",function(je){return K.call(oe,je,Ne++)}),de}function we(P){if(P._status===-1){var K=P._result;K=K(),K.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=K)}if(P._status===1)return P._result.default;throw P._result}var Ge=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},et={map:le,forEach:function(P,K,oe){le(P,function(){K.apply(this,arguments)},oe)},count:function(P){var K=0;return le(P,function(){K++}),K},toArray:function(P){return le(P,function(K){return K})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Le.Activity=_,Le.Children=et,Le.Component=ae,Le.Fragment=t,Le.Profiler=a,Le.PureComponent=pe,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Le.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Le.cache=function(P){return function(){return P.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(P,K,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var de=$({},P.props),Ne=P.key;if(K!=null)for(je in K.key!==void 0&&(Ne=""+K.key),K)!C.call(K,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&K.ref===void 0||(de[je]=K[je]);var je=arguments.length-2;if(je===1)de.children=oe;else if(1<je){for(var Re=Array(je),dt=0;dt<je;dt++)Re[dt]=arguments[dt+2];de.children=Re}return R(P.type,Ne,de)},Le.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Le.createElement=function(P,K,oe){var de,Ne={},je=null;if(K!=null)for(de in K.key!==void 0&&(je=""+K.key),K)C.call(K,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ne[de]=K[de]);var Re=arguments.length-2;if(Re===1)Ne.children=oe;else if(1<Re){for(var dt=Array(Re),ft=0;ft<Re;ft++)dt[ft]=arguments[ft+2];Ne.children=dt}if(P&&P.defaultProps)for(de in Re=P.defaultProps,Re)Ne[de]===void 0&&(Ne[de]=Re[de]);return R(P,je,Ne)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(P){return{$$typeof:p,render:P}},Le.isValidElement=j,Le.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:we}},Le.memo=function(P,K){return{$$typeof:y,type:P,compare:K===void 0?null:K}},Le.startTransition=function(P){var K=A.T,oe={};A.T=oe;try{var de=P(),Ne=A.S;Ne!==null&&Ne(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(Ee,Ge)}catch(je){Ge(je)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),A.T=K}},Le.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Le.use=function(P){return A.H.use(P)},Le.useActionState=function(P,K,oe){return A.H.useActionState(P,K,oe)},Le.useCallback=function(P,K){return A.H.useCallback(P,K)},Le.useContext=function(P){return A.H.useContext(P)},Le.useDebugValue=function(){},Le.useDeferredValue=function(P,K){return A.H.useDeferredValue(P,K)},Le.useEffect=function(P,K){return A.H.useEffect(P,K)},Le.useEffectEvent=function(P){return A.H.useEffectEvent(P)},Le.useId=function(){return A.H.useId()},Le.useImperativeHandle=function(P,K,oe){return A.H.useImperativeHandle(P,K,oe)},Le.useInsertionEffect=function(P,K){return A.H.useInsertionEffect(P,K)},Le.useLayoutEffect=function(P,K){return A.H.useLayoutEffect(P,K)},Le.useMemo=function(P,K){return A.H.useMemo(P,K)},Le.useOptimistic=function(P,K){return A.H.useOptimistic(P,K)},Le.useReducer=function(P,K,oe){return A.H.useReducer(P,K,oe)},Le.useRef=function(P){return A.H.useRef(P)},Le.useState=function(P){return A.H.useState(P)},Le.useSyncExternalStore=function(P,K,oe){return A.H.useSyncExternalStore(P,K,oe)},Le.useTransition=function(){return A.H.useTransition()},Le.version="19.2.4",Le}var Hb;function Zc(){return Hb||(Hb=1,$p.exports=f2()),$p.exports}var ie=Zc();const p2=Nd(ie);var Yp={exports:{}},xc={},Qp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function m2(){return Gb||(Gb=1,(function(r){function e(Q,le){var we=Q.length;Q.push(le);e:for(;0<we;){var Ge=we-1>>>1,et=Q[Ge];if(0<a(et,le))Q[Ge]=le,Q[we]=et,we=Ge;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var le=Q[0],we=Q.pop();if(we!==le){Q[0]=we;e:for(var Ge=0,et=Q.length,P=et>>>1;Ge<P;){var K=2*(Ge+1)-1,oe=Q[K],de=K+1,Ne=Q[de];if(0>a(oe,we))de<et&&0>a(Ne,oe)?(Q[Ge]=Ne,Q[de]=we,Ge=de):(Q[Ge]=oe,Q[K]=we,Ge=K);else if(de<et&&0>a(Ne,we))Q[Ge]=Ne,Q[de]=we,Ge=de;else break e}}return le}function a(Q,le){var we=Q.sortIndex-le.sortIndex;return we!==0?we:Q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,p=u.now();r.unstable_now=function(){return u.now()-p}}var g=[],y=[],b=1,_=null,T=3,k=!1,V=!1,$=!1,Z=!1,ae=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function ye(Q){for(var le=t(y);le!==null;){if(le.callback===null)s(y);else if(le.startTime<=Q)s(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=t(y)}}function De(Q){if($=!1,ye(Q),!V)if(t(g)!==null)V=!0,Ee||(Ee=!0,O());else{var le=t(y);le!==null&&bt(De,le.startTime-Q)}}var Ee=!1,A=-1,C=5,R=-1;function L(){return Z?!0:!(r.unstable_now()-R<C)}function j(){if(Z=!1,Ee){var Q=r.unstable_now();R=Q;var le=!0;try{e:{V=!1,$&&($=!1,he(A),A=-1),k=!0;var we=T;try{t:{for(ye(Q),_=t(g);_!==null&&!(_.expirationTime>Q&&L());){var Ge=_.callback;if(typeof Ge=="function"){_.callback=null,T=_.priorityLevel;var et=Ge(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof et=="function"){_.callback=et,ye(Q),le=!0;break t}_===t(g)&&s(g),ye(Q)}else s(g);_=t(g)}if(_!==null)le=!0;else{var P=t(y);P!==null&&bt(De,P.startTime-Q),le=!1}}break e}finally{_=null,T=we,k=!1}le=void 0}}finally{le?O():Ee=!1}}}var O;if(typeof pe=="function")O=function(){pe(j)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,rt=I.port2;I.port1.onmessage=j,O=function(){rt.postMessage(null)}}else O=function(){ae(j,0)};function bt(Q,le){A=ae(function(){Q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var we=T;T=le;try{return Q()}finally{T=we}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var we=T;T=Q;try{return le()}finally{T=we}},r.unstable_scheduleCallback=function(Q,le,we){var Ge=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ge+we:Ge):we=Ge,Q){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=we+et,Q={id:b++,callback:le,priorityLevel:Q,startTime:we,expirationTime:et,sortIndex:-1},we>Ge?(Q.sortIndex=we,e(y,Q),t(g)===null&&Q===t(y)&&($?(he(A),A=-1):$=!0,bt(De,we-Ge))):(Q.sortIndex=et,e(g,Q),V||k||(V=!0,Ee||(Ee=!0,O()))),Q},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(Q){var le=T;return function(){var we=T;T=le;try{return Q.apply(this,arguments)}finally{T=we}}}})(Kp)),Kp}var qb;function g2(){return qb||(qb=1,Qp.exports=m2()),Qp.exports}var Xp={exports:{}},On={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function y2(){if(Fb)return On;Fb=1;var r=Zc();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:y,implementation:b}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,On.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,b)},On.flushSync=function(g){var y=u.T,b=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=y,s.p=b,s.d.f()}},On.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},On.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},On.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:k}):b==="script"&&s.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},On.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},On.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,_=p(b,y.crossOrigin);s.d.L(g,b,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},On.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},On.requestFormReset=function(g){s.d.r(g)},On.unstable_batchedUpdates=function(g,y){return g(y)},On.useFormState=function(g,y,b){return u.H.useFormState(g,y,b)},On.useFormStatus=function(){return u.H.useHostTransitionStatus()},On.version="19.2.4",On}var $b;function v2(){if($b)return Xp.exports;$b=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Xp.exports=y2(),Xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb;function b2(){if(Yb)return xc;Yb=1;var r=g2(),e=Zc(),t=v2();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function p(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function y(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,c=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),i;m=m.sibling}throw Error(s(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,S=f.child;S;){if(S===o){x=!0,o=f,c=m;break}if(S===c){x=!0,c=f,o=m;break}S=S.sibling}if(!x){for(S=m.child;S;){if(S===o){x=!0,o=m,c=f;break}if(S===c){x=!0,c=m,o=f;break}S=S.sibling}if(!x)throw Error(s(189))}}if(o.alternate!==c)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),De=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function O(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case $:return"Fragment";case ae:return"Profiler";case Z:return"StrictMode";case De:return"Suspense";case Ee:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case pe:return n.displayName||"Context";case he:return(n._context.displayName||"Context")+".Consumer";case ye:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A:return i=n.displayName||null,i!==null?i:rt(n.type)||"Memo";case C:i=n._payload,n=n._init;try{return rt(n(i))}catch{}}return null}var bt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ge=[],et=-1;function P(n){return{current:n}}function K(n){0>et||(n.current=Ge[et],Ge[et]=null,et--)}function oe(n,i){et++,Ge[et]=n.current,n.current=i}var de=P(null),Ne=P(null),je=P(null),Re=P(null);function dt(n,i){switch(oe(je,i),oe(Ne,n),oe(de,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?lb(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=lb(i),n=cb(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(de),oe(de,n)}function ft(){K(de),K(Ne),K(je)}function Hn(n){n.memoizedState!==null&&oe(Re,n);var i=de.current,o=cb(i,n.type);i!==o&&(oe(Ne,n),oe(de,o))}function os(n){Ne.current===n&&(K(de),K(Ne)),Re.current===n&&(K(Re),pc._currentValue=we)}var Ds,Gr;function se(n){if(Ds===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ds=i&&i[1]||"",Gr=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ds+n+Gr}var me=!1;function qe(n,i){if(!n||me)return"";me=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var q=Y}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(Y){q=Y}n.call(ee.prototype)}}else{try{throw Error()}catch(Y){q=Y}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&q&&typeof Y.stack=="string")return[Y.stack,q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],S=m[1];if(x&&S){var D=x.split(`
`),G=S.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===G.length)for(c=D.length-1,f=G.length-1;1<=c&&0<=f&&D[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==G[f]){var X=`
`+D[c].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=c&&0<=f);break}}}finally{me=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?se(o):""}function Dt(n,i){switch(n.tag){case 26:case 27:case 5:return se(n.type);case 16:return se("Lazy");case 13:return n.child!==i&&i!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return qe(n.type,!1);case 11:return qe(n.type.render,!1);case 1:return qe(n.type,!0);case 31:return se("Activity");default:return""}}function Ht(n){try{var i="",o=null;do i+=Dt(n,o),o=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Oe=Object.prototype.hasOwnProperty,Ae=r.unstable_scheduleCallback,Pt=r.unstable_cancelCallback,qr=r.unstable_shouldYield,ls=r.unstable_requestPaint,Mt=r.unstable_now,cs=r.unstable_getCurrentPriorityLevel,Er=r.unstable_ImmediatePriority,ci=r.unstable_UserBlockingPriority,kn=r.unstable_NormalPriority,ui=r.unstable_LowPriority,us=r.unstable_IdlePriority,yo=r.log,hi=r.unstable_setDisableYieldValue,Gn=null,nn=null;function Lt(n){if(typeof yo=="function"&&hi(n),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(Gn,n)}catch{}}var mt=Math.clz32?Math.clz32:vo,ze=Math.log,dn=Math.LN2;function vo(n){return n>>>=0,n===0?32:31-(ze(n)/dn|0)|0}var In=256,Xn=262144,At=4194304;function qn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function fn(n,i,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=qn(c):(x&=S,x!==0?f=qn(x):o||(o=S&~n,o!==0&&(f=qn(o))))):(S=c&~m,S!==0?f=qn(S):x!==0?f=qn(x):o||(o=c&~n,o!==0&&(f=qn(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function lr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function di(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function Jn(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function hs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Al(n,i,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,D=n.expirationTimes,G=n.hiddenUpdates;for(o=x&~o;0<o;){var X=31-mt(o),ee=1<<X;S[X]=0,D[X]=-1;var q=G[X];if(q!==null)for(G[X]=null,X=0;X<q.length;X++){var Y=q[X];Y!==null&&(Y.lane&=-536870913)}o&=~ee}c!==0&&Fr(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~i))}function Fr(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-mt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function js(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var c=31-mt(o),f=1<<c;f&i|n[c]&i&&(n[c]|=i),o&=~f}}function Gt(n,i){var o=i&-i;return o=(o&42)!==0?1:ve(o),(o&(n.suspendedLanes|i))!==0?0:o}function ve(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function $r(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bo(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:Db(n.type))}function Wn(n,i){var o=le.p;try{return le.p=n,i()}finally{le.p=o}}var cr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+cr,qt="__reactProps$"+cr,Zn="__reactContainer$"+cr,fi="__reactEvents$"+cr,Rl="__reactListeners$"+cr,Os="__reactHandles$"+cr,wa="__reactResources$"+cr,Tr="__reactMarker$"+cr;function Ps(n){delete n[Vt],delete n[qt],delete n[fi],delete n[Rl],delete n[Os]}function ur(n){var i=n[Vt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Zn]||o[Vt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=gb(n);n!==null;){if(o=n[Vt])return o;n=gb(n)}return i}n=o,o=n.parentNode}return null}function Fn(n){if(n=n[Vt]||n[Zn]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Dn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function hr(n){var i=n[wa];return i||(i=n[wa]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ft(n){n[Tr]=!0}var Ea=new Set,pi={};function Sr(n,i){Nr(n,i),Nr(n+"Capture",i)}function Nr(n,i){for(pi[n]=i,n=0;n<i.length;n++)Ea.add(i[n])}var Ta=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cr={},ds={};function Sa(n){return Oe.call(ds,n)?!0:Oe.call(Cr,n)?!1:Ta.test(n)?ds[n]=!0:(Cr[n]=!0,!1)}function mi(n,i,o){if(Sa(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function $t(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Tt(n,i,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+c)}}function Yt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ar(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Yr(n,i,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function at(n){if(!n._valueTracker){var i=Ar(n)?"checked":"value";n._valueTracker=Yr(n,i,""+n[i])}}function dr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),c="";return n&&(c=Ar(n)?n.checked?"true":"false":n.value),n=c,n!==o?(i.setValue(n),!0):!1}function fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var fs=/[\n"\\]/g;function jn(n){return n.replace(fs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function gi(n,i,o,c,f,m,x,S){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),i!=null?x==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Yt(i)):n.value!==""+Yt(i)&&(n.value=""+Yt(i)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),i!=null?yi(n,x,Yt(i)):o!=null?yi(n,x,Yt(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Yt(S):n.removeAttribute("name")}function Na(n,i,o,c,f,m,x,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){at(n);return}o=o!=null?""+Yt(o):"",i=i!=null?""+Yt(i):o,S||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),at(n)}function yi(n,i,o){i==="number"&&fr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function E(n,i,o,c){if(n=n.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=i.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Yt(o),i=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function J(n,i,o){if(i!=null&&(i=""+Yt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Yt(o):""}function U(n,i,o,c){if(i==null){if(c!=null){if(o!=null)throw Error(s(92));if(bt(c)){if(1<c.length)throw Error(s(93));c=c[0]}o=c}o==null&&(o=""),i=o}o=Yt(i),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),at(n)}function ne(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var ue=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pe(n,i,o){var c=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,o):typeof o!="number"||o===0||ue.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function Nt(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&o[f]!==c&&Pe(n,f,c)}else for(var m in i)i.hasOwnProperty(m)&&Pe(n,m,i[m])}function $n(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xo(n){return vi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Qr(){}var kl=null;function Rr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var bi=null,ps=null;function Ca(n){var i=Fn(n);if(i&&(n=i.stateNode)){var o=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(gi(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+jn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var c=o[i];if(c!==n&&c.form===n.form){var f=c[qt]||null;if(!f)throw Error(s(90));gi(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)c=o[i],c.form===n.form&&dr(c)}break e;case"textarea":J(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&E(n,!!o.multiple,i,!1)}}}var _o=!1;function xi(n,i,o){if(_o)return n(i,o);_o=!0;try{var c=n(i);return c}finally{if(_o=!1,(bi!==null||ps!==null)&&(lh(),bi&&(i=bi,n=ps,ps=bi=null,Ca(i),n)))for(i=0;i<n.length;i++)Ca(n[i])}}function Kr(n,i){var o=n.stateNode;if(o===null)return null;var c=o[qt]||null;if(c===null)return null;o=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aa=!1;if(kr)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Aa=!1}var ms=null,Il=null,Ra=null;function Dl(){if(Ra)return Ra;var n,i=Il,o=i.length,c,f="value"in ms?ms.value:ms.textContent,m=f.length;for(n=0;n<o&&i[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&i[o-c]===f[m-c];c++);return Ra=f.slice(n,1<c?1-c:void 0)}function ka(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ms(){return!0}function Xr(){return!1}function xn(n){function i(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ms:Xr,this.isPropagationStopped=Xr,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),i}var Ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gs=xn(Ls),_i=_({},Ls,{view:0,detail:0}),jl=xn(_i),wi,wo,ys,Eo=_({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ys&&(ys&&n.type==="mousemove"?(wi=n.screenX-ys.screenX,wo=n.screenY-ys.screenY):wo=wi=0,ys=n),wi)},movementY:function(n){return"movementY"in n?n.movementY:wo}}),Ol=xn(Eo),Ia=_({},Eo,{dataTransfer:0}),gu=xn(Ia),yu=_({},_i,{relatedTarget:0}),Da=xn(yu),Pl=_({},Ls,{animationName:0,elapsedTime:0,pseudoElement:0}),vu=xn(Pl),To=_({},Ls,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),bu=xn(To),xu=_({},Ls,{data:0}),vs=xn(xu),_u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Eu[n])?!!i[n]:!1}function Ei(){return Tu}var Yn=_({},_i,{key:function(n){if(n.key){var i=_u[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ka(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?wu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(n){return n.type==="keypress"?ka(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ka(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Su=xn(Yn),Nu=_({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vs=xn(Nu),d=_({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),v=xn(d),w=_({},Ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=xn(w),B=_({},Eo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F=xn(B),ce=_({},Ls,{newState:0,oldState:0}),Be=xn(ce),Wt=[9,13,27,32],ct=kr&&"CompositionEvent"in window,jt=null;kr&&"documentMode"in document&&(jt=document.documentMode);var Ir=kr&&"TextEvent"in window&&!jt,bs=kr&&(!ct||jt&&8<jt&&11>=jt),Jr=" ",Wr=!1;function ja(n,i){switch(n){case"keyup":return Wt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var No=!1;function jT(n,i){switch(n){case"compositionend":return So(i);case"keypress":return i.which!==32?null:(Wr=!0,Jr);case"textInput":return n=i.data,n===Jr&&Wr?null:n;default:return null}}function OT(n,i){if(No)return n==="compositionend"||!ct&&ja(n,i)?(n=Dl(),Ra=Il=ms=null,No=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return bs&&i.locale!=="ko"?null:i.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b0(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!PT[n.type]:i==="textarea"}function x0(n,i,o,c){bi?ps?ps.push(c):ps=[c]:bi=c,i=mh(i,"onChange"),0<i.length&&(o=new gs("onChange","change",null,o,c),n.push({event:o,listeners:i}))}var Ml=null,Ll=null;function MT(n){nb(n,0)}function Cu(n){var i=Dn(n);if(dr(i))return n}function _0(n,i){if(n==="change")return i}var w0=!1;if(kr){var Jd;if(kr){var Wd="oninput"in document;if(!Wd){var E0=document.createElement("div");E0.setAttribute("oninput","return;"),Wd=typeof E0.oninput=="function"}Jd=Wd}else Jd=!1;w0=Jd&&(!document.documentMode||9<document.documentMode)}function T0(){Ml&&(Ml.detachEvent("onpropertychange",S0),Ll=Ml=null)}function S0(n){if(n.propertyName==="value"&&Cu(Ll)){var i=[];x0(i,Ll,n,Rr(n)),xi(MT,i)}}function LT(n,i,o){n==="focusin"?(T0(),Ml=i,Ll=o,Ml.attachEvent("onpropertychange",S0)):n==="focusout"&&T0()}function VT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cu(Ll)}function UT(n,i){if(n==="click")return Cu(i)}function zT(n,i){if(n==="input"||n==="change")return Cu(i)}function BT(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var pr=typeof Object.is=="function"?Object.is:BT;function Vl(n,i){if(pr(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),c=Object.keys(i);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Oe.call(i,f)||!pr(n[f],i[f]))return!1}return!0}function N0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function C0(n,i){var o=N0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=i&&c>=i)return{node:o,offset:i-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=N0(o)}}function A0(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?A0(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function R0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=fr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=fr(n.document)}return i}function Zd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var HT=kr&&"documentMode"in document&&11>=document.documentMode,Co=null,ef=null,Ul=null,tf=!1;function k0(n,i,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;tf||Co==null||Co!==fr(c)||(c=Co,"selectionStart"in c&&Zd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ul&&Vl(Ul,c)||(Ul=c,c=mh(ef,"onSelect"),0<c.length&&(i=new gs("onSelect","select",null,i,o),n.push({event:i,listeners:c}),i.target=Co)))}function Oa(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ao={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},nf={},I0={};kr&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Pa(n){if(nf[n])return nf[n];if(!Ao[n])return n;var i=Ao[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in I0)return nf[n]=i[o];return n}var D0=Pa("animationend"),j0=Pa("animationiteration"),O0=Pa("animationstart"),GT=Pa("transitionrun"),qT=Pa("transitionstart"),FT=Pa("transitioncancel"),P0=Pa("transitionend"),M0=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function Zr(n,i){M0.set(n,i),Sr(i,[n])}var Au=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Dr=[],Ro=0,sf=0;function Ru(){for(var n=Ro,i=sf=Ro=0;i<n;){var o=Dr[i];Dr[i++]=null;var c=Dr[i];Dr[i++]=null;var f=Dr[i];Dr[i++]=null;var m=Dr[i];if(Dr[i++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&L0(o,f,m)}}function ku(n,i,o,c){Dr[Ro++]=n,Dr[Ro++]=i,Dr[Ro++]=o,Dr[Ro++]=c,sf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function af(n,i,o,c){return ku(n,i,o,c),Iu(n)}function Ma(n,i){return ku(n,null,null,i),Iu(n)}function L0(n,i,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&i!==null&&(f=31-mt(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=o|536870912),m):null}function Iu(n){if(50<oc)throw oc=0,mp=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ko={};function $T(n,i,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(n,i,o,c){return new $T(n,i,o,c)}function of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Us(n,i){var o=n.alternate;return o===null?(o=mr(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function V0(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Du(n,i,o,c,f,m){var x=0;if(c=n,typeof n=="function")of(n)&&(x=1);else if(typeof n=="string")x=JS(n,o,de.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=mr(31,o,i,f),n.elementType=R,n.lanes=m,n;case $:return La(o.children,f,m,i);case Z:x=8,f|=24;break;case ae:return n=mr(12,o,i,f|2),n.elementType=ae,n.lanes=m,n;case De:return n=mr(13,o,i,f),n.elementType=De,n.lanes=m,n;case Ee:return n=mr(19,o,i,f),n.elementType=Ee,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pe:x=10;break e;case he:x=9;break e;case ye:x=11;break e;case A:x=14;break e;case C:x=16,c=null;break e}x=29,o=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=mr(x,o,i,f),i.elementType=n,i.type=c,i.lanes=m,i}function La(n,i,o,c){return n=mr(7,n,c,i),n.lanes=o,n}function lf(n,i,o){return n=mr(6,n,null,i),n.lanes=o,n}function U0(n){var i=mr(18,null,null,0);return i.stateNode=n,i}function cf(n,i,o){return i=mr(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var z0=new WeakMap;function jr(n,i){if(typeof n=="object"&&n!==null){var o=z0.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Ht(i)},z0.set(n,i),i)}return{value:n,source:i,stack:Ht(i)}}var Io=[],Do=0,ju=null,zl=0,Or=[],Pr=0,Ti=null,xs=1,_s="";function zs(n,i){Io[Do++]=zl,Io[Do++]=ju,ju=n,zl=i}function B0(n,i,o){Or[Pr++]=xs,Or[Pr++]=_s,Or[Pr++]=Ti,Ti=n;var c=xs;n=_s;var f=32-mt(c)-1;c&=~(1<<f),o+=1;var m=32-mt(i)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,xs=1<<32-mt(i)+f|o<<f|c,_s=m+n}else xs=1<<m|o<<f|c,_s=n}function uf(n){n.return!==null&&(zs(n,1),B0(n,1,0))}function hf(n){for(;n===ju;)ju=Io[--Do],Io[Do]=null,zl=Io[--Do],Io[Do]=null;for(;n===Ti;)Ti=Or[--Pr],Or[Pr]=null,_s=Or[--Pr],Or[Pr]=null,xs=Or[--Pr],Or[Pr]=null}function H0(n,i){Or[Pr++]=xs,Or[Pr++]=_s,Or[Pr++]=Ti,xs=i.id,_s=i.overflow,Ti=n}var _n=null,Rt=null,tt=!1,Si=null,Mr=!1,df=Error(s(519));function Ni(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Bl(jr(i,n)),df}function G0(n){var i=n.stateNode,o=n.type,c=n.memoizedProps;switch(i[Vt]=n,i[qt]=c,o){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(o=0;o<cc.length;o++)Ye(cc[o],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),Na(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),U(i,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||c.suppressHydrationWarning===!0||ab(i.textContent,o)?(c.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),c.onScroll!=null&&Ye("scroll",i),c.onScrollEnd!=null&&Ye("scrollend",i),c.onClick!=null&&(i.onclick=Qr),i=!0):i=!1,i||Ni(n,!0)}function q0(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 31:case 13:Mr=!1;return;case 27:case 3:Mr=!0;return;default:_n=_n.return}}function jo(n){if(n!==_n)return!1;if(!tt)return q0(n),tt=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||kp(n.type,n.memoizedProps)),o=!o),o&&Rt&&Ni(n),q0(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Rt=mb(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Rt=mb(n)}else i===27?(i=Rt,zi(n.type)?(n=Pp,Pp=null,Rt=n):Rt=i):Rt=_n?Vr(n.stateNode.nextSibling):null;return!0}function Va(){Rt=_n=null,tt=!1}function ff(){var n=Si;return n!==null&&(rr===null?rr=n:rr.push.apply(rr,n),Si=null),n}function Bl(n){Si===null?Si=[n]:Si.push(n)}var pf=P(null),Ua=null,Bs=null;function Ci(n,i,o){oe(pf,i._currentValue),i._currentValue=o}function Hs(n){n._currentValue=pf.current,K(pf)}function mf(n,i,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===o)break;n=n.return}}function gf(n,i,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var D=0;D<i.length;D++)if(S.context===i[D]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),mf(m.return,o,n),c||(x=null);break e}m=S.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(s(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),mf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function Oo(n,i,o,c){n=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var S=f.type;pr(f.pendingProps.value,x.value)||(n!==null?n.push(S):n=[S])}}else if(f===Re.current){if(x=f.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(pc):n=[pc])}f=f.return}n!==null&&gf(i,n,o,c),i.flags|=262144}function Ou(n){for(n=n.firstContext;n!==null;){if(!pr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function za(n){Ua=n,Bs=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function wn(n){return F0(Ua,n)}function Pu(n,i){return Ua===null&&za(n),F0(n,i)}function F0(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Bs===null){if(n===null)throw Error(s(308));Bs=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Bs=Bs.next=i;return o}var YT=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},QT=r.unstable_scheduleCallback,KT=r.unstable_NormalPriority,rn={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yf(){return{controller:new YT,data:new Map,refCount:0}}function Hl(n){n.refCount--,n.refCount===0&&QT(KT,function(){n.controller.abort()})}var Gl=null,vf=0,Po=0,Mo=null;function XT(n,i){if(Gl===null){var o=Gl=[];vf=0,Po=_p(),Mo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return vf++,i.then($0,$0),i}function $0(){if(--vf===0&&Gl!==null){Mo!==null&&(Mo.status="fulfilled");var n=Gl;Gl=null,Po=0,Mo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function JT(n,i){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Y0=Q.S;Q.S=function(n,i){kv=Mt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&XT(n,i),Y0!==null&&Y0(n,i)};var Ba=P(null);function bf(){var n=Ba.current;return n!==null?n:St.pooledCache}function Mu(n,i){i===null?oe(Ba,Ba.current):oe(Ba,i.pool)}function Q0(){var n=bf();return n===null?null:{parent:rn._currentValue,pool:n}}var Lo=Error(s(460)),xf=Error(s(474)),Lu=Error(s(542)),Vu={then:function(){}};function K0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function X0(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(Qr,Qr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,W0(n),n;default:if(typeof i.status=="string")i.then(Qr,Qr);else{if(n=St,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,W0(n),n}throw Ga=i,Lo}}function Ha(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ga=o,Lo):o}}var Ga=null;function J0(){if(Ga===null)throw Error(s(459));var n=Ga;return Ga=null,n}function W0(n){if(n===Lo||n===Lu)throw Error(s(483))}var Vo=null,ql=0;function Uu(n){var i=ql;return ql+=1,Vo===null&&(Vo=[]),X0(Vo,n,i)}function Fl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function zu(n,i){throw i.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Z0(n){function i(z,M){if(n){var H=z.deletions;H===null?(z.deletions=[M],z.flags|=16):H.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function c(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=Us(z,M),z.index=0,z.sibling=null,z}function m(z,M,H){return z.index=H,n?(H=z.alternate,H!==null?(H=H.index,H<M?(z.flags|=67108866,M):H):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function x(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function S(z,M,H,W){return M===null||M.tag!==6?(M=lf(H,z.mode,W),M.return=z,M):(M=f(M,H),M.return=z,M)}function D(z,M,H,W){var Te=H.type;return Te===$?X(z,M,H.props.children,W,H.key):M!==null&&(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===C&&Ha(Te)===M.type)?(M=f(M,H.props),Fl(M,H),M.return=z,M):(M=Du(H.type,H.key,H.props,null,z.mode,W),Fl(M,H),M.return=z,M)}function G(z,M,H,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=cf(H,z.mode,W),M.return=z,M):(M=f(M,H.children||[]),M.return=z,M)}function X(z,M,H,W,Te){return M===null||M.tag!==7?(M=La(H,z.mode,W,Te),M.return=z,M):(M=f(M,H),M.return=z,M)}function ee(z,M,H){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=lf(""+M,z.mode,H),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case k:return H=Du(M.type,M.key,M.props,null,z.mode,H),Fl(H,M),H.return=z,H;case V:return M=cf(M,z.mode,H),M.return=z,M;case C:return M=Ha(M),ee(z,M,H)}if(bt(M)||O(M))return M=La(M,z.mode,H,null),M.return=z,M;if(typeof M.then=="function")return ee(z,Uu(M),H);if(M.$$typeof===pe)return ee(z,Pu(z,M),H);zu(z,M)}return null}function q(z,M,H,W){var Te=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:S(z,M,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case k:return H.key===Te?D(z,M,H,W):null;case V:return H.key===Te?G(z,M,H,W):null;case C:return H=Ha(H),q(z,M,H,W)}if(bt(H)||O(H))return Te!==null?null:X(z,M,H,W,null);if(typeof H.then=="function")return q(z,M,Uu(H),W);if(H.$$typeof===pe)return q(z,M,Pu(z,H),W);zu(z,H)}return null}function Y(z,M,H,W,Te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(H)||null,S(M,z,""+W,Te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case k:return z=z.get(W.key===null?H:W.key)||null,D(M,z,W,Te);case V:return z=z.get(W.key===null?H:W.key)||null,G(M,z,W,Te);case C:return W=Ha(W),Y(z,M,H,W,Te)}if(bt(W)||O(W))return z=z.get(H)||null,X(M,z,W,Te,null);if(typeof W.then=="function")return Y(z,M,H,Uu(W),Te);if(W.$$typeof===pe)return Y(z,M,H,Pu(M,W),Te);zu(M,W)}return null}function be(z,M,H,W){for(var Te=null,ot=null,_e=M,Fe=M=0,Xe=null;_e!==null&&Fe<H.length;Fe++){_e.index>Fe?(Xe=_e,_e=null):Xe=_e.sibling;var lt=q(z,_e,H[Fe],W);if(lt===null){_e===null&&(_e=Xe);break}n&&_e&&lt.alternate===null&&i(z,_e),M=m(lt,M,Fe),ot===null?Te=lt:ot.sibling=lt,ot=lt,_e=Xe}if(Fe===H.length)return o(z,_e),tt&&zs(z,Fe),Te;if(_e===null){for(;Fe<H.length;Fe++)_e=ee(z,H[Fe],W),_e!==null&&(M=m(_e,M,Fe),ot===null?Te=_e:ot.sibling=_e,ot=_e);return tt&&zs(z,Fe),Te}for(_e=c(_e);Fe<H.length;Fe++)Xe=Y(_e,z,Fe,H[Fe],W),Xe!==null&&(n&&Xe.alternate!==null&&_e.delete(Xe.key===null?Fe:Xe.key),M=m(Xe,M,Fe),ot===null?Te=Xe:ot.sibling=Xe,ot=Xe);return n&&_e.forEach(function(Fi){return i(z,Fi)}),tt&&zs(z,Fe),Te}function Ce(z,M,H,W){if(H==null)throw Error(s(151));for(var Te=null,ot=null,_e=M,Fe=M=0,Xe=null,lt=H.next();_e!==null&&!lt.done;Fe++,lt=H.next()){_e.index>Fe?(Xe=_e,_e=null):Xe=_e.sibling;var Fi=q(z,_e,lt.value,W);if(Fi===null){_e===null&&(_e=Xe);break}n&&_e&&Fi.alternate===null&&i(z,_e),M=m(Fi,M,Fe),ot===null?Te=Fi:ot.sibling=Fi,ot=Fi,_e=Xe}if(lt.done)return o(z,_e),tt&&zs(z,Fe),Te;if(_e===null){for(;!lt.done;Fe++,lt=H.next())lt=ee(z,lt.value,W),lt!==null&&(M=m(lt,M,Fe),ot===null?Te=lt:ot.sibling=lt,ot=lt);return tt&&zs(z,Fe),Te}for(_e=c(_e);!lt.done;Fe++,lt=H.next())lt=Y(_e,z,Fe,lt.value,W),lt!==null&&(n&&lt.alternate!==null&&_e.delete(lt.key===null?Fe:lt.key),M=m(lt,M,Fe),ot===null?Te=lt:ot.sibling=lt,ot=lt);return n&&_e.forEach(function(l2){return i(z,l2)}),tt&&zs(z,Fe),Te}function Et(z,M,H,W){if(typeof H=="object"&&H!==null&&H.type===$&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case k:e:{for(var Te=H.key;M!==null;){if(M.key===Te){if(Te=H.type,Te===$){if(M.tag===7){o(z,M.sibling),W=f(M,H.props.children),W.return=z,z=W;break e}}else if(M.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===C&&Ha(Te)===M.type){o(z,M.sibling),W=f(M,H.props),Fl(W,H),W.return=z,z=W;break e}o(z,M);break}else i(z,M);M=M.sibling}H.type===$?(W=La(H.props.children,z.mode,W,H.key),W.return=z,z=W):(W=Du(H.type,H.key,H.props,null,z.mode,W),Fl(W,H),W.return=z,z=W)}return x(z);case V:e:{for(Te=H.key;M!==null;){if(M.key===Te)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){o(z,M.sibling),W=f(M,H.children||[]),W.return=z,z=W;break e}else{o(z,M);break}else i(z,M);M=M.sibling}W=cf(H,z.mode,W),W.return=z,z=W}return x(z);case C:return H=Ha(H),Et(z,M,H,W)}if(bt(H))return be(z,M,H,W);if(O(H)){if(Te=O(H),typeof Te!="function")throw Error(s(150));return H=Te.call(H),Ce(z,M,H,W)}if(typeof H.then=="function")return Et(z,M,Uu(H),W);if(H.$$typeof===pe)return Et(z,M,Pu(z,H),W);zu(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,M!==null&&M.tag===6?(o(z,M.sibling),W=f(M,H),W.return=z,z=W):(o(z,M),W=lf(H,z.mode,W),W.return=z,z=W),x(z)):o(z,M)}return function(z,M,H,W){try{ql=0;var Te=Et(z,M,H,W);return Vo=null,Te}catch(_e){if(_e===Lo||_e===Lu)throw _e;var ot=mr(29,_e,null,z.mode);return ot.lanes=W,ot.return=z,ot}finally{}}}var qa=Z0(!0),ey=Z0(!1),Ai=!1;function _f(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ri(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ki(n,i,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ut&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Iu(n),L0(n,null,o),i}return ku(n,c,i,o),Iu(n)}function $l(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,js(n,o)}}function Ef(n,i){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Tf=!1;function Yl(){if(Tf){var n=Mo;if(n!==null)throw n}}function Ql(n,i,o,c){Tf=!1;var f=n.updateQueue;Ai=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var D=S,G=D.next;D.next=null,x===null?m=G:x.next=G,x=D;var X=n.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==x&&(S===null?X.firstBaseUpdate=G:S.next=G,X.lastBaseUpdate=D))}if(m!==null){var ee=f.baseState;x=0,X=G=D=null,S=m;do{var q=S.lane&-536870913,Y=q!==S.lane;if(Y?(Ke&q)===q:(c&q)===q){q!==0&&q===Po&&(Tf=!0),X!==null&&(X=X.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var be=n,Ce=S;q=i;var Et=o;switch(Ce.tag){case 1:if(be=Ce.payload,typeof be=="function"){ee=be.call(Et,ee,q);break e}ee=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ce.payload,q=typeof be=="function"?be.call(Et,ee,q):be,q==null)break e;ee=_({},ee,q);break e;case 2:Ai=!0}}q=S.callback,q!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[q]:Y.push(q))}else Y={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?(G=X=Y,D=ee):X=X.next=Y,x|=q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);X===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),Pi|=x,n.lanes=x,n.memoizedState=ee}}function ty(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function ny(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)ty(o[n],i)}var Uo=P(null),Bu=P(0);function ry(n,i){n=Js,oe(Bu,n),oe(Uo,i),Js=n|i.baseLanes}function Sf(){oe(Bu,Js),oe(Uo,Uo.current)}function Nf(){Js=Bu.current,K(Uo),K(Bu)}var gr=P(null),Lr=null;function Ii(n){var i=n.alternate;oe(Zt,Zt.current&1),oe(gr,n),Lr===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(Lr=n)}function Cf(n){oe(Zt,Zt.current),oe(gr,n),Lr===null&&(Lr=n)}function sy(n){n.tag===22?(oe(Zt,Zt.current),oe(gr,n),Lr===null&&(Lr=n)):Di()}function Di(){oe(Zt,Zt.current),oe(gr,gr.current)}function yr(n){K(gr),Lr===n&&(Lr=null),K(Zt)}var Zt=P(0);function Hu(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||jp(o)||Op(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Gs=0,He=null,_t=null,sn=null,Gu=!1,zo=!1,Fa=!1,qu=0,Kl=0,Bo=null,WT=0;function Qt(){throw Error(s(321))}function Af(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!pr(n[o],i[o]))return!1;return!0}function Rf(n,i,o,c,f,m){return Gs=m,He=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=n===null||n.memoizedState===null?By:qf,Fa=!1,m=o(c,f),Fa=!1,zo&&(m=ay(i,o,c,f)),iy(n),m}function iy(n){Q.H=Wl;var i=_t!==null&&_t.next!==null;if(Gs=0,sn=_t=He=null,Gu=!1,Kl=0,Bo=null,i)throw Error(s(300));n===null||an||(n=n.dependencies,n!==null&&Ou(n)&&(an=!0))}function ay(n,i,o,c){He=n;var f=0;do{if(zo&&(Bo=null),Kl=0,zo=!1,25<=f)throw Error(s(301));if(f+=1,sn=_t=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=Hy,m=i(o,c)}while(zo);return m}function ZT(){var n=Q.H,i=n.useState()[0];return i=typeof i.then=="function"?Xl(i):i,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(He.flags|=1024),i}function kf(){var n=qu!==0;return qu=0,n}function If(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Df(n){if(Gu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Gu=!1}Gs=0,sn=_t=He=null,zo=!1,Kl=qu=0,Bo=null}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?He.memoizedState=sn=n:sn=sn.next=n,sn}function en(){if(_t===null){var n=He.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=sn===null?He.memoizedState:sn.next;if(i!==null)sn=i,_t=n;else{if(n===null)throw He.alternate===null?Error(s(467)):Error(s(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},sn===null?He.memoizedState=sn=n:sn=sn.next=n}return sn}function Fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(n){var i=Kl;return Kl+=1,Bo===null&&(Bo=[]),n=X0(Bo,n,i),i=He,(sn===null?i.memoizedState:sn.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?By:qf),n}function $u(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xl(n);if(n.$$typeof===pe)return wn(n)}throw Error(s(438,String(n)))}function jf(n){var i=null,o=He.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var c=He.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Fu(),He.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),c=0;c<n;c++)o[c]=L;return i.index++,o}function qs(n,i){return typeof i=="function"?i(n):i}function Yu(n){var i=en();return Of(i,_t,n)}function Of(n,i,o){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}i.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{i=f.next;var S=x=null,D=null,G=i,X=!1;do{var ee=G.lane&-536870913;if(ee!==G.lane?(Ke&ee)===ee:(Gs&ee)===ee){var q=G.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ee===Po&&(X=!0);else if((Gs&q)===q){G=G.next,q===Po&&(X=!0);continue}else ee={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(S=D=ee,x=m):D=D.next=ee,He.lanes|=q,Pi|=q;ee=G.action,Fa&&o(m,ee),m=G.hasEagerState?G.eagerState:o(m,ee)}else q={lane:ee,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(S=D=q,x=m):D=D.next=q,He.lanes|=ee,Pi|=ee;G=G.next}while(G!==null&&G!==i);if(D===null?x=m:D.next=S,!pr(m,n.memoizedState)&&(an=!0,X&&(o=Mo,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Pf(n){var i=en(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);pr(m,i.memoizedState)||(an=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,c]}function oy(n,i,o){var c=He,f=en(),m=tt;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var x=!pr((_t||f).memoizedState,o);if(x&&(f.memoizedState=o,an=!0),f=f.queue,Vf(uy.bind(null,c,f,n),[n]),f.getSnapshot!==i||x||sn!==null&&sn.memoizedState.tag&1){if(c.flags|=2048,Ho(9,{destroy:void 0},cy.bind(null,c,f,o,i),null),St===null)throw Error(s(349));m||(Gs&127)!==0||ly(c,i,o)}return o}function ly(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=He.updateQueue,i===null?(i=Fu(),He.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function cy(n,i,o,c){i.value=o,i.getSnapshot=c,hy(i)&&dy(n)}function uy(n,i,o){return o(function(){hy(i)&&dy(n)})}function hy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!pr(n,o)}catch{return!0}}function dy(n){var i=Ma(n,2);i!==null&&sr(i,n,2)}function Mf(n){var i=Qn();if(typeof n=="function"){var o=n;if(n=o(),Fa){Lt(!0);try{o()}finally{Lt(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:n},i}function fy(n,i,o,c){return n.baseState=o,Of(n,_t,typeof c=="function"?c:qs)}function eS(n,i,o,c,f){if(Xu(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Q.T!==null?o(!0):m.isTransition=!1,c(m),o=i.pending,o===null?(m.next=i.pending=m,py(i,m)):(m.next=o.next,i.pending=o.next=m)}}function py(n,i){var o=i.action,c=i.payload,f=n.state;if(i.isTransition){var m=Q.T,x={};Q.T=x;try{var S=o(f,c),D=Q.S;D!==null&&D(x,S),my(n,i,S)}catch(G){Lf(n,i,G)}finally{m!==null&&x.types!==null&&(m.types=x.types),Q.T=m}}else try{m=o(f,c),my(n,i,m)}catch(G){Lf(n,i,G)}}function my(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){gy(n,i,c)},function(c){return Lf(n,i,c)}):gy(n,i,o)}function gy(n,i,o){i.status="fulfilled",i.value=o,yy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,py(n,o)))}function Lf(n,i,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=o,yy(i),i=i.next;while(i!==c)}n.action=null}function yy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function vy(n,i){return i}function by(n,i){if(tt){var o=St.formState;if(o!==null){e:{var c=He;if(tt){if(Rt){t:{for(var f=Rt,m=Mr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Vr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Rt=Vr(f.nextSibling),c=f.data==="F!";break e}}Ni(c)}c=!1}c&&(i=o[0])}}return o=Qn(),o.memoizedState=o.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:i},o.queue=c,o=Vy.bind(null,He,c),c.dispatch=o,c=Mf(!1),m=Gf.bind(null,He,!1,c.queue),c=Qn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,o=eS.bind(null,He,f,m,o),f.dispatch=o,c.memoizedState=n,[i,o,!1]}function xy(n){var i=en();return _y(i,_t,n)}function _y(n,i,o){if(i=Of(n,i,vy)[0],n=Yu(qs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Xl(i)}catch(x){throw x===Lo?Lu:x}else c=i;i=en();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(He.flags|=2048,Ho(9,{destroy:void 0},tS.bind(null,f,o),null)),[c,m,n]}function tS(n,i){n.action=i}function wy(n){var i=en(),o=_t;if(o!==null)return _y(i,o,n);en(),i=i.memoizedState,o=en();var c=o.queue.dispatch;return o.memoizedState=n,[i,c,!1]}function Ho(n,i,o,c){return n={tag:n,create:o,deps:c,inst:i,next:null},i=He.updateQueue,i===null&&(i=Fu(),He.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,i.lastEffect=n),n}function Ey(){return en().memoizedState}function Qu(n,i,o,c){var f=Qn();He.flags|=n,f.memoizedState=Ho(1|i,{destroy:void 0},o,c===void 0?null:c)}function Ku(n,i,o,c){var f=en();c=c===void 0?null:c;var m=f.memoizedState.inst;_t!==null&&c!==null&&Af(c,_t.memoizedState.deps)?f.memoizedState=Ho(i,m,o,c):(He.flags|=n,f.memoizedState=Ho(1|i,m,o,c))}function Ty(n,i){Qu(8390656,8,n,i)}function Vf(n,i){Ku(2048,8,n,i)}function nS(n){He.flags|=4;var i=He.updateQueue;if(i===null)i=Fu(),He.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Sy(n){var i=en().memoizedState;return nS({ref:i,nextImpl:n}),function(){if((ut&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ny(n,i){return Ku(4,2,n,i)}function Cy(n,i){return Ku(4,4,n,i)}function Ay(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ry(n,i,o){o=o!=null?o.concat([n]):null,Ku(4,4,Ay.bind(null,i,n),o)}function Uf(){}function ky(n,i){var o=en();i=i===void 0?null:i;var c=o.memoizedState;return i!==null&&Af(i,c[1])?c[0]:(o.memoizedState=[n,i],n)}function Iy(n,i){var o=en();i=i===void 0?null:i;var c=o.memoizedState;if(i!==null&&Af(i,c[1]))return c[0];if(c=n(),Fa){Lt(!0);try{n()}finally{Lt(!1)}}return o.memoizedState=[c,i],c}function zf(n,i,o){return o===void 0||(Gs&1073741824)!==0&&(Ke&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=Dv(),He.lanes|=n,Pi|=n,o)}function Dy(n,i,o,c){return pr(o,i)?o:Uo.current!==null?(n=zf(n,o,c),pr(n,i)||(an=!0),n):(Gs&42)===0||(Gs&1073741824)!==0&&(Ke&261930)===0?(an=!0,n.memoizedState=o):(n=Dv(),He.lanes|=n,Pi|=n,i)}function jy(n,i,o,c,f){var m=le.p;le.p=m!==0&&8>m?m:8;var x=Q.T,S={};Q.T=S,Gf(n,!1,i,o);try{var D=f(),G=Q.S;if(G!==null&&G(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=JT(D,c);Jl(n,i,X,xr(n))}else Jl(n,i,c,xr(n))}catch(ee){Jl(n,i,{then:function(){},status:"rejected",reason:ee},xr())}finally{le.p=m,x!==null&&S.types!==null&&(x.types=S.types),Q.T=x}}function rS(){}function Bf(n,i,o,c){if(n.tag!==5)throw Error(s(476));var f=Oy(n).queue;jy(n,f,i,we,o===null?rS:function(){return Py(n),o(c)})}function Oy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:we},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Py(n){var i=Oy(n);i.next===null&&(i=n.alternate.memoizedState),Jl(n,i.next.queue,{},xr())}function Hf(){return wn(pc)}function My(){return en().memoizedState}function Ly(){return en().memoizedState}function sS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=xr();n=Ri(o);var c=ki(i,n,o);c!==null&&(sr(c,i,o),$l(c,i,o)),i={cache:yf()},n.payload=i;return}i=i.return}}function iS(n,i,o){var c=xr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xu(n)?Uy(i,o):(o=af(n,i,o,c),o!==null&&(sr(o,n,c),zy(o,i,c)))}function Vy(n,i,o){var c=xr();Jl(n,i,o,c)}function Jl(n,i,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Xu(n))Uy(i,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var x=i.lastRenderedState,S=m(x,o);if(f.hasEagerState=!0,f.eagerState=S,pr(S,x))return ku(n,i,f,0),St===null&&Ru(),!1}catch{}finally{}if(o=af(n,i,f,c),o!==null)return sr(o,n,c),zy(o,i,c),!0}return!1}function Gf(n,i,o,c){if(c={lane:2,revertLane:_p(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xu(n)){if(i)throw Error(s(479))}else i=af(n,o,c,2),i!==null&&sr(i,n,2)}function Xu(n){var i=n.alternate;return n===He||i!==null&&i===He}function Uy(n,i){zo=Gu=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function zy(n,i,o){if((o&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,o|=c,i.lanes=o,js(n,o)}}var Wl={readContext:wn,use:$u,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Wl.useEffectEvent=Qt;var By={readContext:wn,use:$u,useCallback:function(n,i){return Qn().memoizedState=[n,i===void 0?null:i],n},useContext:wn,useEffect:Ty,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Qu(4194308,4,Ay.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Qu(4194308,4,n,i)},useInsertionEffect:function(n,i){Qu(4,2,n,i)},useMemo:function(n,i){var o=Qn();i=i===void 0?null:i;var c=n();if(Fa){Lt(!0);try{n()}finally{Lt(!1)}}return o.memoizedState=[c,i],c},useReducer:function(n,i,o){var c=Qn();if(o!==void 0){var f=o(i);if(Fa){Lt(!0);try{o(i)}finally{Lt(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=iS.bind(null,He,n),[c.memoizedState,n]},useRef:function(n){var i=Qn();return n={current:n},i.memoizedState=n},useState:function(n){n=Mf(n);var i=n.queue,o=Vy.bind(null,He,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:Uf,useDeferredValue:function(n,i){var o=Qn();return zf(o,n,i)},useTransition:function(){var n=Mf(!1);return n=jy.bind(null,He,n.queue,!0,!1),Qn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var c=He,f=Qn();if(tt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),St===null)throw Error(s(349));(Ke&127)!==0||ly(c,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,Ty(uy.bind(null,c,m,n),[n]),c.flags|=2048,Ho(9,{destroy:void 0},cy.bind(null,c,m,o,i),null),o},useId:function(){var n=Qn(),i=St.identifierPrefix;if(tt){var o=_s,c=xs;o=(c&~(1<<32-mt(c)-1)).toString(32)+o,i="_"+i+"R_"+o,o=qu++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=WT++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Hf,useFormState:by,useActionState:by,useOptimistic:function(n){var i=Qn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Gf.bind(null,He,!0,o),o.dispatch=i,[n,i]},useMemoCache:jf,useCacheRefresh:function(){return Qn().memoizedState=sS.bind(null,He)},useEffectEvent:function(n){var i=Qn(),o={impl:n};return i.memoizedState=o,function(){if((ut&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},qf={readContext:wn,use:$u,useCallback:ky,useContext:wn,useEffect:Vf,useImperativeHandle:Ry,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Iy,useReducer:Yu,useRef:Ey,useState:function(){return Yu(qs)},useDebugValue:Uf,useDeferredValue:function(n,i){var o=en();return Dy(o,_t.memoizedState,n,i)},useTransition:function(){var n=Yu(qs)[0],i=en().memoizedState;return[typeof n=="boolean"?n:Xl(n),i]},useSyncExternalStore:oy,useId:My,useHostTransitionStatus:Hf,useFormState:xy,useActionState:xy,useOptimistic:function(n,i){var o=en();return fy(o,_t,n,i)},useMemoCache:jf,useCacheRefresh:Ly};qf.useEffectEvent=Sy;var Hy={readContext:wn,use:$u,useCallback:ky,useContext:wn,useEffect:Vf,useImperativeHandle:Ry,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Iy,useReducer:Pf,useRef:Ey,useState:function(){return Pf(qs)},useDebugValue:Uf,useDeferredValue:function(n,i){var o=en();return _t===null?zf(o,n,i):Dy(o,_t.memoizedState,n,i)},useTransition:function(){var n=Pf(qs)[0],i=en().memoizedState;return[typeof n=="boolean"?n:Xl(n),i]},useSyncExternalStore:oy,useId:My,useHostTransitionStatus:Hf,useFormState:wy,useActionState:wy,useOptimistic:function(n,i){var o=en();return _t!==null?fy(o,_t,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Ly};Hy.useEffectEvent=Sy;function Ff(n,i,o,c){i=n.memoizedState,o=o(c,i),o=o==null?i:_({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var $f={enqueueSetState:function(n,i,o){n=n._reactInternals;var c=xr(),f=Ri(c);f.payload=i,o!=null&&(f.callback=o),i=ki(n,f,c),i!==null&&(sr(i,n,c),$l(i,n,c))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var c=xr(),f=Ri(c);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ki(n,f,c),i!==null&&(sr(i,n,c),$l(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=xr(),c=Ri(o);c.tag=2,i!=null&&(c.callback=i),i=ki(n,c,o),i!==null&&(sr(i,n,o),$l(i,n,o))}};function Gy(n,i,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):i.prototype&&i.prototype.isPureReactComponent?!Vl(o,c)||!Vl(f,m):!0}function qy(n,i,o,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,c),i.state!==n&&$f.enqueueReplaceState(i,i.state,null)}function $a(n,i){var o=i;if("ref"in i){o={};for(var c in i)c!=="ref"&&(o[c]=i[c])}if(n=n.defaultProps){o===i&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Fy(n){Au(n)}function $y(n){console.error(n)}function Yy(n){Au(n)}function Ju(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function Qy(n,i,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Yf(n,i,o){return o=Ri(o),o.tag=3,o.payload={element:null},o.callback=function(){Ju(n,i)},o}function Ky(n){return n=Ri(n),n.tag=3,n}function Xy(n,i,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Qy(i,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){Qy(i,o,c),typeof f!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function aS(n,i,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=o.alternate,i!==null&&Oo(i,o,f,!0),o=gr.current,o!==null){switch(o.tag){case 31:case 13:return Lr===null?ch():o.alternate===null&&Kt===0&&(Kt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Vu?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([c]):i.add(c),vp(n,c,f)),!1;case 22:return o.flags|=65536,c===Vu?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([c]):o.add(c)),vp(n,c,f)),!1}throw Error(s(435,o.tag))}return vp(n,c,f),ch(),!1}if(tt)return i=gr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==df&&(n=Error(s(422),{cause:c}),Bl(jr(n,o)))):(c!==df&&(i=Error(s(423),{cause:c}),Bl(jr(i,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=jr(c,o),f=Yf(n.stateNode,c,f),Ef(n,f),Kt!==4&&(Kt=2)),!1;var m=Error(s(520),{cause:c});if(m=jr(m,o),ac===null?ac=[m]:ac.push(m),Kt!==4&&(Kt=2),i===null)return!0;c=jr(c,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Yf(o.stateNode,c,n),Ef(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Mi===null||!Mi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Ky(f),Xy(f,n,o,c),Ef(o,f),!1}o=o.return}while(o!==null);return!1}var Qf=Error(s(461)),an=!1;function En(n,i,o,c){i.child=n===null?ey(i,null,o,c):qa(i,n.child,o,c)}function Jy(n,i,o,c,f){o=o.render;var m=i.ref;if("ref"in c){var x={};for(var S in c)S!=="ref"&&(x[S]=c[S])}else x=c;return za(i),c=Rf(n,i,o,x,m,f),S=kf(),n!==null&&!an?(If(n,i,f),Fs(n,i,f)):(tt&&S&&uf(i),i.flags|=1,En(n,i,c,f),i.child)}function Wy(n,i,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!of(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,Zy(n,i,m,c,f)):(n=Du(o.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!np(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:Vl,o(x,c)&&n.ref===i.ref)return Fs(n,i,f)}return i.flags|=1,n=Us(m,c),n.ref=i.ref,n.return=i,i.child=n}function Zy(n,i,o,c,f){if(n!==null){var m=n.memoizedProps;if(Vl(m,c)&&n.ref===i.ref)if(an=!1,i.pendingProps=c=m,np(n,f))(n.flags&131072)!==0&&(an=!0);else return i.lanes=n.lanes,Fs(n,i,f)}return Kf(n,i,o,c,f)}function ev(n,i,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,i.child=null;return tv(n,i,m,o,c)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Mu(i,m!==null?m.cachePool:null),m!==null?ry(i,m):Sf(),sy(i);else return c=i.lanes=536870912,tv(n,i,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Mu(i,m.cachePool),ry(i,m),Di(),i.memoizedState=null):(n!==null&&Mu(i,null),Sf(),Di());return En(n,i,f,o),i.child}function Zl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function tv(n,i,o,c,f){var m=bf();return m=m===null?null:{parent:rn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&Mu(i,null),Sf(),sy(i),n!==null&&Oo(n,i,c,!0),i.childLanes=f,null}function Wu(n,i){return i=eh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function nv(n,i,o){return qa(i,n.child,null,o),n=Wu(i,i.pendingProps),n.flags|=2,yr(i),i.memoizedState=null,n}function oS(n,i,o){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(tt){if(c.mode==="hidden")return n=Wu(i,c),i.lanes=536870912,Zl(null,n);if(Cf(i),(n=Rt)?(n=pb(n,Mr),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ti!==null?{id:xs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},o=U0(n),o.return=i,i.child=o,_n=i,Rt=null)):n=null,n===null)throw Ni(i);return i.lanes=536870912,null}return Wu(i,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Cf(i),f)if(i.flags&256)i.flags&=-257,i=nv(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(an||Oo(n,i,o,!1),f=(o&n.childLanes)!==0,an||f){if(c=St,c!==null&&(x=Gt(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,Ma(n,x),sr(c,n,x),Qf;ch(),i=nv(n,i,o)}else n=m.treeContext,Rt=Vr(x.nextSibling),_n=i,tt=!0,Si=null,Mr=!1,n!==null&&H0(i,n),i=Wu(i,c),i.flags|=4096;return i}return n=Us(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Zu(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Kf(n,i,o,c,f){return za(i),o=Rf(n,i,o,c,void 0,f),c=kf(),n!==null&&!an?(If(n,i,f),Fs(n,i,f)):(tt&&c&&uf(i),i.flags|=1,En(n,i,o,f),i.child)}function rv(n,i,o,c,f,m){return za(i),i.updateQueue=null,o=ay(i,c,o,f),iy(n),c=kf(),n!==null&&!an?(If(n,i,m),Fs(n,i,m)):(tt&&c&&uf(i),i.flags|=1,En(n,i,o,m),i.child)}function sv(n,i,o,c,f){if(za(i),i.stateNode===null){var m=ko,x=o.contextType;typeof x=="object"&&x!==null&&(m=wn(x)),m=new o(c,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=$f,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=c,m.state=i.memoizedState,m.refs={},_f(i),x=o.contextType,m.context=typeof x=="object"&&x!==null?wn(x):ko,m.state=i.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Ff(i,o,x,c),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&$f.enqueueReplaceState(m,m.state,null),Ql(i,c,m,f),Yl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){m=i.stateNode;var S=i.memoizedProps,D=$a(o,S);m.props=D;var G=m.context,X=o.contextType;x=ko,typeof X=="object"&&X!==null&&(x=wn(X));var ee=o.getDerivedStateFromProps;X=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||G!==x)&&qy(i,m,c,x),Ai=!1;var q=i.memoizedState;m.state=q,Ql(i,c,m,f),Yl(),G=i.memoizedState,S||q!==G||Ai?(typeof ee=="function"&&(Ff(i,o,ee,c),G=i.memoizedState),(D=Ai||Gy(i,o,D,c,q,G,x))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=G),m.props=c,m.state=G,m.context=x,c=D):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{m=i.stateNode,wf(n,i),x=i.memoizedProps,X=$a(o,x),m.props=X,ee=i.pendingProps,q=m.context,G=o.contextType,D=ko,typeof G=="object"&&G!==null&&(D=wn(G)),S=o.getDerivedStateFromProps,(G=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ee||q!==D)&&qy(i,m,c,D),Ai=!1,q=i.memoizedState,m.state=q,Ql(i,c,m,f),Yl();var Y=i.memoizedState;x!==ee||q!==Y||Ai||n!==null&&n.dependencies!==null&&Ou(n.dependencies)?(typeof S=="function"&&(Ff(i,o,S,c),Y=i.memoizedState),(X=Ai||Gy(i,o,X,c,q,Y,D)||n!==null&&n.dependencies!==null&&Ou(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,D)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Y),m.props=c,m.state=Y,m.context=D,c=X):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&q===n.memoizedState||(i.flags|=1024),c=!1)}return m=c,Zu(n,i),c=(i.flags&128)!==0,m||c?(m=i.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&c?(i.child=qa(i,n.child,null,f),i.child=qa(i,null,o,f)):En(n,i,o,f),i.memoizedState=m.state,n=i.child):n=Fs(n,i,f),n}function iv(n,i,o,c){return Va(),i.flags|=256,En(n,i,o,c),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jf(n){return{baseLanes:n,cachePool:Q0()}}function Wf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=br),n}function av(n,i,o){var c=i.pendingProps,f=!1,m=(i.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(Zt.current&2)!==0),x&&(f=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,n===null){if(tt){if(f?Ii(i):Di(),(n=Rt)?(n=pb(n,Mr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ti!==null?{id:xs,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},o=U0(n),o.return=i,i.child=o,_n=i,Rt=null)):n=null,n===null)throw Ni(i);return Op(n)?i.lanes=32:i.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Di(),f=i.mode,S=eh({mode:"hidden",children:S},f),c=La(c,f,o,null),S.return=i,c.return=i,S.sibling=c,i.child=S,c=i.child,c.memoizedState=Jf(o),c.childLanes=Wf(n,x,o),i.memoizedState=Xf,Zl(null,c)):(Ii(i),Zf(i,S))}var D=n.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(m)i.flags&256?(Ii(i),i.flags&=-257,i=ep(n,i,o)):i.memoizedState!==null?(Di(),i.child=n.child,i.flags|=128,i=null):(Di(),S=c.fallback,f=i.mode,c=eh({mode:"visible",children:c.children},f),S=La(S,f,o,null),S.flags|=2,c.return=i,S.return=i,c.sibling=S,i.child=c,qa(i,n.child,null,o),c=i.child,c.memoizedState=Jf(o),c.childLanes=Wf(n,x,o),i.memoizedState=Xf,i=Zl(null,c));else if(Ii(i),Op(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var G=x.dgst;x=G,c=Error(s(419)),c.stack="",c.digest=x,Bl({value:c,source:null,stack:null}),i=ep(n,i,o)}else if(an||Oo(n,i,o,!1),x=(o&n.childLanes)!==0,an||x){if(x=St,x!==null&&(c=Gt(x,o),c!==0&&c!==D.retryLane))throw D.retryLane=c,Ma(n,c),sr(x,n,c),Qf;jp(S)||ch(),i=ep(n,i,o)}else jp(S)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,Rt=Vr(S.nextSibling),_n=i,tt=!0,Si=null,Mr=!1,n!==null&&H0(i,n),i=Zf(i,c.children),i.flags|=4096);return i}return f?(Di(),S=c.fallback,f=i.mode,D=n.child,G=D.sibling,c=Us(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,G!==null?S=Us(G,S):(S=La(S,f,o,null),S.flags|=2),S.return=i,c.return=i,c.sibling=S,i.child=c,Zl(null,c),c=i.child,S=n.child.memoizedState,S===null?S=Jf(o):(f=S.cachePool,f!==null?(D=rn._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Q0(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=Wf(n,x,o),i.memoizedState=Xf,Zl(n.child,c)):(Ii(i),o=n.child,n=o.sibling,o=Us(o,{mode:"visible",children:c.children}),o.return=i,o.sibling=null,n!==null&&(x=i.deletions,x===null?(i.deletions=[n],i.flags|=16):x.push(n)),i.child=o,i.memoizedState=null,o)}function Zf(n,i){return i=eh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function eh(n,i){return n=mr(22,n,null,i),n.lanes=0,n}function ep(n,i,o){return qa(i,n.child,null,o),n=Zf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function ov(n,i,o){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),mf(n.return,i,o)}function tp(n,i,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function lv(n,i,o){var c=i.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=Zt.current,S=(x&2)!==0;if(S?(x=x&1|2,i.flags|=128):x&=1,oe(Zt,x),En(n,i,c,o),c=tt?zl:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ov(n,o,i);else if(n.tag===19)ov(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)n=o.alternate,n!==null&&Hu(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),tp(i,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Hu(n)===null){i.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}tp(i,!0,o,null,m,c);break;case"together":tp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Fs(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Pi|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Oo(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Us(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Us(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function np(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Ou(n)))}function lS(n,i,o){switch(i.tag){case 3:dt(i,i.stateNode.containerInfo),Ci(i,rn,n.memoizedState.cache),Va();break;case 27:case 5:Hn(i);break;case 4:dt(i,i.stateNode.containerInfo);break;case 10:Ci(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Cf(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ii(i),i.flags|=128,null):(o&i.child.childLanes)!==0?av(n,i,o):(Ii(i),n=Fs(n,i,o),n!==null?n.sibling:null);Ii(i);break;case 19:var f=(n.flags&128)!==0;if(c=(o&i.childLanes)!==0,c||(Oo(n,i,o,!1),c=(o&i.childLanes)!==0),f){if(c)return lv(n,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Zt,Zt.current),c)break;return null;case 22:return i.lanes=0,ev(n,i,o,i.pendingProps);case 24:Ci(i,rn,n.memoizedState.cache)}return Fs(n,i,o)}function cv(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)an=!0;else{if(!np(n,o)&&(i.flags&128)===0)return an=!1,lS(n,i,o);an=(n.flags&131072)!==0}else an=!1,tt&&(i.flags&1048576)!==0&&B0(i,zl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Ha(i.elementType),i.type=n,typeof n=="function")of(n)?(c=$a(n,c),i.tag=1,i=sv(null,i,n,c,o)):(i.tag=0,i=Kf(null,i,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ye){i.tag=11,i=Jy(null,i,n,c,o);break e}else if(f===A){i.tag=14,i=Wy(null,i,n,c,o);break e}}throw i=rt(n)||n,Error(s(306,i,""))}}return i;case 0:return Kf(n,i,i.type,i.pendingProps,o);case 1:return c=i.type,f=$a(c,i.pendingProps),sv(n,i,c,f,o);case 3:e:{if(dt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var m=i.memoizedState;f=m.element,wf(n,i),Ql(i,c,null,o);var x=i.memoizedState;if(c=x.cache,Ci(i,rn,c),c!==m.cache&&gf(i,[rn],o,!0),Yl(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=iv(n,i,c,o);break e}else if(c!==f){f=jr(Error(s(424)),i),Bl(f),i=iv(n,i,c,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Rt=Vr(n.firstChild),_n=i,tt=!0,Si=null,Mr=!0,o=ey(i,null,c,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Va(),c===f){i=Fs(n,i,o);break e}En(n,i,c,o)}i=i.child}return i;case 26:return Zu(n,i),n===null?(o=xb(i.type,null,i.pendingProps,null))?i.memoizedState=o:tt||(o=i.type,n=i.pendingProps,c=gh(je.current).createElement(o),c[Vt]=i,c[qt]=n,Tn(c,o,n),Ft(c),i.stateNode=c):i.memoizedState=xb(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Hn(i),n===null&&tt&&(c=i.stateNode=yb(i.type,i.pendingProps,je.current),_n=i,Mr=!0,f=Rt,zi(i.type)?(Pp=f,Rt=Vr(c.firstChild)):Rt=f),En(n,i,i.pendingProps.children,o),Zu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&tt&&((f=c=Rt)&&(c=VS(c,i.type,i.pendingProps,Mr),c!==null?(i.stateNode=c,_n=i,Rt=Vr(c.firstChild),Mr=!1,f=!0):f=!1),f||Ni(i)),Hn(i),f=i.type,m=i.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,kp(f,m)?c=null:x!==null&&kp(f,x)&&(i.flags|=32),i.memoizedState!==null&&(f=Rf(n,i,ZT,null,null,o),pc._currentValue=f),Zu(n,i),En(n,i,c,o),i.child;case 6:return n===null&&tt&&((n=o=Rt)&&(o=US(o,i.pendingProps,Mr),o!==null?(i.stateNode=o,_n=i,Rt=null,n=!0):n=!1),n||Ni(i)),null;case 13:return av(n,i,o);case 4:return dt(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=qa(i,null,c,o):En(n,i,c,o),i.child;case 11:return Jy(n,i,i.type,i.pendingProps,o);case 7:return En(n,i,i.pendingProps,o),i.child;case 8:return En(n,i,i.pendingProps.children,o),i.child;case 12:return En(n,i,i.pendingProps.children,o),i.child;case 10:return c=i.pendingProps,Ci(i,i.type,c.value),En(n,i,c.children,o),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,za(i),f=wn(f),c=c(f),i.flags|=1,En(n,i,c,o),i.child;case 14:return Wy(n,i,i.type,i.pendingProps,o);case 15:return Zy(n,i,i.type,i.pendingProps,o);case 19:return lv(n,i,o);case 31:return oS(n,i,o);case 22:return ev(n,i,o,i.pendingProps);case 24:return za(i),c=wn(rn),n===null?(f=bf(),f===null&&(f=St,m=yf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:c,cache:f},_f(i),Ci(i,rn,f)):((n.lanes&o)!==0&&(wf(n,i),Ql(i,null,null,o),Yl()),f=n.memoizedState,m=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ci(i,rn,c)):(c=m.cache,Ci(i,rn,c),c!==f.cache&&gf(i,[rn],o,!0))),En(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function $s(n){n.flags|=4}function rp(n,i,o,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(Mv())n.flags|=8192;else throw Ga=Vu,xf}else n.flags&=-16777217}function uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Sb(i))if(Mv())n.flags|=8192;else throw Ga=Vu,xf}function th(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?_a():536870912,n.lanes|=i,$o|=i)}function ec(n,i){if(!tt)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function kt(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(i)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,i}function cS(n,i,o){var c=i.pendingProps;switch(hf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(i),null;case 1:return kt(i),null;case 3:return o=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Hs(rn),ft(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(jo(i)?$s(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ff())),kt(i),null;case 26:var f=i.type,m=i.memoizedState;return n===null?($s(i),m!==null?(kt(i),uv(i,m)):(kt(i),rp(i,f,null,c,o))):m?m!==n.memoizedState?($s(i),kt(i),uv(i,m)):(kt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&$s(i),kt(i),rp(i,f,n,c,o)),null;case 27:if(os(i),o=je.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&$s(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return kt(i),null}n=de.current,jo(i)?G0(i):(n=yb(f,c,o),i.stateNode=n,$s(i))}return kt(i),null;case 5:if(os(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&$s(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return kt(i),null}if(m=de.current,jo(i))G0(i);else{var x=gh(je.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[Vt]=i,m[qt]=c;e:for(x=i.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===i)break e;for(;x.sibling===null;){if(x.return===null||x.return===i)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}i.stateNode=m;e:switch(Tn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&$s(i)}}return kt(i),rp(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&$s(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=je.current,jo(i)){if(n=i.stateNode,o=i.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Vt]=i,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||ab(n.nodeValue,o)),n||Ni(i,!0)}else n=gh(n).createTextNode(c),n[Vt]=i,i.stateNode=n}return kt(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(c=jo(i),o!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Vt]=i}else Va(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),n=!1}else o=ff(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(yr(i),i):(yr(i),null);if((i.flags&128)!==0)throw Error(s(558))}return kt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=jo(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Vt]=i}else Va(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),f=!1}else f=ff(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(yr(i),i):(yr(i),null)}return yr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),th(i,i.updateQueue),kt(i),null);case 4:return ft(),n===null&&Sp(i.stateNode.containerInfo),kt(i),null;case 10:return Hs(i.type),kt(i),null;case 19:if(K(Zt),c=i.memoizedState,c===null)return kt(i),null;if(f=(i.flags&128)!==0,m=c.rendering,m===null)if(f)ec(c,!1);else{if(Kt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Hu(n),m!==null){for(i.flags|=128,ec(c,!1),n=m.updateQueue,i.updateQueue=n,th(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)V0(o,n),o=o.sibling;return oe(Zt,Zt.current&1|2),tt&&zs(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Mt()>ah&&(i.flags|=128,f=!0,ec(c,!1),i.lanes=4194304)}else{if(!f)if(n=Hu(m),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,th(i,n),ec(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!tt)return kt(i),null}else 2*Mt()-c.renderingStartTime>ah&&o!==536870912&&(i.flags|=128,f=!0,ec(c,!1),i.lanes=4194304);c.isBackwards?(m.sibling=i.child,i.child=m):(n=c.last,n!==null?n.sibling=m:i.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Mt(),n.sibling=null,o=Zt.current,oe(Zt,f?o&1|2:o&1),tt&&zs(i,c.treeForkCount),n):(kt(i),null);case 22:case 23:return yr(i),Nf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(o&536870912)!==0&&(i.flags&128)===0&&(kt(i),i.subtreeFlags&6&&(i.flags|=8192)):kt(i),o=i.updateQueue,o!==null&&th(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==o&&(i.flags|=2048),n!==null&&K(Ba),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Hs(rn),kt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function uS(n,i){switch(hf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Hs(rn),ft(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return os(i),null;case 31:if(i.memoizedState!==null){if(yr(i),i.alternate===null)throw Error(s(340));Va()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(yr(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Va()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return K(Zt),null;case 4:return ft(),null;case 10:return Hs(i.type),null;case 22:case 23:return yr(i),Nf(),n!==null&&K(Ba),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Hs(rn),null;case 25:return null;default:return null}}function hv(n,i){switch(hf(i),i.tag){case 3:Hs(rn),ft();break;case 26:case 27:case 5:os(i);break;case 4:ft();break;case 31:i.memoizedState!==null&&yr(i);break;case 13:yr(i);break;case 19:K(Zt);break;case 10:Hs(i.type);break;case 22:case 23:yr(i),Nf(),n!==null&&K(Ba);break;case 24:Hs(rn)}}function tc(n,i){try{var o=i.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(S){yt(i,i.return,S)}}function ji(n,i,o){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,f=i;var D=o,G=S;try{G()}catch(X){yt(f,D,X)}}}c=c.next}while(c!==m)}}catch(X){yt(i,i.return,X)}}function dv(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{ny(i,o)}catch(c){yt(n,n.return,c)}}}function fv(n,i,o){o.props=$a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){yt(n,i,c)}}function nc(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){yt(n,i,f)}}function ws(n,i){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){yt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){yt(n,i,f)}else o.current=null}function pv(n){var i=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){yt(n,n.return,f)}}function sp(n,i,o){try{var c=n.stateNode;DS(c,n.type,o,i),c[qt]=i}catch(f){yt(n,n.return,f)}}function mv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&zi(n.type)||n.tag===4}function ip(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ap(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Qr));else if(c!==4&&(c===27&&zi(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(ap(n,i,o),n=n.sibling;n!==null;)ap(n,i,o),n=n.sibling}function nh(n,i,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(c!==4&&(c===27&&zi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(nh(n,i,o),n=n.sibling;n!==null;)nh(n,i,o),n=n.sibling}function gv(n){var i=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Tn(i,c,o),i[Vt]=n,i[qt]=o}catch(m){yt(n,n.return,m)}}var Ys=!1,on=!1,op=!1,yv=typeof WeakSet=="function"?WeakSet:Set,yn=null;function hS(n,i){if(n=n.containerInfo,Ap=Eh,n=R0(n),Zd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,S=-1,D=-1,G=0,X=0,ee=n,q=null;t:for(;;){for(var Y;ee!==o||f!==0&&ee.nodeType!==3||(S=x+f),ee!==m||c!==0&&ee.nodeType!==3||(D=x+c),ee.nodeType===3&&(x+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)q=ee,ee=Y;for(;;){if(ee===n)break t;if(q===o&&++G===f&&(S=x),q===m&&++X===c&&(D=x),(Y=ee.nextSibling)!==null)break;ee=q,q=ee.parentNode}ee=Y}o=S===-1||D===-1?null:{start:S,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rp={focusedElem:n,selectionRange:o},Eh=!1,yn=i;yn!==null;)if(i=yn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,yn=n;else for(;yn!==null;){switch(i=yn,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var be=$a(o.type,f);n=c.getSnapshotBeforeUpdate(be,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ce){yt(o,o.return,Ce)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,yn=n;break}yn=i.return}}function vv(n,i,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ks(n,o),c&4&&tc(5,o);break;case 1:if(Ks(n,o),c&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(x){yt(o,o.return,x)}else{var f=$a(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(x){yt(o,o.return,x)}}c&64&&dv(o),c&512&&nc(o,o.return);break;case 3:if(Ks(n,o),c&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ny(n,i)}catch(x){yt(o,o.return,x)}}break;case 27:i===null&&c&4&&gv(o);case 26:case 5:Ks(n,o),i===null&&c&4&&pv(o),c&512&&nc(o,o.return);break;case 12:Ks(n,o);break;case 31:Ks(n,o),c&4&&_v(n,o);break;case 13:Ks(n,o),c&4&&wv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=xS.bind(null,o),zS(n,o))));break;case 22:if(c=o.memoizedState!==null||Ys,!c){i=i!==null&&i.memoizedState!==null||on,f=Ys;var m=on;Ys=c,(on=i)&&!m?Xs(n,o,(o.subtreeFlags&8772)!==0):Ks(n,o),Ys=f,on=m}break;case 30:break;default:Ks(n,o)}}function bv(n){var i=n.alternate;i!==null&&(n.alternate=null,bv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ps(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ot=null,er=!1;function Qs(n,i,o){for(o=o.child;o!==null;)xv(n,i,o),o=o.sibling}function xv(n,i,o){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Gn,o)}catch{}switch(o.tag){case 26:on||ws(o,i),Qs(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:on||ws(o,i);var c=Ot,f=er;zi(o.type)&&(Ot=o.stateNode,er=!1),Qs(n,i,o),hc(o.stateNode),Ot=c,er=f;break;case 5:on||ws(o,i);case 6:if(c=Ot,f=er,Ot=null,Qs(n,i,o),Ot=c,er=f,Ot!==null)if(er)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(o.stateNode)}catch(m){yt(o,i,m)}else try{Ot.removeChild(o.stateNode)}catch(m){yt(o,i,m)}break;case 18:Ot!==null&&(er?(n=Ot,db(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),el(n)):db(Ot,o.stateNode));break;case 4:c=Ot,f=er,Ot=o.stateNode.containerInfo,er=!0,Qs(n,i,o),Ot=c,er=f;break;case 0:case 11:case 14:case 15:ji(2,o,i),on||ji(4,o,i),Qs(n,i,o);break;case 1:on||(ws(o,i),c=o.stateNode,typeof c.componentWillUnmount=="function"&&fv(o,i,c)),Qs(n,i,o);break;case 21:Qs(n,i,o);break;case 22:on=(c=on)||o.memoizedState!==null,Qs(n,i,o),on=c;break;default:Qs(n,i,o)}}function _v(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{el(n)}catch(o){yt(i,i.return,o)}}}function wv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{el(n)}catch(o){yt(i,i.return,o)}}function dS(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new yv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new yv),i;default:throw Error(s(435,n.tag))}}function rh(n,i){var o=dS(n);i.forEach(function(c){if(!o.has(c)){o.add(c);var f=_S.bind(null,n,c);c.then(f,f)}})}function tr(n,i){var o=i.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=i,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(zi(S.type)){Ot=S.stateNode,er=!1;break e}break;case 5:Ot=S.stateNode,er=!1;break e;case 3:case 4:Ot=S.stateNode.containerInfo,er=!0;break e}S=S.return}if(Ot===null)throw Error(s(160));xv(m,x,f),Ot=null,er=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Ev(i,n),i=i.sibling}var es=null;function Ev(n,i){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:tr(i,n),nr(n),c&4&&(ji(3,n,n.return),tc(3,n),ji(5,n,n.return));break;case 1:tr(i,n),nr(n),c&512&&(on||o===null||ws(o,o.return)),c&64&&Ys&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=es;if(tr(i,n),nr(n),c&512&&(on||o===null||ws(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Tr]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Tn(m,c,o),m[Vt]=n,Ft(m),c=m;break e;case"link":var x=Eb("link","href",f).get(c+(o.href||""));if(x){for(var S=0;S<x.length;S++)if(m=x[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;case"meta":if(x=Eb("meta","content",f).get(c+(o.content||""))){for(S=0;S<x.length;S++)if(m=x[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(S,1);break t}}m=f.createElement(c),Tn(m,c,o),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[Vt]=n,Ft(m),c=m}n.stateNode=c}else Tb(f,n.type,n.stateNode);else n.stateNode=wb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?Tb(f,n.type,n.stateNode):wb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&sp(n,n.memoizedProps,o.memoizedProps)}break;case 27:tr(i,n),nr(n),c&512&&(on||o===null||ws(o,o.return)),o!==null&&c&4&&sp(n,n.memoizedProps,o.memoizedProps);break;case 5:if(tr(i,n),nr(n),c&512&&(on||o===null||ws(o,o.return)),n.flags&32){f=n.stateNode;try{ne(f,"")}catch(be){yt(n,n.return,be)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,sp(n,f,o!==null?o.memoizedProps:f)),c&1024&&(op=!0);break;case 6:if(tr(i,n),nr(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(be){yt(n,n.return,be)}}break;case 3:if(bh=null,f=es,es=yh(i.containerInfo),tr(i,n),es=f,nr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{el(i.containerInfo)}catch(be){yt(n,n.return,be)}op&&(op=!1,Tv(n));break;case 4:c=es,es=yh(n.stateNode.containerInfo),tr(i,n),nr(n),es=c;break;case 12:tr(i,n),nr(n);break;case 31:tr(i,n),nr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 13:tr(i,n),nr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ih=Mt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,G=Ys,X=on;if(Ys=G||f,on=X||D,tr(i,n),on=X,Ys=G,nr(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||D||Ys||on||Ya(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(m=D.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=D.stateNode;var ee=D.memoizedProps.style,q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(be){yt(D,D.return,be)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(be){yt(D,D.return,be)}}}else if(i.tag===18){if(o===null){D=i;try{var Y=D.stateNode;f?fb(Y,!0):fb(D.stateNode,!1)}catch(be){yt(D,D.return,be)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,rh(n,o))));break;case 19:tr(i,n),nr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,rh(n,c)));break;case 30:break;case 21:break;default:tr(i,n),nr(n)}}function nr(n){var i=n.flags;if(i&2){try{for(var o,c=n.return;c!==null;){if(mv(c)){o=c;break}c=c.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,m=ip(n);nh(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(ne(x,""),o.flags&=-33);var S=ip(n);nh(n,S,x);break;case 3:case 4:var D=o.stateNode.containerInfo,G=ip(n);ap(n,G,D);break;default:throw Error(s(161))}}catch(X){yt(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Tv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Tv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ks(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vv(n,i.alternate,i),i=i.sibling}function Ya(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ji(4,i,i.return),Ya(i);break;case 1:ws(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&fv(i,i.return,o),Ya(i);break;case 27:hc(i.stateNode);case 26:case 5:ws(i,i.return),Ya(i);break;case 22:i.memoizedState===null&&Ya(i);break;case 30:Ya(i);break;default:Ya(i)}n=n.sibling}}function Xs(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,m=i,x=m.flags;switch(m.tag){case 0:case 11:case 15:Xs(f,m,o),tc(4,m);break;case 1:if(Xs(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){yt(c,c.return,G)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)ty(D[f],S)}catch(G){yt(c,c.return,G)}}o&&x&64&&dv(m),nc(m,m.return);break;case 27:gv(m);case 26:case 5:Xs(f,m,o),o&&c===null&&x&4&&pv(m),nc(m,m.return);break;case 12:Xs(f,m,o);break;case 31:Xs(f,m,o),o&&x&4&&_v(f,m);break;case 13:Xs(f,m,o),o&&x&4&&wv(f,m);break;case 22:m.memoizedState===null&&Xs(f,m,o),nc(m,m.return);break;case 30:break;default:Xs(f,m,o)}i=i.sibling}}function lp(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Hl(o))}function cp(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Hl(n))}function ts(n,i,o,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sv(n,i,o,c),i=i.sibling}function Sv(n,i,o,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ts(n,i,o,c),f&2048&&tc(9,i);break;case 1:ts(n,i,o,c);break;case 3:ts(n,i,o,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Hl(n)));break;case 12:if(f&2048){ts(n,i,o,c),n=i.stateNode;try{var m=i.memoizedProps,x=m.id,S=m.onPostCommit;typeof S=="function"&&S(x,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){yt(i,i.return,D)}}else ts(n,i,o,c);break;case 31:ts(n,i,o,c);break;case 13:ts(n,i,o,c);break;case 23:break;case 22:m=i.stateNode,x=i.alternate,i.memoizedState!==null?m._visibility&2?ts(n,i,o,c):rc(n,i):m._visibility&2?ts(n,i,o,c):(m._visibility|=2,Go(n,i,o,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&lp(x,i);break;case 24:ts(n,i,o,c),f&2048&&cp(i.alternate,i);break;default:ts(n,i,o,c)}}function Go(n,i,o,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,x=i,S=o,D=c,G=x.flags;switch(x.tag){case 0:case 11:case 15:Go(m,x,S,D,f),tc(8,x);break;case 23:break;case 22:var X=x.stateNode;x.memoizedState!==null?X._visibility&2?Go(m,x,S,D,f):rc(m,x):(X._visibility|=2,Go(m,x,S,D,f)),f&&G&2048&&lp(x.alternate,x);break;case 24:Go(m,x,S,D,f),f&&G&2048&&cp(x.alternate,x);break;default:Go(m,x,S,D,f)}i=i.sibling}}function rc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,c=i,f=c.flags;switch(c.tag){case 22:rc(o,c),f&2048&&lp(c.alternate,c);break;case 24:rc(o,c),f&2048&&cp(c.alternate,c);break;default:rc(o,c)}i=i.sibling}}var sc=8192;function qo(n,i,o){if(n.subtreeFlags&sc)for(n=n.child;n!==null;)Nv(n,i,o),n=n.sibling}function Nv(n,i,o){switch(n.tag){case 26:qo(n,i,o),n.flags&sc&&n.memoizedState!==null&&WS(o,es,n.memoizedState,n.memoizedProps);break;case 5:qo(n,i,o);break;case 3:case 4:var c=es;es=yh(n.stateNode.containerInfo),qo(n,i,o),es=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=sc,sc=16777216,qo(n,i,o),sc=c):qo(n,i,o));break;default:qo(n,i,o)}}function Cv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ic(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,Rv(c,n)}Cv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Av(n),n=n.sibling}function Av(n){switch(n.tag){case 0:case 11:case 15:ic(n),n.flags&2048&&ji(9,n,n.return);break;case 3:ic(n);break;case 12:ic(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,sh(n)):ic(n);break;default:ic(n)}}function sh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var c=i[o];yn=c,Rv(c,n)}Cv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ji(8,i,i.return),sh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,sh(i));break;default:sh(i)}n=n.sibling}}function Rv(n,i){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:ji(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,yn=c;else e:for(o=n;yn!==null;){c=yn;var f=c.sibling,m=c.return;if(bv(c),c===o){yn=null;break e}if(f!==null){f.return=m,yn=f;break e}yn=m}}}var fS={getCacheForType:function(n){var i=wn(rn),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return wn(rn).controller.signal}},pS=typeof WeakMap=="function"?WeakMap:Map,ut=0,St=null,$e=null,Ke=0,gt=0,vr=null,Oi=!1,Fo=!1,up=!1,Js=0,Kt=0,Pi=0,Qa=0,hp=0,br=0,$o=0,ac=null,rr=null,dp=!1,ih=0,kv=0,ah=1/0,oh=null,Mi=null,pn=0,Li=null,Yo=null,Ws=0,fp=0,pp=null,Iv=null,oc=0,mp=null;function xr(){return(ut&2)!==0&&Ke!==0?Ke&-Ke:Q.T!==null?_p():bo()}function Dv(){if(br===0)if((Ke&536870912)===0||tt){var n=Xn;Xn<<=1,(Xn&3932160)===0&&(Xn=262144),br=n}else br=536870912;return n=gr.current,n!==null&&(n.flags|=32),br}function sr(n,i,o){(n===St&&(gt===2||gt===9)||n.cancelPendingCommit!==null)&&(Qo(n,0),Vi(n,Ke,br,!1)),hs(n,o),((ut&2)===0||n!==St)&&(n===St&&((ut&2)===0&&(Qa|=o),Kt===4&&Vi(n,Ke,br,!1)),Es(n))}function jv(n,i,o){if((ut&6)!==0)throw Error(s(327));var c=!o&&(i&127)===0&&(i&n.expiredLanes)===0||lr(n,i),f=c?yS(n,i):yp(n,i,!0),m=c;do{if(f===0){Fo&&!c&&Vi(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!mS(o)){f=yp(n,i,!1),m=!1;continue}if(f===2){if(m=i,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;e:{var S=n;f=ac;var D=S.current.memoizedState.isDehydrated;if(D&&(Qo(S,x).flags|=256),x=yp(S,x,!1),x!==2){if(up&&!D){S.errorRecoveryDisabledLanes|=m,Qa|=m,f=4;break e}m=rr,rr=f,m!==null&&(rr===null?rr=m:rr.push.apply(rr,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Qo(n,0),Vi(n,i,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Vi(c,i,br,!Oi);break e;case 2:rr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(f=ih+300-Mt(),10<f)){if(Vi(c,i,br,!Oi),fn(c,0,!0)!==0)break e;Ws=i,c.timeoutHandle=ub(Ov.bind(null,c,o,rr,oh,dp,i,br,Qa,$o,Oi,m,"Throttled",-0,0),f);break e}Ov(c,o,rr,oh,dp,i,br,Qa,$o,Oi,m,null,-0,0)}}break}while(!0);Es(n)}function Ov(n,i,o,c,f,m,x,S,D,G,X,ee,q,Y){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qr},Nv(i,m,ee);var be=(m&62914560)===m?ih-Mt():(m&4194048)===m?kv-Mt():0;if(be=ZS(ee,be),be!==null){Ws=m,n.cancelPendingCommit=be(Hv.bind(null,n,i,m,o,c,f,x,S,D,X,ee,null,q,Y)),Vi(n,m,x,!G);return}}Hv(n,i,m,o,c,f,x,S,D)}function mS(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!pr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vi(n,i,o,c){i&=~hp,i&=~Qa,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var m=31-mt(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&Fr(n,o,i)}function lh(){return(ut&6)===0?(lc(0),!1):!0}function gp(){if($e!==null){if(gt===0)var n=$e.return;else n=$e,Bs=Ua=null,Df(n),Vo=null,ql=0,n=$e;for(;n!==null;)hv(n.alternate,n),n=n.return;$e=null}}function Qo(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,PS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ws=0,gp(),St=n,$e=o=Us(n.current,null),Ke=i,gt=0,vr=null,Oi=!1,Fo=lr(n,i),up=!1,$o=br=hp=Qa=Pi=Kt=0,rr=ac=null,dp=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-mt(c),m=1<<f;i|=n[f],c&=~m}return Js=i,Ru(),o}function Pv(n,i){He=null,Q.H=Wl,i===Lo||i===Lu?(i=J0(),gt=3):i===xf?(i=J0(),gt=4):gt=i===Qf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,vr=i,$e===null&&(Kt=1,Ju(n,jr(i,n.current)))}function Mv(){var n=gr.current;return n===null?!0:(Ke&4194048)===Ke?Lr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?n===Lr:!1}function Lv(){var n=Q.H;return Q.H=Wl,n===null?Wl:n}function Vv(){var n=Q.A;return Q.A=fS,n}function ch(){Kt=4,Oi||(Ke&4194048)!==Ke&&gr.current!==null||(Fo=!0),(Pi&134217727)===0&&(Qa&134217727)===0||St===null||Vi(St,Ke,br,!1)}function yp(n,i,o){var c=ut;ut|=2;var f=Lv(),m=Vv();(St!==n||Ke!==i)&&(oh=null,Qo(n,i)),i=!1;var x=Kt;e:do try{if(gt!==0&&$e!==null){var S=$e,D=vr;switch(gt){case 8:gp(),x=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(i=!0);var G=gt;if(gt=0,vr=null,Ko(n,S,D,G),o&&Fo){x=0;break e}break;default:G=gt,gt=0,vr=null,Ko(n,S,D,G)}}gS(),x=Kt;break}catch(X){Pv(n,X)}while(!0);return i&&n.shellSuspendCounter++,Bs=Ua=null,ut=c,Q.H=f,Q.A=m,$e===null&&(St=null,Ke=0,Ru()),x}function gS(){for(;$e!==null;)Uv($e)}function yS(n,i){var o=ut;ut|=2;var c=Lv(),f=Vv();St!==n||Ke!==i?(oh=null,ah=Mt()+500,Qo(n,i)):Fo=lr(n,i);e:do try{if(gt!==0&&$e!==null){i=$e;var m=vr;t:switch(gt){case 1:gt=0,vr=null,Ko(n,i,m,1);break;case 2:case 9:if(K0(m)){gt=0,vr=null,zv(i);break}i=function(){gt!==2&&gt!==9||St!==n||(gt=7),Es(n)},m.then(i,i);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:K0(m)?(gt=0,vr=null,zv(i)):(gt=0,vr=null,Ko(n,i,m,7));break;case 5:var x=null;switch($e.tag){case 26:x=$e.memoizedState;case 5:case 27:var S=$e;if(x?Sb(x):S.stateNode.complete){gt=0,vr=null;var D=S.sibling;if(D!==null)$e=D;else{var G=S.return;G!==null?($e=G,uh(G)):$e=null}break t}}gt=0,vr=null,Ko(n,i,m,5);break;case 6:gt=0,vr=null,Ko(n,i,m,6);break;case 8:gp(),Kt=6;break e;default:throw Error(s(462))}}vS();break}catch(X){Pv(n,X)}while(!0);return Bs=Ua=null,Q.H=c,Q.A=f,ut=o,$e!==null?0:(St=null,Ke=0,Ru(),Kt)}function vS(){for(;$e!==null&&!qr();)Uv($e)}function Uv(n){var i=cv(n.alternate,n,Js);n.memoizedProps=n.pendingProps,i===null?uh(n):$e=i}function zv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=rv(o,i,i.pendingProps,i.type,void 0,Ke);break;case 11:i=rv(o,i,i.pendingProps,i.type.render,i.ref,Ke);break;case 5:Df(i);default:hv(o,i),i=$e=V0(i,Js),i=cv(o,i,Js)}n.memoizedProps=n.pendingProps,i===null?uh(n):$e=i}function Ko(n,i,o,c){Bs=Ua=null,Df(i),Vo=null,ql=0;var f=i.return;try{if(aS(n,f,i,o,Ke)){Kt=1,Ju(n,jr(o,n.current)),$e=null;return}}catch(m){if(f!==null)throw $e=f,m;Kt=1,Ju(n,jr(o,n.current)),$e=null;return}i.flags&32768?(tt||c===1?n=!0:Fo||(Ke&536870912)!==0?n=!1:(Oi=n=!0,(c===2||c===9||c===3||c===6)&&(c=gr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Bv(i,n)):uh(i)}function uh(n){var i=n;do{if((i.flags&32768)!==0){Bv(i,Oi);return}n=i.return;var o=cS(i.alternate,i,Js);if(o!==null){$e=o;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=n}while(i!==null);Kt===0&&(Kt=5)}function Bv(n,i){do{var o=uS(n.alternate,n);if(o!==null){o.flags&=32767,$e=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){$e=n;return}$e=n=o}while(n!==null);Kt=6,$e=null}function Hv(n,i,o,c,f,m,x,S,D){n.cancelPendingCommit=null;do hh();while(pn!==0);if((ut&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=sf,Al(n,o,m,x,S,D),n===St&&($e=St=null,Ke=0),Yo=i,Li=n,Ws=o,fp=m,pp=f,Iv=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,wS(kn,function(){return Yv(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=le.p,le.p=2,x=ut,ut|=4;try{hS(n,i,o)}finally{ut=x,le.p=f,Q.T=c}}pn=1,Gv(),qv(),Fv()}}function Gv(){if(pn===1){pn=0;var n=Li,i=Yo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var c=le.p;le.p=2;var f=ut;ut|=4;try{Ev(i,n);var m=Rp,x=R0(n.containerInfo),S=m.focusedElem,D=m.selectionRange;if(x!==S&&S&&S.ownerDocument&&A0(S.ownerDocument.documentElement,S)){if(D!==null&&Zd(S)){var G=D.start,X=D.end;if(X===void 0&&(X=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(X,S.value.length);else{var ee=S.ownerDocument||document,q=ee&&ee.defaultView||window;if(q.getSelection){var Y=q.getSelection(),be=S.textContent.length,Ce=Math.min(D.start,be),Et=D.end===void 0?Ce:Math.min(D.end,be);!Y.extend&&Ce>Et&&(x=Et,Et=Ce,Ce=x);var z=C0(S,Ce),M=C0(S,Et);if(z&&M&&(Y.rangeCount!==1||Y.anchorNode!==z.node||Y.anchorOffset!==z.offset||Y.focusNode!==M.node||Y.focusOffset!==M.offset)){var H=ee.createRange();H.setStart(z.node,z.offset),Y.removeAllRanges(),Ce>Et?(Y.addRange(H),Y.extend(M.node,M.offset)):(H.setEnd(M.node,M.offset),Y.addRange(H))}}}}for(ee=[],Y=S;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var W=ee[S];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Eh=!!Ap,Rp=Ap=null}finally{ut=f,le.p=c,Q.T=o}}n.current=i,pn=2}}function qv(){if(pn===2){pn=0;var n=Li,i=Yo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var c=le.p;le.p=2;var f=ut;ut|=4;try{vv(n,i.alternate,i)}finally{ut=f,le.p=c,Q.T=o}}pn=3}}function Fv(){if(pn===4||pn===3){pn=0,ls();var n=Li,i=Yo,o=Ws,c=Iv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?pn=5:(pn=0,Yo=Li=null,$v(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Mi=null),$r(o),i=i.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Gn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Q.T,f=le.p,le.p=2,Q.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var S=c[x];m(S.value,{componentStack:S.stack})}}finally{Q.T=i,le.p=f}}(Ws&3)!==0&&hh(),Es(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===mp?oc++:(oc=0,mp=n):oc=0,lc(0)}}function $v(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Hl(i)))}function hh(){return Gv(),qv(),Fv(),Yv()}function Yv(){if(pn!==5)return!1;var n=Li,i=fp;fp=0;var o=$r(Ws),c=Q.T,f=le.p;try{le.p=32>o?32:o,Q.T=null,o=pp,pp=null;var m=Li,x=Ws;if(pn=0,Yo=Li=null,Ws=0,(ut&6)!==0)throw Error(s(331));var S=ut;if(ut|=4,Av(m.current),Sv(m,m.current,x,o),ut=S,lc(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Gn,m)}catch{}return!0}finally{le.p=f,Q.T=c,$v(n,i)}}function Qv(n,i,o){i=jr(o,i),i=Yf(n.stateNode,i,2),n=ki(n,i,2),n!==null&&(hs(n,2),Es(n))}function yt(n,i,o){if(n.tag===3)Qv(n,n,o);else for(;i!==null;){if(i.tag===3){Qv(i,n,o);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Mi===null||!Mi.has(c))){n=jr(o,n),o=Ky(2),c=ki(i,o,2),c!==null&&(Xy(o,c,i,n),hs(c,2),Es(c));break}}i=i.return}}function vp(n,i,o){var c=n.pingCache;if(c===null){c=n.pingCache=new pS;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(o)||(up=!0,f.add(o),n=bS.bind(null,n,i,o),i.then(n,n))}function bS(n,i,o){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,St===n&&(Ke&o)===o&&(Kt===4||Kt===3&&(Ke&62914560)===Ke&&300>Mt()-ih?(ut&2)===0&&Qo(n,0):hp|=o,$o===Ke&&($o=0)),Es(n)}function Kv(n,i){i===0&&(i=_a()),n=Ma(n,i),n!==null&&(hs(n,i),Es(n))}function xS(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),Kv(n,o)}function _S(n,i){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),Kv(n,o)}function wS(n,i){return Ae(n,i)}var dh=null,Xo=null,bp=!1,fh=!1,xp=!1,Ui=0;function Es(n){n!==Xo&&n.next===null&&(Xo===null?dh=Xo=n:Xo=Xo.next=n),fh=!0,bp||(bp=!0,TS())}function lc(n,i){if(!xp&&fh){xp=!0;do for(var o=!1,c=dh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-mt(42|n)+1)-1,m&=f&~(x&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Zv(c,m))}else m=Ke,m=fn(c,c===St?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||lr(c,m)||(o=!0,Zv(c,m));c=c.next}while(o);xp=!1}}function ES(){Xv()}function Xv(){fh=bp=!1;var n=0;Ui!==0&&OS()&&(n=Ui);for(var i=Mt(),o=null,c=dh;c!==null;){var f=c.next,m=Jv(c,i);m===0?(c.next=null,o===null?dh=f:o.next=f,f===null&&(Xo=o)):(o=c,(n!==0||(m&3)!==0)&&(fh=!0)),c=f}pn!==0&&pn!==5||lc(n),Ui!==0&&(Ui=0)}function Jv(n,i){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-mt(m),S=1<<x,D=f[x];D===-1?((S&o)===0||(S&c)!==0)&&(f[x]=di(S,i)):D<=i&&(n.expiredLanes|=S),m&=~S}if(i=St,o=Ke,o=fn(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===i&&(gt===2||gt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Pt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||lr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(c!==null&&Pt(c),$r(o)){case 2:case 8:o=ci;break;case 32:o=kn;break;case 268435456:o=us;break;default:o=kn}return c=Wv.bind(null,n),o=Ae(o,c),n.callbackPriority=i,n.callbackNode=o,i}return c!==null&&c!==null&&Pt(c),n.callbackPriority=2,n.callbackNode=null,2}function Wv(n,i){if(pn!==0&&pn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(hh()&&n.callbackNode!==o)return null;var c=Ke;return c=fn(n,n===St?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(jv(n,c,i),Jv(n,Mt()),n.callbackNode!=null&&n.callbackNode===o?Wv.bind(null,n):null)}function Zv(n,i){if(hh())return null;jv(n,i,!0)}function TS(){MS(function(){(ut&6)!==0?Ae(Er,ES):Xv()})}function _p(){if(Ui===0){var n=Po;n===0&&(n=In,In<<=1,(In&261888)===0&&(In=256)),Ui=n}return Ui}function eb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xo(""+n)}function tb(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function SS(n,i,o,c,f){if(i==="submit"&&o&&o.stateNode===f){var m=eb((f[qt]||null).action),x=c.submitter;x&&(i=(i=x[qt]||null)?eb(i.formAction):x.getAttribute("formAction"),i!==null&&(m=i,x=null));var S=new gs("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ui!==0){var D=x?tb(f,x):new FormData(f);Bf(o,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(S.preventDefault(),D=x?tb(f,x):new FormData(f),Bf(o,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var wp=0;wp<rf.length;wp++){var Ep=rf[wp],NS=Ep.toLowerCase(),CS=Ep[0].toUpperCase()+Ep.slice(1);Zr(NS,"on"+CS)}Zr(D0,"onAnimationEnd"),Zr(j0,"onAnimationIteration"),Zr(O0,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(GT,"onTransitionRun"),Zr(qT,"onTransitionStart"),Zr(FT,"onTransitionCancel"),Zr(P0,"onTransitionEnd"),Nr("onMouseEnter",["mouseout","mouseover"]),Nr("onMouseLeave",["mouseout","mouseover"]),Nr("onPointerEnter",["pointerout","pointerover"]),Nr("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function nb(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(i)for(var x=c.length-1;0<=x;x--){var S=c[x],D=S.instance,G=S.currentTarget;if(S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(X){Au(X)}f.currentTarget=null,m=D}else for(x=0;x<c.length;x++){if(S=c[x],D=S.instance,G=S.currentTarget,S=S.listener,D!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(X){Au(X)}f.currentTarget=null,m=D}}}}function Ye(n,i){var o=i[fi];o===void 0&&(o=i[fi]=new Set);var c=n+"__bubble";o.has(c)||(rb(i,n,2,!1),o.add(c))}function Tp(n,i,o){var c=0;i&&(c|=4),rb(o,n,c,i)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Sp(n){if(!n[ph]){n[ph]=!0,Ea.forEach(function(o){o!=="selectionchange"&&(AS.has(o)||Tp(o,!1,n),Tp(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[ph]||(i[ph]=!0,Tp("selectionchange",!1,i))}}function rb(n,i,o,c){switch(Db(i)){case 2:var f=n2;break;case 8:f=r2;break;default:f=zp}o=f.bind(null,i,o,n),f=void 0,!Aa||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,o,{capture:!0,passive:f}):n.addEventListener(i,o,!0):f!==void 0?n.addEventListener(i,o,{passive:f}):n.addEventListener(i,o,!1)}function Np(n,i,o,c,f){var m=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var S=c.stateNode.containerInfo;if(S===f)break;if(x===4)for(x=c.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;S!==null;){if(x=ur(S),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){c=m=x;continue e}S=S.parentNode}}c=c.return}xi(function(){var G=m,X=Rr(o),ee=[];e:{var q=M0.get(n);if(q!==void 0){var Y=gs,be=n;switch(n){case"keypress":if(ka(o)===0)break e;case"keydown":case"keyup":Y=Su;break;case"focusin":be="focus",Y=Da;break;case"focusout":be="blur",Y=Da;break;case"beforeblur":case"afterblur":Y=Da;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=v;break;case D0:case j0:case O0:Y=vu;break;case P0:Y=N;break;case"scroll":case"scrollend":Y=jl;break;case"wheel":Y=F;break;case"copy":case"cut":case"paste":Y=bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Vs;break;case"toggle":case"beforetoggle":Y=Be}var Ce=(i&4)!==0,Et=!Ce&&(n==="scroll"||n==="scrollend"),z=Ce?q!==null?q+"Capture":null:q;Ce=[];for(var M=G,H;M!==null;){var W=M;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||z===null||(W=Kr(M,z),W!=null&&Ce.push(uc(M,W,H))),Et)break;M=M.return}0<Ce.length&&(q=new Y(q,be,null,o,X),ee.push({event:q,listeners:Ce}))}}if((i&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",q&&o!==kl&&(be=o.relatedTarget||o.fromElement)&&(ur(be)||be[Zn]))break e;if((Y||q)&&(q=X.window===X?X:(q=X.ownerDocument)?q.defaultView||q.parentWindow:window,Y?(be=o.relatedTarget||o.toElement,Y=G,be=be?ur(be):null,be!==null&&(Et=l(be),Ce=be.tag,be!==Et||Ce!==5&&Ce!==27&&Ce!==6)&&(be=null)):(Y=null,be=G),Y!==be)){if(Ce=Ol,W="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(Ce=Vs,W="onPointerLeave",z="onPointerEnter",M="pointer"),Et=Y==null?q:Dn(Y),H=be==null?q:Dn(be),q=new Ce(W,M+"leave",Y,o,X),q.target=Et,q.relatedTarget=H,W=null,ur(X)===G&&(Ce=new Ce(z,M+"enter",be,o,X),Ce.target=H,Ce.relatedTarget=Et,W=Ce),Et=W,Y&&be)t:{for(Ce=RS,z=Y,M=be,H=0,W=z;W;W=Ce(W))H++;W=0;for(var Te=M;Te;Te=Ce(Te))W++;for(;0<H-W;)z=Ce(z),H--;for(;0<W-H;)M=Ce(M),W--;for(;H--;){if(z===M||M!==null&&z===M.alternate){Ce=z;break t}z=Ce(z),M=Ce(M)}Ce=null}else Ce=null;Y!==null&&sb(ee,q,Y,Ce,!1),be!==null&&Et!==null&&sb(ee,Et,be,Ce,!0)}}e:{if(q=G?Dn(G):window,Y=q.nodeName&&q.nodeName.toLowerCase(),Y==="select"||Y==="input"&&q.type==="file")var ot=_0;else if(b0(q))if(w0)ot=zT;else{ot=VT;var _e=LT}else Y=q.nodeName,!Y||Y.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?G&&$n(G.elementType)&&(ot=_0):ot=UT;if(ot&&(ot=ot(n,G))){x0(ee,ot,o,X);break e}_e&&_e(n,q,G),n==="focusout"&&G&&q.type==="number"&&G.memoizedProps.value!=null&&yi(q,"number",q.value)}switch(_e=G?Dn(G):window,n){case"focusin":(b0(_e)||_e.contentEditable==="true")&&(Co=_e,ef=G,Ul=null);break;case"focusout":Ul=ef=Co=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,k0(ee,o,X);break;case"selectionchange":if(HT)break;case"keydown":case"keyup":k0(ee,o,X)}var Fe;if(ct)e:{switch(n){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else No?ja(n,o)&&(Xe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(bs&&o.locale!=="ko"&&(No||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&No&&(Fe=Dl()):(ms=X,Il="value"in ms?ms.value:ms.textContent,No=!0)),_e=mh(G,Xe),0<_e.length&&(Xe=new vs(Xe,n,null,o,X),ee.push({event:Xe,listeners:_e}),Fe?Xe.data=Fe:(Fe=So(o),Fe!==null&&(Xe.data=Fe)))),(Fe=Ir?jT(n,o):OT(n,o))&&(Xe=mh(G,"onBeforeInput"),0<Xe.length&&(_e=new vs("onBeforeInput","beforeinput",null,o,X),ee.push({event:_e,listeners:Xe}),_e.data=Fe)),SS(ee,n,G,o,X)}nb(ee,i)})}function uc(n,i,o){return{instance:n,listener:i,currentTarget:o}}function mh(n,i){for(var o=i+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Kr(n,o),f!=null&&c.unshift(uc(n,f,m)),f=Kr(n,i),f!=null&&c.push(uc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function RS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function sb(n,i,o,c,f){for(var m=i._reactName,x=[];o!==null&&o!==c;){var S=o,D=S.alternate,G=S.stateNode;if(S=S.tag,D!==null&&D===c)break;S!==5&&S!==26&&S!==27||G===null||(D=G,f?(G=Kr(o,m),G!=null&&x.unshift(uc(o,G,D))):f||(G=Kr(o,m),G!=null&&x.push(uc(o,G,D)))),o=o.return}x.length!==0&&n.push({event:i,listeners:x})}var kS=/\r\n?/g,IS=/\u0000|\uFFFD/g;function ib(n){return(typeof n=="string"?n:""+n).replace(kS,`
`).replace(IS,"")}function ab(n,i){return i=ib(i),ib(n)===i}function wt(n,i,o,c,f,m){switch(o){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||ne(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&ne(n,""+c);break;case"className":$t(n,"class",c);break;case"tabIndex":$t(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$t(n,o,c);break;case"style":Nt(n,c,m);break;case"data":if(i!=="object"){$t(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=xo(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&wt(n,i,"name",f.name,f,null),wt(n,i,"formEncType",f.formEncType,f,null),wt(n,i,"formMethod",f.formMethod,f,null),wt(n,i,"formTarget",f.formTarget,f,null)):(wt(n,i,"encType",f.encType,f,null),wt(n,i,"method",f.method,f,null),wt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=xo(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Qr);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=xo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),mi(n,"popover",c);break;case"xlinkActuate":Tt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Tt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Tt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Tt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Tt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Tt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Tt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Tt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Tt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":mi(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=mu.get(o)||o,mi(n,o,c))}}function Cp(n,i,o,c,f,m){switch(o){case"style":Nt(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof c=="string"?ne(n,c):(typeof c=="number"||typeof c=="bigint")&&ne(n,""+c);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Qr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pi.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=n[qt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):mi(n,o,c)}}}function Tn(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:wt(n,i,m,x,o,null)}}f&&wt(n,i,"srcSet",o.srcSet,o,null),c&&wt(n,i,"src",o.src,o,null);return;case"input":Ye("invalid",n);var S=m=x=f=null,D=null,G=null;for(c in o)if(o.hasOwnProperty(c)){var X=o[c];if(X!=null)switch(c){case"name":f=X;break;case"type":x=X;break;case"checked":D=X;break;case"defaultChecked":G=X;break;case"value":m=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:wt(n,i,c,X,o,null)}}Na(n,m,S,D,G,x,f,!1);return;case"select":Ye("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":x=S;break;case"multiple":c=S;default:wt(n,i,f,S,o,null)}i=m,o=x,n.multiple=!!c,i!=null?E(n,!!c,i,!1):o!=null&&E(n,!!c,o,!0);return;case"textarea":Ye("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(S=o[x],S!=null))switch(x){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:wt(n,i,x,S,o,null)}U(n,c,f,m);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:wt(n,i,D,c,o,null)}return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(c=0;c<cc.length;c++)Ye(cc[c],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in o)if(o.hasOwnProperty(G)&&(c=o[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:wt(n,i,G,c,o,null)}return;default:if($n(i)){for(X in o)o.hasOwnProperty(X)&&(c=o[X],c!==void 0&&Cp(n,i,X,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&wt(n,i,S,c,o,null))}function DS(n,i,o,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,S=null,D=null,G=null,X=null;for(Y in o){var ee=o[Y];if(o.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=ee;default:c.hasOwnProperty(Y)||wt(n,i,Y,null,c,ee)}}for(var q in c){var Y=c[q];if(ee=o[q],c.hasOwnProperty(q)&&(Y!=null||ee!=null))switch(q){case"type":m=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":X=Y;break;case"value":x=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:Y!==ee&&wt(n,i,q,Y,c,ee)}}gi(n,x,S,D,G,X,m,f);return;case"select":Y=x=S=q=null;for(m in o)if(D=o[m],o.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:c.hasOwnProperty(m)||wt(n,i,m,null,c,D)}for(f in c)if(m=c[f],D=o[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":q=m;break;case"defaultValue":S=m;break;case"multiple":x=m;default:m!==D&&wt(n,i,f,m,c,D)}i=S,o=x,c=Y,q!=null?E(n,!!o,q,!1):!!c!=!!o&&(i!=null?E(n,!!o,i,!0):E(n,!!o,o?[]:"",!1));return;case"textarea":Y=q=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:wt(n,i,S,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":q=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&wt(n,i,x,f,c,m)}J(n,q,Y);return;case"option":for(var be in o)if(q=o[be],o.hasOwnProperty(be)&&q!=null&&!c.hasOwnProperty(be))switch(be){case"selected":n.selected=!1;break;default:wt(n,i,be,null,c,q)}for(D in c)if(q=c[D],Y=o[D],c.hasOwnProperty(D)&&q!==Y&&(q!=null||Y!=null))switch(D){case"selected":n.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:wt(n,i,D,q,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in o)q=o[Ce],o.hasOwnProperty(Ce)&&q!=null&&!c.hasOwnProperty(Ce)&&wt(n,i,Ce,null,c,q);for(G in c)if(q=c[G],Y=o[G],c.hasOwnProperty(G)&&q!==Y&&(q!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:wt(n,i,G,q,c,Y)}return;default:if($n(i)){for(var Et in o)q=o[Et],o.hasOwnProperty(Et)&&q!==void 0&&!c.hasOwnProperty(Et)&&Cp(n,i,Et,void 0,c,q);for(X in c)q=c[X],Y=o[X],!c.hasOwnProperty(X)||q===Y||q===void 0&&Y===void 0||Cp(n,i,X,q,c,Y);return}}for(var z in o)q=o[z],o.hasOwnProperty(z)&&q!=null&&!c.hasOwnProperty(z)&&wt(n,i,z,null,c,q);for(ee in c)q=c[ee],Y=o[ee],!c.hasOwnProperty(ee)||q===Y||q==null&&Y==null||wt(n,i,ee,q,c,Y)}function ob(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,S=f.duration;if(m&&S&&ob(x)){for(x=0,S=f.responseEnd,c+=1;c<o.length;c++){var D=o[c],G=D.startTime;if(G>S)break;var X=D.transferSize,ee=D.initiatorType;X&&ob(ee)&&(D=D.responseEnd,x+=X*(D<S?1:(S-G)/(D-G)))}if(--c,i+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ap=null,Rp=null;function gh(n){return n.nodeType===9?n:n.ownerDocument}function lb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cb(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function kp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ip=null;function OS(){var n=window.event;return n&&n.type==="popstate"?n===Ip?!1:(Ip=n,!0):(Ip=null,!1)}var ub=typeof setTimeout=="function"?setTimeout:void 0,PS=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(n){return hb.resolve(null).then(n).catch(LS)}:ub;function LS(n){setTimeout(function(){throw n})}function zi(n){return n==="head"}function db(n,i){var o=i,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),el(i);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")hc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,hc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,S=m.nodeName;m[Tr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&hc(n.ownerDocument.body);o=f}while(o);el(i)}function fb(n,i){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Dp(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dp(o),Ps(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function VS(n,i,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Tr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Vr(n.nextSibling),n===null)break}return null}function US(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Vr(n.nextSibling),n===null))return null;return n}function pb(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Vr(n.nextSibling),n===null))return null;return n}function jp(n){return n.data==="$?"||n.data==="$~"}function Op(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function zS(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var c=function(){i(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Vr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Pp=null;function mb(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Vr(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function gb(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function yb(n,i,o){switch(i=gh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function hc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ps(n)}var Ur=new Map,vb=new Set;function yh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zs=le.d;le.d={f:BS,r:HS,D:GS,C:qS,L:FS,m:$S,X:QS,S:YS,M:KS};function BS(){var n=Zs.f(),i=lh();return n||i}function HS(n){var i=Fn(n);i!==null&&i.tag===5&&i.type==="form"?Py(i):Zs.r(n)}var Jo=typeof document>"u"?null:document;function bb(n,i,o){var c=Jo;if(c&&typeof i=="string"&&i){var f=jn(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),vb.has(f)||(vb.add(f),n={rel:n,crossOrigin:o,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Tn(i,"link",n),Ft(i),c.head.appendChild(i)))}}function GS(n){Zs.D(n),bb("dns-prefetch",n,null)}function qS(n,i){Zs.C(n,i),bb("preconnect",n,i)}function FS(n,i,o){Zs.L(n,i,o);var c=Jo;if(c&&n&&i){var f='link[rel="preload"][as="'+jn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+jn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+jn(o.imageSizes)+'"]')):f+='[href="'+jn(n)+'"]';var m=f;switch(i){case"style":m=Wo(n);break;case"script":m=Zo(n)}Ur.has(m)||(n=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Ur.set(m,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(dc(m))||i==="script"&&c.querySelector(fc(m))||(i=c.createElement("link"),Tn(i,"link",n),Ft(i),c.head.appendChild(i)))}}function $S(n,i){Zs.m(n,i);var o=Jo;if(o&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+jn(c)+'"][href="'+jn(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zo(n)}if(!Ur.has(m)&&(n=_({rel:"modulepreload",href:n},i),Ur.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(fc(m)))return}c=o.createElement("link"),Tn(c,"link",n),Ft(c),o.head.appendChild(c)}}}function YS(n,i,o){Zs.S(n,i,o);var c=Jo;if(c&&n){var f=hr(c).hoistableStyles,m=Wo(n);i=i||"default";var x=f.get(m);if(!x){var S={loading:0,preload:null};if(x=c.querySelector(dc(m)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Ur.get(m))&&Mp(n,o);var D=x=c.createElement("link");Ft(D),Tn(D,"link",n),D._p=new Promise(function(G,X){D.onload=G,D.onerror=X}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,vh(x,i,c)}x={type:"stylesheet",instance:x,count:1,state:S},f.set(m,x)}}}function QS(n,i){Zs.X(n,i);var o=Jo;if(o&&n){var c=hr(o).hoistableScripts,f=Zo(n),m=c.get(f);m||(m=o.querySelector(fc(f)),m||(n=_({src:n,async:!0},i),(i=Ur.get(f))&&Lp(n,i),m=o.createElement("script"),Ft(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function KS(n,i){Zs.M(n,i);var o=Jo;if(o&&n){var c=hr(o).hoistableScripts,f=Zo(n),m=c.get(f);m||(m=o.querySelector(fc(f)),m||(n=_({src:n,async:!0,type:"module"},i),(i=Ur.get(f))&&Lp(n,i),m=o.createElement("script"),Ft(m),Tn(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function xb(n,i,o,c){var f=(f=je.current)?yh(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Wo(o.href),o=hr(f).hoistableStyles,c=o.get(i),c||(c={type:"style",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Wo(o.href);var m=hr(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(dc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Ur.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Ur.set(n,o),m||XS(f,n,o,x.state))),i&&c===null)throw Error(s(528,""));return x}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Zo(o),o=hr(f).hoistableScripts,c=o.get(i),c||(c={type:"script",instance:null,count:0,state:null},o.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Wo(n){return'href="'+jn(n)+'"'}function dc(n){return'link[rel="stylesheet"]['+n+"]"}function _b(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function XS(n,i,o,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Tn(i,"link",o),Ft(i),n.head.appendChild(i))}function Zo(n){return'[src="'+jn(n)+'"]'}function fc(n){return"script[async]"+n}function wb(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+jn(o.href)+'"]');if(c)return i.instance=c,Ft(c),c;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ft(c),Tn(c,"style",f),vh(c,o.precedence,n),i.instance=c;case"stylesheet":f=Wo(o.href);var m=n.querySelector(dc(f));if(m)return i.state.loading|=4,i.instance=m,Ft(m),m;c=_b(o),(f=Ur.get(f))&&Mp(c,f),m=(n.ownerDocument||n).createElement("link"),Ft(m);var x=m;return x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),i.state.loading|=4,vh(m,o.precedence,n),i.instance=m;case"script":return m=Zo(o.src),(f=n.querySelector(fc(m)))?(i.instance=f,Ft(f),f):(c=o,(f=Ur.get(m))&&(c=_({},o),Lp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ft(f),Tn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,vh(c,o.precedence,n));return i.instance}function vh(n,i,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var S=c[x];if(S.dataset.precedence===i)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Mp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Lp(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var bh=null;function Eb(n,i,o){if(bh===null){var c=new Map,f=bh=new Map;f.set(o,c)}else f=bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Tr]||m[Vt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(i)||"";x=n+x;var S=c.get(x);S?S.push(m):c.set(x,[m])}}return c}function Tb(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function JS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Sb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function WS(n,i,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Wo(c.href),m=i.querySelector(dc(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=xh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,Ft(m);return}m=i.ownerDocument||i,c=_b(c),(f=Ur.get(f))&&Mp(c,f),m=m.createElement("link"),Ft(m);var x=m;x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),Tn(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=xh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Vp=0;function ZS(n,i){return n.stylesheets&&n.count===0&&wh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&Vp===0&&(Vp=62500*jS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&wh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Vp?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _h=null;function wh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_h=new Map,i.forEach(e2,n),_h=null,xh.call(n))}function e2(n,i){if(!(i.state.loading&4)){var o=_h.get(n);if(o)var c=o.get(null);else{o=new Map,_h.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=i.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=xh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var pc={$$typeof:pe,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function t2(n,i,o,c,f,m,x,S,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Nb(n,i,o,c,f,m,x,S,D,G,X,ee){return n=new t2(n,i,o,x,D,G,X,ee,S),i=1,m===!0&&(i|=24),m=mr(3,null,null,i),n.current=m,m.stateNode=n,i=yf(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:i},_f(m),n}function Cb(n){return n?(n=ko,n):ko}function Ab(n,i,o,c,f,m){f=Cb(f),c.context===null?c.context=f:c.pendingContext=f,c=Ri(i),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ki(n,c,i),o!==null&&(sr(o,n,i),$l(o,n,i))}function Rb(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function Up(n,i){Rb(n,i),(n=n.alternate)&&Rb(n,i)}function kb(n){if(n.tag===13||n.tag===31){var i=Ma(n,67108864);i!==null&&sr(i,n,67108864),Up(n,67108864)}}function Ib(n){if(n.tag===13||n.tag===31){var i=xr();i=ve(i);var o=Ma(n,i);o!==null&&sr(o,n,i),Up(n,i)}}var Eh=!0;function n2(n,i,o,c){var f=Q.T;Q.T=null;var m=le.p;try{le.p=2,zp(n,i,o,c)}finally{le.p=m,Q.T=f}}function r2(n,i,o,c){var f=Q.T;Q.T=null;var m=le.p;try{le.p=8,zp(n,i,o,c)}finally{le.p=m,Q.T=f}}function zp(n,i,o,c){if(Eh){var f=Bp(c);if(f===null)Np(n,i,c,Th,o),jb(n,c);else if(i2(f,n,i,o,c))c.stopPropagation();else if(jb(n,c),i&4&&-1<s2.indexOf(n)){for(;f!==null;){var m=Fn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=qn(m.pendingLanes);if(x!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var D=1<<31-mt(x);S.entanglements[1]|=D,x&=~D}Es(m),(ut&6)===0&&(ah=Mt()+500,lc(0))}}break;case 31:case 13:S=Ma(m,2),S!==null&&sr(S,m,2),lh(),Up(m,2)}if(m=Bp(c),m===null&&Np(n,i,c,Th,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Np(n,i,c,null,o)}}function Bp(n){return n=Rr(n),Hp(n)}var Th=null;function Hp(n){if(Th=null,n=ur(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=u(i),n!==null)return n;n=null}else if(o===31){if(n=p(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Th=n,null}function Db(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cs()){case Er:return 2;case ci:return 8;case kn:case ui:return 32;case us:return 268435456;default:return 32}default:return 32}}var Gp=!1,Bi=null,Hi=null,Gi=null,mc=new Map,gc=new Map,qi=[],s2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jb(n,i){switch(n){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":mc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(i.pointerId)}}function yc(n,i,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},i!==null&&(i=Fn(i),i!==null&&kb(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function i2(n,i,o,c,f){switch(i){case"focusin":return Bi=yc(Bi,n,i,o,c,f),!0;case"dragenter":return Hi=yc(Hi,n,i,o,c,f),!0;case"mouseover":return Gi=yc(Gi,n,i,o,c,f),!0;case"pointerover":var m=f.pointerId;return mc.set(m,yc(mc.get(m)||null,n,i,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,gc.set(m,yc(gc.get(m)||null,n,i,o,c,f)),!0}return!1}function Ob(n){var i=ur(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=u(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){Ib(o)});return}}else if(i===31){if(i=p(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){Ib(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Bp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);kl=c,o.target.dispatchEvent(c),kl=null}else return i=Fn(o),i!==null&&kb(i),n.blockedOn=o,!1;i.shift()}return!0}function Pb(n,i,o){Sh(n)&&o.delete(i)}function a2(){Gp=!1,Bi!==null&&Sh(Bi)&&(Bi=null),Hi!==null&&Sh(Hi)&&(Hi=null),Gi!==null&&Sh(Gi)&&(Gi=null),mc.forEach(Pb),gc.forEach(Pb)}function Nh(n,i){n.blockedOn===i&&(n.blockedOn=null,Gp||(Gp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,a2)))}var Ch=null;function Mb(n){Ch!==n&&(Ch=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===n&&(Ch=null);for(var i=0;i<n.length;i+=3){var o=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Hp(c||o)===null)continue;break}var m=Fn(o);m!==null&&(n.splice(i,3),i-=3,Bf(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function el(n){function i(D){return Nh(D,n)}Bi!==null&&Nh(Bi,n),Hi!==null&&Nh(Hi,n),Gi!==null&&Nh(Gi,n),mc.forEach(i),gc.forEach(i);for(var o=0;o<qi.length;o++){var c=qi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<qi.length&&(o=qi[0],o.blockedOn===null);)Ob(o),o.blockedOn===null&&qi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[qt]||null;if(typeof m=="function")x||Mb(o);else if(x){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[qt]||null)S=x.formAction;else if(Hp(f)!==null)continue}else S=x.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Mb(o)}}}function Lb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function qp(n){this._internalRoot=n}Ah.prototype.render=qp.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,c=xr();Ab(o,c,n,i,null,null)},Ah.prototype.unmount=qp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ab(n.current,2,null,n,null,null),lh(),i[Zn]=null}};function Ah(n){this._internalRoot=n}Ah.prototype.unstable_scheduleHydration=function(n){if(n){var i=bo();n={blockedOn:null,target:n,priority:i};for(var o=0;o<qi.length&&i!==0&&i<qi[o].priority;o++);qi.splice(o,0,n),o===0&&Ob(n)}};var Vb=e.version;if(Vb!=="19.2.4")throw Error(s(527,Vb,"19.2.4"));le.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=y(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var o2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{Gn=Rh.inject(o2),nn=Rh}catch{}}return xc.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,c="",f=Fy,m=$y,x=Yy;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=Nb(n,1,!1,null,null,o,c,null,f,m,x,Lb),n[Zn]=i.current,Sp(n),new qp(i)},xc.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var c=!1,f="",m=Fy,x=$y,S=Yy,D=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=Nb(n,1,!0,i,o??null,c,f,D,m,x,S,Lb),i.context=Cb(null),o=i.current,c=xr(),c=ve(c),f=Ri(c),f.callback=null,ki(o,f,c),o=c,i.current.lanes=o,hs(i,o),Es(i),n[Zn]=i.current,Sp(n),new Ah(i)},xc.version="19.2.4",xc}var Qb;function x2(){if(Qb)return Yp.exports;Qb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Yp.exports=b2(),Yp.exports}var _2=x2();const w2=Nd(_2);var tl={},Jp={exports:{}},Wp,Kb;function E2(){if(Kb)return Wp;Kb=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Wp=r,Wp}var Zp,Xb;function T2(){if(Xb)return Zp;Xb=1;var r=E2();function e(){}function t(){}return t.resetWarningCache=e,Zp=function(){function s(u,p,g,y,b,_){if(_!==r){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Zp}var Jb;function s1(){return Jb||(Jb=1,Jp.exports=T2()()),Jp.exports}var em,Wb;function i1(){return Wb||(Wb=1,em={L:1,M:0,Q:3,H:2}),em}var tm,Zb;function a1(){return Zb||(Zb=1,tm={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}),tm}var nm,ex;function S2(){if(ex)return nm;ex=1;var r=a1();function e(t){this.mode=r.MODE_8BIT_BYTE,this.data=t}return e.prototype={getLength:function(t){return this.data.length},write:function(t){for(var s=0;s<this.data.length;s++)t.put(this.data.charCodeAt(s),8)}},nm=e,nm}var rm,tx;function N2(){if(tx)return rm;tx=1;var r=i1();function e(t,s){this.totalCount=t,this.dataCount=s}return e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(t,s){var a=e.getRsBlockTable(t,s);if(a==null)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+s);for(var l=a.length/3,u=new Array,p=0;p<l;p++)for(var g=a[p*3+0],y=a[p*3+1],b=a[p*3+2],_=0;_<g;_++)u.push(new e(y,b));return u},e.getRsBlockTable=function(t,s){switch(s){case r.L:return e.RS_BLOCK_TABLE[(t-1)*4+0];case r.M:return e.RS_BLOCK_TABLE[(t-1)*4+1];case r.Q:return e.RS_BLOCK_TABLE[(t-1)*4+2];case r.H:return e.RS_BLOCK_TABLE[(t-1)*4+3];default:return}},rm=e,rm}var sm,nx;function C2(){if(nx)return sm;nx=1;function r(){this.buffer=new Array,this.length=0}return r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},sm=r,sm}var im,rx;function o1(){if(rx)return im;rx=1;for(var r={glog:function(t){if(t<1)throw new Error("glog("+t+")");return r.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return r.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},e=0;e<8;e++)r.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)r.EXP_TABLE[e]=r.EXP_TABLE[e-4]^r.EXP_TABLE[e-5]^r.EXP_TABLE[e-6]^r.EXP_TABLE[e-8];for(var e=0;e<255;e++)r.LOG_TABLE[r.EXP_TABLE[e]]=e;return im=r,im}var am,sx;function l1(){if(sx)return am;sx=1;var r=o1();function e(t,s){if(t.length==null)throw new Error(t.length+"/"+s);for(var a=0;a<t.length&&t[a]==0;)a++;this.num=new Array(t.length-a+s);for(var l=0;l<t.length-a;l++)this.num[l]=t[l+a]}return e.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var s=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var l=0;l<t.getLength();l++)s[a+l]^=r.gexp(r.glog(this.get(a))+r.glog(t.get(l)));return new e(s,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var s=r.glog(this.get(0))-r.glog(t.get(0)),a=new Array(this.getLength()),l=0;l<this.getLength();l++)a[l]=this.get(l);for(var l=0;l<t.getLength();l++)a[l]^=r.gexp(r.glog(t.get(l))+s);return new e(a,0).mod(t)}},am=e,am}var om,ix;function A2(){if(ix)return om;ix=1;var r=a1(),e=l1(),t=o1(),s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(l){for(var u=l<<10;a.getBCHDigit(u)-a.getBCHDigit(a.G15)>=0;)u^=a.G15<<a.getBCHDigit(u)-a.getBCHDigit(a.G15);return(l<<10|u)^a.G15_MASK},getBCHTypeNumber:function(l){for(var u=l<<12;a.getBCHDigit(u)-a.getBCHDigit(a.G18)>=0;)u^=a.G18<<a.getBCHDigit(u)-a.getBCHDigit(a.G18);return l<<12|u},getBCHDigit:function(l){for(var u=0;l!=0;)u++,l>>>=1;return u},getPatternPosition:function(l){return a.PATTERN_POSITION_TABLE[l-1]},getMask:function(l,u,p){switch(l){case s.PATTERN000:return(u+p)%2==0;case s.PATTERN001:return u%2==0;case s.PATTERN010:return p%3==0;case s.PATTERN011:return(u+p)%3==0;case s.PATTERN100:return(Math.floor(u/2)+Math.floor(p/3))%2==0;case s.PATTERN101:return u*p%2+u*p%3==0;case s.PATTERN110:return(u*p%2+u*p%3)%2==0;case s.PATTERN111:return(u*p%3+(u+p)%2)%2==0;default:throw new Error("bad maskPattern:"+l)}},getErrorCorrectPolynomial:function(l){for(var u=new e([1],0),p=0;p<l;p++)u=u.multiply(new e([1,t.gexp(p)],0));return u},getLengthInBits:function(l,u){if(1<=u&&u<10)switch(l){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:return 8;case r.MODE_KANJI:return 8;default:throw new Error("mode:"+l)}else if(u<27)switch(l){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+l)}else if(u<41)switch(l){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+l)}else throw new Error("type:"+u)},getLostPoint:function(l){for(var u=l.getModuleCount(),p=0,g=0;g<u;g++)for(var y=0;y<u;y++){for(var b=0,_=l.isDark(g,y),T=-1;T<=1;T++)if(!(g+T<0||u<=g+T))for(var k=-1;k<=1;k++)y+k<0||u<=y+k||T==0&&k==0||_==l.isDark(g+T,y+k)&&b++;b>5&&(p+=3+b-5)}for(var g=0;g<u-1;g++)for(var y=0;y<u-1;y++){var V=0;l.isDark(g,y)&&V++,l.isDark(g+1,y)&&V++,l.isDark(g,y+1)&&V++,l.isDark(g+1,y+1)&&V++,(V==0||V==4)&&(p+=3)}for(var g=0;g<u;g++)for(var y=0;y<u-6;y++)l.isDark(g,y)&&!l.isDark(g,y+1)&&l.isDark(g,y+2)&&l.isDark(g,y+3)&&l.isDark(g,y+4)&&!l.isDark(g,y+5)&&l.isDark(g,y+6)&&(p+=40);for(var y=0;y<u;y++)for(var g=0;g<u-6;g++)l.isDark(g,y)&&!l.isDark(g+1,y)&&l.isDark(g+2,y)&&l.isDark(g+3,y)&&l.isDark(g+4,y)&&!l.isDark(g+5,y)&&l.isDark(g+6,y)&&(p+=40);for(var $=0,y=0;y<u;y++)for(var g=0;g<u;g++)l.isDark(g,y)&&$++;var Z=Math.abs(100*$/u/u-50)/5;return p+=Z*10,p}};return om=a,om}var lm,ax;function R2(){if(ax)return lm;ax=1;var r=S2(),e=N2(),t=C2(),s=A2(),a=l1();function l(p,g){this.typeNumber=p,this.errorCorrectLevel=g,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var u=l.prototype;return u.addData=function(p){var g=new r(p);this.dataList.push(g),this.dataCache=null},u.isDark=function(p,g){if(p<0||this.moduleCount<=p||g<0||this.moduleCount<=g)throw new Error(p+","+g);return this.modules[p][g]},u.getModuleCount=function(){return this.moduleCount},u.make=function(){if(this.typeNumber<1){var p=1;for(p=1;p<40;p++){for(var g=e.getRSBlocks(p,this.errorCorrectLevel),y=new t,b=0,_=0;_<g.length;_++)b+=g[_].dataCount;for(var _=0;_<this.dataList.length;_++){var T=this.dataList[_];y.put(T.mode,4),y.put(T.getLength(),s.getLengthInBits(T.mode,p)),T.write(y)}if(y.getLengthInBits()<=b*8)break}this.typeNumber=p}this.makeImpl(!1,this.getBestMaskPattern())},u.makeImpl=function(p,g){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var y=0;y<this.moduleCount;y++){this.modules[y]=new Array(this.moduleCount);for(var b=0;b<this.moduleCount;b++)this.modules[y][b]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(p,g),this.typeNumber>=7&&this.setupTypeNumber(p),this.dataCache==null&&(this.dataCache=l.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,g)},u.setupPositionProbePattern=function(p,g){for(var y=-1;y<=7;y++)if(!(p+y<=-1||this.moduleCount<=p+y))for(var b=-1;b<=7;b++)g+b<=-1||this.moduleCount<=g+b||(0<=y&&y<=6&&(b==0||b==6)||0<=b&&b<=6&&(y==0||y==6)||2<=y&&y<=4&&2<=b&&b<=4?this.modules[p+y][g+b]=!0:this.modules[p+y][g+b]=!1)},u.getBestMaskPattern=function(){for(var p=0,g=0,y=0;y<8;y++){this.makeImpl(!0,y);var b=s.getLostPoint(this);(y==0||p>b)&&(p=b,g=y)}return g},u.createMovieClip=function(p,g,y){var b=p.createEmptyMovieClip(g,y),_=1;this.make();for(var T=0;T<this.modules.length;T++)for(var k=T*_,V=0;V<this.modules[T].length;V++){var $=V*_,Z=this.modules[T][V];Z&&(b.beginFill(0,100),b.moveTo($,k),b.lineTo($+_,k),b.lineTo($+_,k+_),b.lineTo($,k+_),b.endFill())}return b},u.setupTimingPattern=function(){for(var p=8;p<this.moduleCount-8;p++)this.modules[p][6]==null&&(this.modules[p][6]=p%2==0);for(var g=8;g<this.moduleCount-8;g++)this.modules[6][g]==null&&(this.modules[6][g]=g%2==0)},u.setupPositionAdjustPattern=function(){for(var p=s.getPatternPosition(this.typeNumber),g=0;g<p.length;g++)for(var y=0;y<p.length;y++){var b=p[g],_=p[y];if(this.modules[b][_]==null)for(var T=-2;T<=2;T++)for(var k=-2;k<=2;k++)T==-2||T==2||k==-2||k==2||T==0&&k==0?this.modules[b+T][_+k]=!0:this.modules[b+T][_+k]=!1}},u.setupTypeNumber=function(p){for(var g=s.getBCHTypeNumber(this.typeNumber),y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[Math.floor(y/3)][y%3+this.moduleCount-8-3]=b}for(var y=0;y<18;y++){var b=!p&&(g>>y&1)==1;this.modules[y%3+this.moduleCount-8-3][Math.floor(y/3)]=b}},u.setupTypeInfo=function(p,g){for(var y=this.errorCorrectLevel<<3|g,b=s.getBCHTypeInfo(y),_=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<6?this.modules[_][8]=T:_<8?this.modules[_+1][8]=T:this.modules[this.moduleCount-15+_][8]=T}for(var _=0;_<15;_++){var T=!p&&(b>>_&1)==1;_<8?this.modules[8][this.moduleCount-_-1]=T:_<9?this.modules[8][15-_-1+1]=T:this.modules[8][15-_-1]=T}this.modules[this.moduleCount-8][8]=!p},u.mapData=function(p,g){for(var y=-1,b=this.moduleCount-1,_=7,T=0,k=this.moduleCount-1;k>0;k-=2)for(k==6&&k--;;){for(var V=0;V<2;V++)if(this.modules[b][k-V]==null){var $=!1;T<p.length&&($=(p[T]>>>_&1)==1);var Z=s.getMask(g,b,k-V);Z&&($=!$),this.modules[b][k-V]=$,_--,_==-1&&(T++,_=7)}if(b+=y,b<0||this.moduleCount<=b){b-=y,y=-y;break}}},l.PAD0=236,l.PAD1=17,l.createData=function(p,g,y){for(var b=e.getRSBlocks(p,g),_=new t,T=0;T<y.length;T++){var k=y[T];_.put(k.mode,4),_.put(k.getLength(),s.getLengthInBits(k.mode,p)),k.write(_)}for(var V=0,T=0;T<b.length;T++)V+=b[T].dataCount;if(_.getLengthInBits()>V*8)throw new Error("code length overflow. ("+_.getLengthInBits()+">"+V*8+")");for(_.getLengthInBits()+4<=V*8&&_.put(0,4);_.getLengthInBits()%8!=0;)_.putBit(!1);for(;!(_.getLengthInBits()>=V*8||(_.put(l.PAD0,8),_.getLengthInBits()>=V*8));)_.put(l.PAD1,8);return l.createBytes(_,b)},l.createBytes=function(p,g){for(var y=0,b=0,_=0,T=new Array(g.length),k=new Array(g.length),V=0;V<g.length;V++){var $=g[V].dataCount,Z=g[V].totalCount-$;b=Math.max(b,$),_=Math.max(_,Z),T[V]=new Array($);for(var ae=0;ae<T[V].length;ae++)T[V][ae]=255&p.buffer[ae+y];y+=$;var he=s.getErrorCorrectPolynomial(Z),pe=new a(T[V],he.getLength()-1),ye=pe.mod(he);k[V]=new Array(he.getLength()-1);for(var ae=0;ae<k[V].length;ae++){var De=ae+ye.getLength()-k[V].length;k[V][ae]=De>=0?ye.get(De):0}}for(var Ee=0,ae=0;ae<g.length;ae++)Ee+=g[ae].totalCount;for(var A=new Array(Ee),C=0,ae=0;ae<b;ae++)for(var V=0;V<g.length;V++)ae<T[V].length&&(A[C++]=T[V][ae]);for(var ae=0;ae<_;ae++)for(var V=0;V<g.length;V++)ae<k[V].length&&(A[C++]=k[V][ae]);return A},lm=l,lm}var kh={},ox;function k2(){if(ox)return kh;ox=1,Object.defineProperty(kh,"__esModule",{value:!0});var r=Object.assign||function(y){for(var b=1;b<arguments.length;b++){var _=arguments[b];for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(y[T]=_[T])}return y},e=s1(),t=l(e),s=Zc(),a=l(s);function l(y){return y&&y.__esModule?y:{default:y}}function u(y,b){var _={};for(var T in y)b.indexOf(T)>=0||Object.prototype.hasOwnProperty.call(y,T)&&(_[T]=y[T]);return _}var p={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},g=(0,s.forwardRef)(function(y,b){var _=y.bgColor,T=y.bgD,k=y.fgD,V=y.fgColor,$=y.size,Z=y.title,ae=y.viewBoxSize,he=y.xmlns,pe=he===void 0?"http://www.w3.org/2000/svg":he,ye=u(y,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",r({},ye,{height:$,ref:b,viewBox:"0 0 "+ae+" "+ae,width:$,xmlns:pe}),Z?a.default.createElement("title",null,Z):null,a.default.createElement("path",{d:T,fill:_}),a.default.createElement("path",{d:k,fill:V}))});return g.displayName="QRCodeSvg",g.propTypes=p,kh.default=g,kh}var lx;function I2(){if(lx)return tl;lx=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.QRCode=void 0;var r=Object.assign||function($){for(var Z=1;Z<arguments.length;Z++){var ae=arguments[Z];for(var he in ae)Object.prototype.hasOwnProperty.call(ae,he)&&($[he]=ae[he])}return $},e=s1(),t=_(e),s=i1(),a=_(s),l=R2(),u=_(l),p=Zc(),g=_(p),y=k2(),b=_(y);function _($){return $&&$.__esModule?$:{default:$}}function T($,Z){var ae={};for(var he in $)Z.indexOf(he)>=0||Object.prototype.hasOwnProperty.call($,he)&&(ae[he]=$[he]);return ae}var k={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},V=(0,p.forwardRef)(function($,Z){var ae=$.bgColor,he=ae===void 0?"#FFFFFF":ae,pe=$.fgColor,ye=pe===void 0?"#000000":pe,De=$.level,Ee=De===void 0?"L":De,A=$.size,C=A===void 0?256:A,R=$.value,L=T($,["bgColor","fgColor","level","size","value"]),j=new u.default(-1,a.default[Ee]);j.addData(R),j.make();var O=j.modules;return g.default.createElement(b.default,r({},L,{bgColor:he,bgD:O.map(function(I,rt){return I.map(function(bt,Q){return bt?"":"M "+Q+" "+rt+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ye,fgD:O.map(function(I,rt){return I.map(function(bt,Q){return bt?"M "+Q+" "+rt+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:Z,size:C,viewBoxSize:O.length}))});return tl.QRCode=V,V.displayName="QRCode",V.propTypes=k,tl.default=V,tl}var D2=I2();const cx=Nd(D2);var Ut=(r=>(r.READY="ready to sing",r.STANDBY="standby",r))(Ut||{}),ht=(r=>(r.SINGING="Singing",r.LISTENING="Listening",r))(ht||{}),Ue=(r=>(r.PENDING="Pending Approval",r.APPROVED="Approved",r.DONE="Done",r))(Ue||{}),Ss=(r=>(r.FRESH_MEAT="FRESH_MEAT",r.FAIR_ROTATION="FAIR_ROTATION",r.FIFO="FIFO",r.OLDEST_MEMBER="OLDEST_MEMBER",r.RANDOM="RANDOM",r))(Ss||{});class j2{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return O2(e).buffer}}function O2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let s=0;for(const a of r){const l=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);t.set(l,s),s+=a.byteLength}return t}function c1(r){return new P2(r).unpack()}function u1(r){const e=new M2,t=e.pack(r);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class P2{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let s=0,a="",l,u;for(;s<e;)l=t[s],l<160?(u=l,s++):(l^192)<32?(u=(l&31)<<6|t[s+1]&63,s+=2):(l^224)<16?(u=(l&15)<<12|(t[s+1]&63)<<6|t[s+2]&63,s+=3):(u=(l&7)<<18|(t[s+1]&63)<<12|(t[s+2]&63)<<6|t[s+3]&63,s+=4),a+=String.fromCodePoint(u);return this.index+=e,a}unpack_array(e){const t=new Array(e);for(let s=0;s<e;s++)t[s]=this.unpack();return t}unpack_map(e){const t={};for(let s=0;s<e;s++){const a=this.unpack();t[a]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,s=(e>>23&255)-127,a=e&8388607|8388608;return(t===0?1:-1)*a*2**(s-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),s=e>>31,a=(e>>20&2047)-1023,u=(e&1048575|1048576)*2**(a-20)+t*2**(a-52);return(s===0?1:-1)*u}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class M2{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const s=this.pack_array(e);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const s=e;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const s=this.pack_object(e);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),s=t.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const s=a=>{if(a<t){const l=this.pack(e[a]);return l instanceof Promise?l.then(()=>s(a+1)):s(a+1)}};return s(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const s=Math.floor(Math.log(e)/Math.LN2),a=e/2**s-1,l=Math.floor(a*2**52),u=2**32,p=t<<31|s+1023<<20|l/u&1048575,g=l%u;this._bufferBuilder.append(203),this.pack_int32(p),this.pack_int32(g)}pack_object(e){const t=Object.keys(e),s=t.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const a=l=>{if(l<t.length){const u=t[l];if(e.hasOwnProperty(u)){this.pack(u);const p=this.pack(e[u]);if(p instanceof Promise)return p.then(()=>a(l+1))}return a(l+1)}};return a(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,s=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),s=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new j2,this._textEncoder=new TextEncoder}}let h1=!0,d1=!0;function Nc(r,e,t){const s=r.match(e);return s&&s.length>=t&&parseFloat(s[t],10)}function lo(r,e,t){if(!r.RTCPeerConnection)return;const s=r.RTCPeerConnection.prototype,a=s.addEventListener;s.addEventListener=function(u,p){if(u!==e)return a.apply(this,arguments);const g=y=>{const b=t(y);b&&(p.handleEvent?p.handleEvent(b):p(b))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(p,g),a.apply(this,[u,g])};const l=s.removeEventListener;s.removeEventListener=function(u,p){if(u!==e||!this._eventMap||!this._eventMap[e])return l.apply(this,arguments);if(!this._eventMap[e].has(p))return l.apply(this,arguments);const g=this._eventMap[e].get(p);return this._eventMap[e].delete(p),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,l.apply(this,[u,g])},Object.defineProperty(s,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function L2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(h1=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function V2(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(d1=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function f1(){if(typeof window=="object"){if(h1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function pg(r,e){d1&&console.warn(r+" is deprecated, please use "+e+" instead.")}function U2(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator||!r.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=r;if(t.userAgentData&&t.userAgentData.brands){const s=t.userAgentData.brands.find(a=>a.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Nc(t.userAgent,/Firefox\/(\d+)\./,1));else if(t.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Nc(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(r.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Nc(t.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype,e._safariVersion=Nc(t.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function ux(r){return Object.prototype.toString.call(r)==="[object Object]"}function p1(r){return ux(r)?Object.keys(r).reduce(function(e,t){const s=ux(r[t]),a=s?p1(r[t]):r[t],l=s&&!Object.keys(a).length;return a===void 0||l?e:Object.assign(e,{[t]:a})},{}):r}function Sm(r,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(s=>{s.endsWith("Id")?Sm(r,r.get(e[s]),t):s.endsWith("Ids")&&e[s].forEach(a=>{Sm(r,r.get(a),t)})}))}function hx(r,e,t){const s=t?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const l=[];return r.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&l.push(u)}),l.forEach(u=>{r.forEach(p=>{p.type===s&&p.trackId===u.id&&Sm(r,p,a)})}),a}const dx=f1;function m1(r,e){const t=r&&r.navigator;if(!t.mediaDevices)return;const s=function(p){if(typeof p!="object"||p.mandatory||p.optional)return p;const g={};return Object.keys(p).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const b=typeof p[y]=="object"?p[y]:{ideal:p[y]};b.exact!==void 0&&typeof b.exact=="number"&&(b.min=b.max=b.exact);const _=function(T,k){return T?T+k.charAt(0).toUpperCase()+k.slice(1):k==="deviceId"?"sourceId":k};if(b.ideal!==void 0){g.optional=g.optional||[];let T={};typeof b.ideal=="number"?(T[_("min",y)]=b.ideal,g.optional.push(T),T={},T[_("max",y)]=b.ideal,g.optional.push(T)):(T[_("",y)]=b.ideal,g.optional.push(T))}b.exact!==void 0&&typeof b.exact!="number"?(g.mandatory=g.mandatory||{},g.mandatory[_("",y)]=b.exact):["min","max"].forEach(T=>{b[T]!==void 0&&(g.mandatory=g.mandatory||{},g.mandatory[_(T,y)]=b[T])})}),p.advanced&&(g.optional=(g.optional||[]).concat(p.advanced)),g},a=function(p,g){if(e.version>=61)return g(p);if(p=JSON.parse(JSON.stringify(p)),p&&typeof p.audio=="object"){const y=function(b,_,T){_ in b&&!(T in b)&&(b[T]=b[_],delete b[_])};p=JSON.parse(JSON.stringify(p)),y(p.audio,"autoGainControl","googAutoGainControl"),y(p.audio,"noiseSuppression","googNoiseSuppression"),p.audio=s(p.audio)}if(p&&typeof p.video=="object"){let y=p.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const b=e.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!b)){delete p.video.facingMode;let _;if(y.exact==="environment"||y.ideal==="environment"?_=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(_=["front"]),_)return t.mediaDevices.enumerateDevices().then(T=>{T=T.filter(V=>V.kind==="videoinput");let k=T.find(V=>_.some($=>V.label.toLowerCase().includes($)));return!k&&T.length&&_.includes("back")&&(k=T[T.length-1]),k&&(p.video.deviceId=y.exact?{exact:k.deviceId}:{ideal:k.deviceId}),p.video=s(p.video),dx("chrome: "+JSON.stringify(p)),g(p)})}p.video=s(p.video)}return dx("chrome: "+JSON.stringify(p)),g(p)},l=function(p){return e.version>=64?p:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[p.name]||p.name,message:p.message,constraint:p.constraint||p.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(p,g,y){a(p,b=>{t.webkitGetUserMedia(b,g,_=>{y&&y(l(_))})})};if(t.getUserMedia=u.bind(t),t.mediaDevices.getUserMedia){const p=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(g){return a(g,y=>p(y).then(b=>{if(y.audio&&!b.getAudioTracks().length||y.video&&!b.getVideoTracks().length)throw b.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return b},b=>Promise.reject(l(b))))}}}function g1(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function y1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.track.id):l={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)}),s.stream.getTracks().forEach(a=>{let l;r.RTCPeerConnection.prototype.getReceivers?l=this.getReceivers().find(p=>p.track&&p.track.id===a.id):l={track:a};const u=new Event("track");u.track=a,u.receiver=l,u.transceiver={receiver:l},u.streams=[s.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else lo(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function v1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(a,l){return{track:l,get dtmf(){return this._dtmf===void 0&&(l.kind==="audio"?this._dtmf=a.createDTMFSender(l):this._dtmf=null),this._dtmf},_pc:a}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(p,g){let y=a.apply(this,arguments);return y||(y=e(this,p),this._senders.push(y)),y};const l=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(p){l.apply(this,arguments);const g=this._senders.indexOf(p);g!==-1&&this._senders.splice(g,1)}}const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(l){this._senders=this._senders||[],t.apply(this,[l]),l.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(l){this._senders=this._senders||[],s.apply(this,[l]),l.getTracks().forEach(u=>{const p=this._senders.find(g=>g.track===u);p&&this._senders.splice(this._senders.indexOf(p),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function b1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const t=r.RTCPeerConnection.prototype.getSenders;t&&(r.RTCPeerConnection.prototype.getSenders=function(){const l=t.apply(this,[]);return l.forEach(u=>u._pc=this),l});const s=r.RTCPeerConnection.prototype.addTrack;s&&(r.RTCPeerConnection.prototype.addTrack=function(){const l=s.apply(this,arguments);return l._pc=this,l}),r.RTCRtpSender.prototype.getStats=function(){const l=this;return this._pc.getStats().then(u=>hx(u,l.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const t=r.RTCPeerConnection.prototype.getReceivers;t&&(r.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(l=>l._pc=this),a}),lo(r,"track",s=>(s.receiver._pc=s.srcElement,s)),r.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(l=>hx(l,a.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const s=arguments[0];let a,l,u;return this.getSenders().forEach(p=>{p.track===s&&(a?u=!0:a=p)}),this.getReceivers().forEach(p=>(p.track===s&&(l?u=!0:l=p),p.track===s)),u||a&&l?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():l?l.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function x1(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(u,p){if(!p)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const g=e.apply(this,arguments);return this._shimmedLocalStreams[p.id]?this._shimmedLocalStreams[p.id].indexOf(g)===-1&&this._shimmedLocalStreams[p.id].push(g):this._shimmedLocalStreams[p.id]=[p,g],g};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(y=>{if(this.getSenders().find(_=>_.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const p=this.getSenders();t.apply(this,arguments);const g=this.getSenders().filter(y=>p.indexOf(y)===-1);this._shimmedLocalStreams[u.id]=[u].concat(g)};const s=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],s.apply(this,arguments)};const a=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(p=>{const g=this._shimmedLocalStreams[p].indexOf(u);g!==-1&&this._shimmedLocalStreams[p].splice(g,1),this._shimmedLocalStreams[p].length===1&&delete this._shimmedLocalStreams[p]}),a.apply(this,arguments)}}function _1(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return x1(r);const t=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const b=t.apply(this);return this._reverseStreams=this._reverseStreams||{},b.map(_=>this._reverseStreams[_.id])};const s=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(b){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},b.getTracks().forEach(_=>{if(this.getSenders().find(k=>k.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[b.id]){const _=new r.MediaStream(b.getTracks());this._streams[b.id]=_,this._reverseStreams[_.id]=b,b=_}s.apply(this,[b])};const a=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(b){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[b.id]||b]),delete this._reverseStreams[this._streams[b.id]?this._streams[b.id].id:b.id],delete this._streams[b.id]},r.RTCPeerConnection.prototype.addTrack=function(b,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const T=[].slice.call(arguments,1);if(T.length!==1||!T[0].getTracks().find($=>$===b))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find($=>$.track===b))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const V=this._streams[_.id];if(V)V.addTrack(b),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const $=new r.MediaStream([b]);this._streams[_.id]=$,this._reverseStreams[$.id]=_,this.addStream($)}return this.getSenders().find($=>$.track===b)};function l(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const k=y._reverseStreams[T],V=y._streams[k.id];_=_.replace(new RegExp(V.id,"g"),k.id)}),new RTCSessionDescription({type:b.type,sdp:_})}function u(y,b){let _=b.sdp;return Object.keys(y._reverseStreams||[]).forEach(T=>{const k=y._reverseStreams[T],V=y._streams[k.id];_=_.replace(new RegExp(k.id,"g"),V.id)}),new RTCSessionDescription({type:b.type,sdp:_})}["createOffer","createAnswer"].forEach(function(y){const b=r.RTCPeerConnection.prototype[y],_={[y](){const T=arguments;return arguments.length&&typeof arguments[0]=="function"?b.apply(this,[V=>{const $=l(this,V);T[0].apply(null,[$])},V=>{T[1]&&T[1].apply(null,V)},arguments[2]]):b.apply(this,arguments).then(V=>l(this,V))}};r.RTCPeerConnection.prototype[y]=_[y]});const p=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?p.apply(this,arguments):(arguments[0]=u(this,arguments[0]),p.apply(this,arguments))};const g=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const y=g.get.apply(this);return y.type===""?y:l(this,y)}}),r.RTCPeerConnection.prototype.removeTrack=function(b){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!b._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(b._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let T;Object.keys(this._streams).forEach(k=>{this._streams[k].getTracks().find($=>b.track===$)&&(T=this._streams[k])}),T&&(T.getTracks().length===1?this.removeStream(this._reverseStreams[T.id]):T.removeTrack(b.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Nm(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const s=r.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[t]=a[t]})}function w1(r,e){lo(r,"negotiationneeded",t=>{const s=t.target;if(!((e.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return t})}const fx=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:w1,shimAddTrackRemoveTrack:_1,shimAddTrackRemoveTrackWithNative:x1,shimGetSendersWithDtmf:v1,shimGetUserMedia:m1,shimMediaStream:g1,shimOnTrack:y1,shimPeerConnection:Nm,shimSenderReceiverGetStats:b1},Symbol.toStringTag,{value:"Module"}));function E1(r,e){const t=r&&r.navigator,s=r&&r.MediaStreamTrack;if(t.getUserMedia=function(a,l,u){pg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(l,u)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(u,p,g){p in u&&!(g in u)&&(u[g]=u[p],delete u[p])},l=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),l(u)},s&&s.prototype.getSettings){const u=s.prototype.getSettings;s.prototype.getSettings=function(){const p=u.apply(this,arguments);return a(p,"mozAutoGainControl","autoGainControl"),a(p,"mozNoiseSuppression","noiseSuppression"),p}}if(s&&s.prototype.applyConstraints){const u=s.prototype.applyConstraints;s.prototype.applyConstraints=function(p){return this.kind==="audio"&&typeof p=="object"&&(p=JSON.parse(JSON.stringify(p)),a(p,"autoGainControl","mozAutoGainControl"),a(p,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[p])}}}}function z2(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return s.video===!0?s.video={mediaSource:e}:s.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(s)})}function T1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Cm(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const l=r.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),l.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=u[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[l,u,p]=arguments;return s.apply(this,[l||null]).then(g=>{if(e.version<53&&!u)try{g.forEach(y=>{y.type=t[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;g.forEach((b,_)=>{g.set(_,Object.assign({},b,{type:t[b.type]||b.type}))})}return g}).then(u,p)}}function S1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(l=>l._pc=this),a});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function N1(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s}),lo(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function C1(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){pg("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&t.getTracks().includes(s.track)&&this.removeTrack(s)})})}function A1(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function R1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const a=s.length>0;a&&s.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const l=e.apply(this,arguments);if(a){const{sender:u}=l,p=u.getParameters();(!("encodings"in p)||p.encodings.length===1&&Object.keys(p.encodings[0]).length===0)&&(p.encodings=s,u.sendEncodings=s,this.setParametersPromises.push(u.setParameters(p).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return l})}function k1(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const s=e.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function I1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function D1(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const px=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:R1,shimCreateAnswer:D1,shimCreateOffer:I1,shimGetDisplayMedia:z2,shimGetParameters:k1,shimGetUserMedia:E1,shimOnTrack:T1,shimPeerConnection:Cm,shimRTCDataChannel:A1,shimReceiverGetStats:N1,shimRemoveStream:C1,shimSenderGetStats:S1},Symbol.toStringTag,{value:"Module"}));function j1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(a=>e.call(this,a,s)),s.getVideoTracks().forEach(a=>e.call(this,a,s))},r.RTCPeerConnection.prototype.addTrack=function(s,...a){return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(t);if(s===-1)return;this._localStreams.splice(s,1);const a=t.getTracks();this.getSenders().forEach(l=>{a.includes(l.track)&&this.removeTrack(l)})})}}function O1(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const l=new Event("addstream");l.stream=a,this.dispatchEvent(l)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(l=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(l)>=0)return;s._remoteStreams.push(l);const u=new Event("addstream");u.stream=l,s.dispatchEvent(u)})}),e.apply(s,arguments)}}}function P1(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,t=e.createOffer,s=e.createAnswer,a=e.setLocalDescription,l=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=t.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T},e.createAnswer=function(y,b){const _=arguments.length>=2?arguments[2]:arguments[0],T=s.apply(this,[_]);return b?(T.then(y,b),Promise.resolve()):T};let p=function(g,y,b){const _=a.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_};e.setLocalDescription=p,p=function(g,y,b){const _=l.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.setRemoteDescription=p,p=function(g,y,b){const _=u.apply(this,[g]);return b?(_.then(y,b),Promise.resolve()):_},e.addIceCandidate=p}function M1(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,s=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=a=>s(L1(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(s,a,l){e.mediaDevices.getUserMedia(s).then(a,l)}).bind(e))}function L1(r){return r&&r.video!==void 0?Object.assign({},r,{video:p1(r.video)}):r}function V1(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(s,a){if(s&&s.iceServers){const l=[];for(let u=0;u<s.iceServers.length;u++){let p=s.iceServers[u];p.urls===void 0&&p.url?(pg("RTCIceServer.url","RTCIceServer.urls"),p=JSON.parse(JSON.stringify(p)),p.urls=p.url,delete p.url,l.push(p)):l.push(s.iceServers[u])}s.iceServers=l}return new e(s,a)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function U1(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function z1(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):s.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const l=this.getTransceivers().find(u=>u.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):s.offerToReceiveVideo===!0&&!l&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function B1(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const mx=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:B1,shimCallbacksAPI:P1,shimConstraints:L1,shimCreateOfferLegacy:z1,shimGetUserMedia:M1,shimLocalStreamsAPI:j1,shimRTCIceServerUrls:V1,shimRemoteStreamsAPI:O1,shimTrackEventTransceiver:U1},Symbol.toStringTag,{value:"Module"}));var cm={exports:{}},gx;function B2(){return gx||(gx=1,(function(r){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(s=>s.trim())},e.splitSections=function(t){return t.split(`
m=`).map((a,l)=>(l>0?"m="+a:a).trim()+`\r
`)},e.getDescription=function(t){const s=e.splitSections(t);return s&&s[0]},e.getMediaSections=function(t){const s=e.splitSections(t);return s.shift(),s},e.matchPrefix=function(t,s){return e.splitLines(t).filter(a=>a.indexOf(s)===0)},e.parseCandidate=function(t){let s;t.indexOf("a=candidate:")===0?s=t.substring(12).split(" "):s=t.substring(10).split(" ");const a={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let l=8;l<s.length;l+=2)switch(s[l]){case"raddr":a.relatedAddress=s[l+1];break;case"rport":a.relatedPort=parseInt(s[l+1],10);break;case"tcptype":a.tcpType=s[l+1];break;case"ufrag":a.ufrag=s[l+1],a.usernameFragment=s[l+1];break;default:a[s[l]]===void 0&&(a[s[l]]=s[l+1]);break}return a},e.writeCandidate=function(t){const s=[];s.push(t.foundation);const a=t.component;a==="rtp"?s.push(1):a==="rtcp"?s.push(2):s.push(a),s.push(t.protocol.toUpperCase()),s.push(t.priority),s.push(t.address||t.ip),s.push(t.port);const l=t.type;return s.push("typ"),s.push(l),l!=="host"&&t.relatedAddress&&t.relatedPort&&(s.push("raddr"),s.push(t.relatedAddress),s.push("rport"),s.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(s.push("ufrag"),s.push(t.usernameFragment||t.ufrag)),"candidate:"+s.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let s=t.substring(9).split(" ");const a={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),a.name=s[0],a.clockRate=parseInt(s[1],10),a.channels=s.length===3?parseInt(s[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(t){let s=t.payloadType;t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+s+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(t){const s=t.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const s={};let a;const l=t.substring(t.indexOf(" ")+1).split(";");for(let u=0;u<l.length;u++)a=l[u].trim().split("="),s[a[0].trim()]=a[1];return s},e.writeFmtp=function(t){let s="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const l=[];Object.keys(t.parameters).forEach(u=>{t.parameters[u]!==void 0?l.push(u+"="+t.parameters[u]):l.push(u)}),s+="a=fmtp:"+a+" "+l.join(";")+`\r
`}return s},e.parseRtcpFb=function(t){const s=t.substring(t.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},e.writeRtcpFb=function(t){let s="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(l=>{s+="a=rtcp-fb:"+a+" "+l.type+(l.parameter&&l.parameter.length?" "+l.parameter:"")+`\r
`}),s},e.parseSsrcMedia=function(t){const s=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,s),10)},l=t.indexOf(":",s);return l>-1?(a.attribute=t.substring(s+1,l),a.value=t.substring(l+1)):a.attribute=t.substring(s+1),a},e.parseSsrcGroup=function(t){const s=t.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(a=>parseInt(a,10))}},e.getMid=function(t){const s=e.matchPrefix(t,"a=mid:")[0];if(s)return s.substring(6)},e.parseFingerprint=function(t){const s=t.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},e.getDtlsParameters=function(t,s){return{role:"auto",fingerprints:e.matchPrefix(t+s,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,s){let a="a=setup:"+s+`\r
`;return t.fingerprints.forEach(l=>{a+="a=fingerprint:"+l.algorithm+" "+l.value+`\r
`}),a},e.parseCryptoLine=function(t){const s=t.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const s=t.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,s){return e.matchPrefix(t+s,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,s){const a=e.matchPrefix(t+s,"a=ice-ufrag:")[0],l=e.matchPrefix(t+s,"a=ice-pwd:")[0];return a&&l?{usernameFragment:a.substring(12),password:l.substring(10)}:null},e.writeIceParameters=function(t){let s="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(s+=`a=ice-lite\r
`),s},e.parseRtpParameters=function(t){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=e.splitLines(t)[0].split(" ");s.profile=l[2];for(let p=3;p<l.length;p++){const g=l[p],y=e.matchPrefix(t,"a=rtpmap:"+g+" ")[0];if(y){const b=e.parseRtpMap(y),_=e.matchPrefix(t,"a=fmtp:"+g+" ");switch(b.parameters=_.length?e.parseFmtp(_[0]):{},b.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+g+" ").map(e.parseRtcpFb),s.codecs.push(b),b.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(b.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(p=>{s.headerExtensions.push(e.parseExtmap(p))});const u=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return s.codecs.forEach(p=>{u.forEach(g=>{p.rtcpFeedback.find(b=>b.type===g.type&&b.parameter===g.parameter)||p.rtcpFeedback.push(g)})}),s},e.writeRtpDescription=function(t,s){let a="";a+="m="+t+" ",a+=s.codecs.length>0?"9":"0",a+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=s.codecs.map(u=>u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(u=>{a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});let l=0;return s.codecs.forEach(u=>{u.maxptime>l&&(l=u.maxptime)}),l>0&&(a+="a=maxptime:"+l+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(u=>{a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(t){const s=[],a=e.parseRtpParameters(t),l=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,p=e.matchPrefix(t,"a=ssrc:").map(T=>e.parseSsrcMedia(T)).filter(T=>T.attribute==="cname"),g=p.length>0&&p[0].ssrc;let y;const b=e.matchPrefix(t,"a=ssrc-group:FID").map(T=>T.substring(17).split(" ").map(V=>parseInt(V,10)));b.length>0&&b[0].length>1&&b[0][0]===g&&(y=b[0][1]),a.codecs.forEach(T=>{if(T.name.toUpperCase()==="RTX"&&T.parameters.apt){let k={ssrc:g,codecPayloadType:parseInt(T.parameters.apt,10)};g&&y&&(k.rtx={ssrc:y}),s.push(k),l&&(k=JSON.parse(JSON.stringify(k)),k.fec={ssrc:g,mechanism:u?"red+ulpfec":"red"},s.push(k))}}),s.length===0&&g&&s.push({ssrc:g});let _=e.matchPrefix(t,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substring(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substring(5),10)*1e3*.95-2e3*8:_=void 0,s.forEach(T=>{T.maxBitrate=_})),s},e.parseRtcpParameters=function(t){const s={},a=e.matchPrefix(t,"a=ssrc:").map(p=>e.parseSsrcMedia(p)).filter(p=>p.attribute==="cname")[0];a&&(s.cname=a.value,s.ssrc=a.ssrc);const l=e.matchPrefix(t,"a=rtcp-rsize");s.reducedSize=l.length>0,s.compound=l.length===0;const u=e.matchPrefix(t,"a=rtcp-mux");return s.mux=u.length>0,s},e.writeRtcpParameters=function(t){let s="";return t.reducedSize&&(s+=`a=rtcp-rsize\r
`),t.mux&&(s+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(s+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),s},e.parseMsid=function(t){let s;const a=e.matchPrefix(t,"a=msid:");if(a.length===1)return s=a[0].substring(7).split(" "),{stream:s[0],track:s[1]};const l=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="msid");if(l.length>0)return s=l[0].value.split(" "),{stream:s[0],track:s[1]}},e.parseSctpDescription=function(t){const s=e.parseMLine(t),a=e.matchPrefix(t,"a=max-message-size:");let l;a.length>0&&(l=parseInt(a[0].substring(19),10)),isNaN(l)&&(l=65536);const u=e.matchPrefix(t,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substring(12),10),protocol:s.fmt,maxMessageSize:l};const p=e.matchPrefix(t,"a=sctpmap:");if(p.length>0){const g=p[0].substring(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:l}}},e.writeSctpDescription=function(t,s){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&a.push("a=max-message-size:"+s.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,s,a){let l;const u=s!==void 0?s:2;return t?l=t:l=e.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+l+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,s){const a=e.splitLines(t);for(let l=0;l<a.length;l++)switch(a[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[l].substring(2)}return s?e.getDirection(s):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const a=e.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(t){const a=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const s=e.splitLines(t);for(let a=0;a<s.length;a++)if(s[a].length<2||s[a].charAt(1)!=="=")return!1;return!0},r.exports=e})(cm)),cm.exports}var H1=B2();const ll=Nd(H1),H2=u2({__proto__:null,default:ll},[H1]);function Lh(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const a=new e(s),l=ll.parseCandidate(s.candidate);for(const u in l)u in a||Object.defineProperty(a,u,{value:l[u]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new e(s)},r.RTCIceCandidate.prototype=e.prototype,lo(r,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new r.RTCIceCandidate(t.candidate),writable:"false"}),t))}function Am(r){!r.RTCIceCandidate||r.RTCIceCandidate&&"relayProtocol"in r.RTCIceCandidate.prototype||lo(r,"icecandidate",e=>{if(e.candidate){const t=ll.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Vh(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(p){if(!p||!p.sdp)return!1;const g=ll.splitSections(p.sdp);return g.shift(),g.some(y=>{const b=ll.parseMLine(y);return b&&b.kind==="application"&&b.protocol.indexOf("SCTP")!==-1})},s=function(p){const g=p.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(g===null||g.length<2)return-1;const y=parseInt(g[1],10);return y!==y?-1:y},a=function(p){let g=65536;return e.browser==="firefox"&&(e.version<57?p===-1?g=16384:g=2147483637:e.version<60?g=e.version===57?65535:65536:g=2147483637),g},l=function(p,g){let y=65536;e.browser==="firefox"&&e.version===57&&(y=65535);const b=ll.matchPrefix(p.sdp,"a=max-message-size:");return b.length>0?y=parseInt(b[0].substring(19),10):e.browser==="firefox"&&g!==-1&&(y=2147483637),y},u=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:g}=this.getConfiguration();g==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const g=s(arguments[0]),y=a(g),b=l(arguments[0],g);let _;y===0&&b===0?_=Number.POSITIVE_INFINITY:y===0||b===0?_=Math.max(y,b):_=Math.min(y,b);const T={};Object.defineProperty(T,"maxMessageSize",{get(){return _}}),this._sctp=T}return u.apply(this,arguments)}}function Uh(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(s,a){const l=s.send;s.send=function(){const p=arguments[0],g=p.length||p.size||p.byteLength;if(s.readyState==="open"&&a.sctp&&g>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return l.apply(s,arguments)}}const t=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return e(a,this),a},lo(r,"datachannel",s=>(e(s.channel,s.target),s))}function Rm(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const s=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const l=a.target;if(l._lastConnectionState!==l.connectionState){l._lastConnectionState=l.connectionState;const u=new Event("connectionstatechange",a);l.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function km(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const t=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const l=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&a instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:a.type,sdp:l}):a.sdp=l}return t.apply(this,arguments)}}function zh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Bh(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const t=r.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(r.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(u=>t.apply(this,[u]))})}const G2=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:km,shimAddIceCandidateNullOrEmpty:zh,shimConnectionState:Rm,shimMaxMessageSize:Vh,shimParameterlessSetLocalDescription:Bh,shimRTCIceCandidate:Lh,shimRTCIceCandidateRelayProtocol:Am,shimSendThrowTypeError:Uh},Symbol.toStringTag,{value:"Module"}));function q2({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=f1,s=U2(r),a={browserDetails:s,commonShim:G2,extractVersion:Nc,disableLog:L2,disableWarnings:V2,sdp:H2};switch(s.browser){case"chrome":if(!fx||!Nm||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(s.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=fx,zh(r,s),Bh(r),m1(r,s),g1(r),Nm(r,s),y1(r),_1(r,s),v1(r),b1(r),w1(r,s),Lh(r),Am(r),Rm(r),Vh(r,s),Uh(r),km(r,s);break;case"firefox":if(!px||!Cm||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=px,zh(r,s),Bh(r),E1(r,s),Cm(r,s),T1(r),C1(r),S1(r),N1(r),A1(r),R1(r),k1(r),I1(r),D1(r),Lh(r),Rm(r),Vh(r,s),Uh(r);break;case"safari":if(!mx||!e.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=mx,zh(r,s),Bh(r),V1(r),z1(r),P1(r),j1(r),O1(r),U1(r),M1(r),B1(r),Lh(r),Am(r),Vh(r,s),Uh(r),km(r,s);break;default:t("Unsupported browser!");break}return a}const yx=q2({window:typeof window>"u"?void 0:window});function co(r,e,t,s){Object.defineProperty(r,e,{get:t,set:s,enumerable:!0,configurable:!0})}class G1{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],s=e.byteLength,a=Math.ceil(s/this.chunkedMTU);let l=0,u=0;for(;u<s;){const p=Math.min(s,u+this.chunkedMTU),g=e.slice(u,p),y={__peerData:this._dataCount,n:l,data:g,total:a};t.push(y),u=p,l++}return this._dataCount++,t}}}function F2(r){let e=0;for(const a of r)e+=a.byteLength;const t=new Uint8Array(e);let s=0;for(const a of r)t.set(a,s),s+=a.byteLength;return t}const um=yx.default||yx,_c=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const r=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(r)?r==="chrome"?e>=this.minChromeVersion:r==="firefox"?e>=this.minFirefoxVersion:r==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return um.browserDetails.browser}getVersion(){return um.browserDetails.version||0}isUnifiedPlanSupported(){const r=this.getBrowser(),e=um.browserDetails.version||0;if(r==="chrome"&&e<this.minChromeVersion)return!1;if(r==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,s=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),s=!0}catch{}finally{t&&t.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},$2=r=>!r||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(r),q1=()=>Math.random().toString(36).slice(2),vx={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Y2 extends G1{noop(){}blobToArrayBuffer(e,t){const s=new FileReader;return s.onload=function(a){a.target&&t(a.target.result)},s.readAsArrayBuffer(e),s}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=vx,this.browser=_c.getBrowser(),this.browserVersion=_c.getVersion(),this.pack=u1,this.unpack=c1,this.supports=(function(){const t={browser:_c.isBrowserSupported(),webRTC:_c.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let s;try{s=new RTCPeerConnection(vx),t.audioVideo=!0;let a;try{a=s.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!a.ordered;try{a.binaryType="blob",t.binaryBlob=!_c.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{s&&s.close()}return t})(),this.validateId=$2,this.randomToken=q1}}const ir=new Y2,Q2="PeerJS: ";class K2{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const s=[Q2,...t];for(const a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);e>=3?console.log(...s):e>=2?console.warn("WARNING",...s):e>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var xe=new K2,mg={},X2=Object.prototype.hasOwnProperty,Kn="~";function Hc(){}Object.create&&(Hc.prototype=Object.create(null),new Hc().__proto__||(Kn=!1));function J2(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function F1(r,e,t,s,a){if(typeof t!="function")throw new TypeError("The listener must be a function");var l=new J2(t,s||r,a),u=Kn?Kn+e:e;return r._events[u]?r._events[u].fn?r._events[u]=[r._events[u],l]:r._events[u].push(l):(r._events[u]=l,r._eventsCount++),r}function Hh(r,e){--r._eventsCount===0?r._events=new Hc:delete r._events[e]}function zn(){this._events=new Hc,this._eventsCount=0}zn.prototype.eventNames=function(){var e=[],t,s;if(this._eventsCount===0)return e;for(s in t=this._events)X2.call(t,s)&&e.push(Kn?s.slice(1):s);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};zn.prototype.listeners=function(e){var t=Kn?Kn+e:e,s=this._events[t];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,l=s.length,u=new Array(l);a<l;a++)u[a]=s[a].fn;return u};zn.prototype.listenerCount=function(e){var t=Kn?Kn+e:e,s=this._events[t];return s?s.fn?1:s.length:0};zn.prototype.emit=function(e,t,s,a,l,u){var p=Kn?Kn+e:e;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,_;if(g.fn){switch(g.once&&this.removeListener(e,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,t),!0;case 3:return g.fn.call(g.context,t,s),!0;case 4:return g.fn.call(g.context,t,s,a),!0;case 5:return g.fn.call(g.context,t,s,a,l),!0;case 6:return g.fn.call(g.context,t,s,a,l,u),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g.fn.apply(g.context,b)}else{var T=g.length,k;for(_=0;_<T;_++)switch(g[_].once&&this.removeListener(e,g[_].fn,void 0,!0),y){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,t);break;case 3:g[_].fn.call(g[_].context,t,s);break;case 4:g[_].fn.call(g[_].context,t,s,a);break;default:if(!b)for(k=1,b=new Array(y-1);k<y;k++)b[k-1]=arguments[k];g[_].fn.apply(g[_].context,b)}}return!0};zn.prototype.on=function(e,t,s){return F1(this,e,t,s,!1)};zn.prototype.once=function(e,t,s){return F1(this,e,t,s,!0)};zn.prototype.removeListener=function(e,t,s,a){var l=Kn?Kn+e:e;if(!this._events[l])return this;if(!t)return Hh(this,l),this;var u=this._events[l];if(u.fn)u.fn===t&&(!a||u.once)&&(!s||u.context===s)&&Hh(this,l);else{for(var p=0,g=[],y=u.length;p<y;p++)(u[p].fn!==t||a&&!u[p].once||s&&u[p].context!==s)&&g.push(u[p]);g.length?this._events[l]=g.length===1?g[0]:g:Hh(this,l)}return this};zn.prototype.removeAllListeners=function(e){var t;return e?(t=Kn?Kn+e:e,this._events[t]&&Hh(this,t)):(this._events=new Hc,this._eventsCount=0),this};zn.prototype.off=zn.prototype.removeListener;zn.prototype.addListener=zn.prototype.on;zn.prefixed=Kn;zn.EventEmitter=zn;mg=zn;var uo={};co(uo,"ConnectionType",()=>sa);co(uo,"PeerErrorType",()=>cn);co(uo,"BaseConnectionErrorType",()=>Im);co(uo,"DataConnectionErrorType",()=>gg);co(uo,"SerializationType",()=>Cd);co(uo,"SocketEventType",()=>ea);co(uo,"ServerMessageType",()=>Ln);var sa=(function(r){return r.Data="data",r.Media="media",r})({}),cn=(function(r){return r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc",r})({}),Im=(function(r){return r.NegotiationFailed="negotiation-failed",r.ConnectionClosed="connection-closed",r})({}),gg=(function(r){return r.NotOpenYet="not-open-yet",r.MessageToBig="message-too-big",r})({}),Cd=(function(r){return r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json",r.None="raw",r})({}),ea=(function(r){return r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close",r})({}),Ln=(function(r){return r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE",r})({});const $1="1.5.5";class W2 extends mg.EventEmitter{constructor(e,t,s,a,l,u=5e3){super(),this.pingInterval=u,this._disconnected=!0,this._messagesQueue=[];const p=e?"wss://":"ws://";this._baseUrl=p+t+":"+s+a+"peerjs?key="+l}start(e,t){this._id=e;const s=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+$1),this._disconnected=!1,this._socket.onmessage=a=>{let l;try{l=JSON.parse(a.data),xe.log("Server message received:",l)}catch{xe.log("Invalid server message",a.data);return}this.emit(ea.Message,l)},this._socket.onclose=a=>{this._disconnected||(xe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ea.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),xe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){xe.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ln.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(ea.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Y1{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===sa.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const s=this.connection,a={ordered:!!e.reliable},l=t.createDataChannel(s.label,a);s._initializeDataChannel(l),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){xe.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,s=this.connection.connectionId,a=this.connection.type,l=this.connection.provider;xe.log("Listening for ICE candidates."),e.onicecandidate=u=>{!u.candidate||!u.candidate.candidate||(xe.log(`Received ICE candidates for ${t}:`,u.candidate),l.socket.send({type:Ln.Candidate,payload:{candidate:u.candidate,type:a,connectionId:s},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":xe.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(Im.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":xe.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(Im.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":xe.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},xe.log("Listening for data channel"),e.ondatachannel=u=>{xe.log("Received data channel");const p=u.channel;l.getConnection(t,s)._initializeDataChannel(p)},xe.log("Listening for remote stream"),e.ontrack=u=>{xe.log("Received remote stream");const p=u.streams[0],g=l.getConnection(t,s);if(g.type===sa.Media){const y=g;this._addStreamToMediaConnection(p,y)}}}cleanup(){xe.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let s=!1;const a=this.connection.dataChannel;a&&(s=!!a.readyState&&a.readyState!=="closed"),(t||s)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const s=await e.createOffer(this.connection.options.constraints);xe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await e.setLocalDescription(s),xe.log("Set localDescription:",s,`for:${this.connection.peer}`);let a={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===sa.Data){const l=this.connection;a={...a,label:l.label,reliable:l.reliable,serialization:l.serialization}}t.socket.send({type:Ln.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(cn.WebRTC,a),xe.log("Failed to setLocalDescription, ",a))}}catch(s){t.emitError(cn.WebRTC,s),xe.log("Failed to createOffer, ",s)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const s=await e.createAnswer();xe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await e.setLocalDescription(s),xe.log("Set localDescription:",s,`for:${this.connection.peer}`),t.socket.send({type:Ln.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){t.emitError(cn.WebRTC,a),xe.log("Failed to setLocalDescription, ",a)}}catch(s){t.emitError(cn.WebRTC,s),xe.log("Failed to create answer, ",s)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const s=this.connection.peerConnection,a=this.connection.provider;xe.log("Setting remote description",t);const l=this;try{await s.setRemoteDescription(t),xe.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await l._makeAnswer()}catch(u){a.emitError(cn.WebRTC,u),xe.log("Failed to setRemoteDescription, ",u)}}async handleCandidate(e){xe.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),xe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(cn.WebRTC,t),xe.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(xe.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return xe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(s=>{t.addTrack(s,e)})}_addStreamToMediaConnection(e,t){xe.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class Q1 extends mg.EventEmitter{emitError(e,t){xe.error("Error:",t),this.emit("error",new Z2(`${e}`,t))}}class Z2 extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class K1 extends Q1{get open(){return this._open}constructor(e,t,s){super(),this.peer=e,this.provider=t,this.options=s,this._open=!1,this.metadata=s.metadata}}var ug;const zc=class zc extends K1{get type(){return sa.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,s){super(e,t,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||zc.ID_PREFIX+ir.randomToken(),this._negotiator=new Y1(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){xe.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,s=e.payload;switch(e.type){case Ln.Answer:this._negotiator.handleSDP(t,s.sdp),this._open=!0;break;case Ln.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:xe.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){xe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const s=this.provider._getMessages(this.connectionId);for(const a of s)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};ug=new WeakMap,vc(zc,ug,zc.ID_PREFIX="mc_");let ed=zc;class eN{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:s,port:a,path:l,key:u}=this._options,p=new URL(`${t}://${s}:${a}${l}${u}/${e}`);return p.searchParams.set("ts",`${Date.now()}${Math.random()}`),p.searchParams.set("version",$1),fetch(p.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){xe.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==ir.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===ir.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw xe.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var hg,dg;const Xa=class Xa extends K1{get type(){return sa.Data}constructor(e,t,s){super(e,t,s),this.connectionId=this.options.connectionId||Xa.ID_PREFIX+q1(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Y1(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{xe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{xe.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{xe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(gg.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case Ln.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case Ln.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:xe.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};hg=new WeakMap,dg=new WeakMap,vc(Xa,hg,Xa.ID_PREFIX="dc_"),vc(Xa,dg,Xa.MAX_BUFFERED_AMOUNT=8388608);let td=Xa;class yg extends td{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>td.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return xe.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class hm extends yg{close(e){super.close(e),this._chunkedData={}}constructor(e,t,s){super(e,t,s),this.chunker=new G1,this.serialization=Cd.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=c1(e),s=t.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,s=this._chunkedData[t]||{data:[],count:0,total:e.total};if(s.data[e.n]=new Uint8Array(e.data),s.count++,this._chunkedData[t]=s,s.total===s.count){delete this._chunkedData[t];const a=F2(s.data);this._handleDataMessage({data:a})}}_send(e,t){const s=u1(e);if(s instanceof Promise)return this._send_blob(s);if(!t&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);xe.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const s of t)this.send(s,!0)}}class tN extends yg{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Cd.None}}class nN extends yg{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),s=t.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const s=this.encoder.encode(this.stringify(e));if(s.byteLength>=ir.chunkedMTU){this.emitError(gg.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...e){super(...e),this.serialization=Cd.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var fg;const Bc=class Bc extends Q1{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,s]of this._connections)e[t]=s;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:tN,json:nN,binary:hm,"binary-utf8":hm,default:hm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(e&&e.constructor==Object?t=e:e&&(s=e.toString()),t={debug:0,host:ir.CLOUD_HOST,port:ir.CLOUD_PORT,path:"/",key:Bc.DEFAULT_KEY,token:ir.randomToken(),config:ir.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==ir.CLOUD_HOST?this._options.secure=ir.isSecure():this._options.host==ir.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&xe.setLogFunction(this._options.logFunction),xe.logLevel=this._options.debug||0,this._api=new eN(t),this._socket=this._createServerConnection(),!ir.supports.audioVideo&&!ir.supports.data){this._delayedAbort(cn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!ir.validateId(s)){this._delayedAbort(cn.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(cn.ServerError,a))}_createServerConnection(){const e=new W2(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(ea.Message,t=>{this._handleMessage(t)}),e.on(ea.Error,t=>{this._abort(cn.SocketError,t)}),e.on(ea.Disconnected,()=>{this.disconnected||(this.emitError(cn.Network,"Lost connection to server."),this.disconnect())}),e.on(ea.Close,()=>{this.disconnected||this._abort(cn.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,s=e.payload,a=e.src;switch(t){case Ln.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ln.Error:this._abort(cn.ServerError,s.msg);break;case Ln.IdTaken:this._abort(cn.UnavailableID,`ID "${this.id}" is taken`);break;case Ln.InvalidKey:this._abort(cn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ln.Leave:xe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Ln.Expire:this.emitError(cn.PeerUnavailable,`Could not connect to peer ${a}`);break;case Ln.Offer:{const l=s.connectionId;let u=this.getConnection(a,l);if(u&&(u.close(),xe.warn(`Offer received for existing Connection ID:${l}`)),s.type===sa.Media){const g=new ed(a,this,{connectionId:l,_payload:s,metadata:s.metadata});u=g,this._addConnection(a,u),this.emit("call",g)}else if(s.type===sa.Data){const g=new this._serializers[s.serialization](a,this,{connectionId:l,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});u=g,this._addConnection(a,u),this.emit("connection",g)}else{xe.warn(`Received malformed connection type:${s.type}`);return}const p=this._getMessages(l);for(const g of p)u.handleMessage(g);break}default:{if(!s){xe.warn(`You received a malformed message from ${a} of type ${t}`);return}const l=s.connectionId,u=this.getConnection(a,l);u&&u.peerConnection?u.handleMessage(e):l?this._storeMessage(l,e):xe.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(cn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,s),s}call(e,t,s={}){if(this.disconnected){xe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(cn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){xe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new ed(e,this,{...s,_stream:t});return this._addConnection(e,a),a}_addConnection(e,t){xe.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const s=t.indexOf(e);s!==-1&&t.splice(s,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const s=this._connections.get(e);if(!s)return null;for(const a of s)if(a.connectionId===t)return a;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){xe.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(xe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const s of t)s.close()}disconnect(){if(this.disconnected)return;const e=this.id;xe.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)xe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)xe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(cn.ServerError,t))}};fg=new WeakMap,vc(Bc,fg,Bc.DEFAULT_KEY="peerjs");let nd=Bc;class rN{constructor(){this.peer=null,this.lockPeer=null,this.connections=new Map,this.hostId=null,this.isHost=!1,this.heartbeatInterval=null,this.retryCount=0,this.maxRetries=10,this.actionQueue=[],this.onStateReceived=null,this.onActionReceived=null,this.onConnectionStatus=null,this.onPeerConnected=null,this.onDeviceConnected=null,this.onDeviceDisconnected=null}async getPublicIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip||"unknown-network"}catch(e){return console.warn("[Sync] Could not fetch public IP for lock, using fallback",e),"local-fallback"}}async initialize(e,t){if(this.isHost=e==="DJ",this.peer&&this.destroy(),this.isHost&&!t){const s=await this.getPublicIP(),a=`singmode-lock-${btoa(s).replace(/=/g,"").substr(0,12)}`;if(console.log(`[Sync] Attempting to claim network lock: ${a}`),!await new Promise(u=>{const p=new nd(a,{debug:1});p.on("open",()=>{this.lockPeer=p,u(!0)}),p.on("error",g=>{g.type==="unavailable-id"?u(!1):u(!0),p.destroy()})}))throw new Error("COLLISION: A SingMode DJ session is already active on this network.")}return new Promise((s,a)=>{const l=this.isHost?t||`singmode-${Math.random().toString(36).substr(2,6)}`:void 0;this.peer=new nd(l,{debug:1,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"},{urls:"stun:stun2.l.google.com:19302"},{urls:"stun:stun3.l.google.com:19302"},{urls:"stun:stun4.l.google.com:19302"}]}}),this.peer.on("open",u=>{console.log(`[Sync] Peer opened with ID: ${u}`),this.hostId=u,this.retryCount=0,this.startHeartbeat(),!this.isHost&&t&&this.connectToHost(t),this.onConnectionStatus&&(!t||this.connections.size>0)&&this.onConnectionStatus("connected"),s(u)}),this.peer.on("disconnected",()=>{var u;console.warn("[Sync] Peer disconnected from signaling server. Attempting reconnect..."),this.onConnectionStatus&&this.onConnectionStatus("connecting"),(u=this.peer)==null||u.reconnect()}),this.peer.on("connection",u=>{this.handleConnection(u)}),this.peer.on("error",u=>{var p;console.error("[Sync] Peer error:",u.type,u),u.type==="unavailable-id"?(this.destroy(),this.initialize(e).then(s).catch(a)):u.type==="network"||u.type==="server-error"||(p=u.message)!=null&&p.includes("Lost connection")?(this.onConnectionStatus&&this.onConnectionStatus("disconnected"),this.handleNetworkError(e,t)):u.type==="peer-unavailable"&&this.onConnectionStatus&&this.onConnectionStatus("disconnected")})})}handleNetworkError(e,t){if(this.retryCount<this.maxRetries){this.retryCount++;const s=Math.min(1e3*Math.pow(2,this.retryCount),3e4);console.log(`[Sync] Network failure. Retrying in ${s}ms... (Attempt ${this.retryCount})`),setTimeout(()=>{this.initialize(e,t)},s)}}startHeartbeat(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.heartbeatInterval=window.setInterval(()=>{this.peer&&this.peer.disconnected&&!this.peer.destroyed&&this.peer.reconnect(),this.lockPeer&&this.lockPeer.disconnected&&!this.lockPeer.destroyed&&this.lockPeer.reconnect()},5e3)}connectToHost(e){if(!this.peer||this.isHost||this.peer.destroyed)return;this.onConnectionStatus&&this.onConnectionStatus("connecting");const t=this.peer.connect(e,{reliable:!0});this.handleConnection(t)}handleConnection(e){e.on("open",()=>{console.log(`[Sync] Data connection established with: ${e.peer}`),this.connections.set(e.peer,e),!this.isHost&&this.actionQueue.length>0&&(console.log(`[Sync] Flushing ${this.actionQueue.length} queued actions to host.`),this.actionQueue.forEach(t=>{e.send(t)}),this.actionQueue=[]),this.onConnectionStatus&&this.onConnectionStatus("connected"),this.isHost&&this.onPeerConnected&&this.onPeerConnected(),this.isHost&&this.onDeviceConnected&&this.onDeviceConnected(e.peer)}),e.on("data",t=>{if(t&&typeof t=="object")if("type"in t){const s={...t,senderId:e.peer};this.onActionReceived&&this.onActionReceived(s)}else"participants"in t&&this.onStateReceived&&this.onStateReceived(t)}),e.on("close",()=>{console.log(`[Sync] Connection closed: ${e.peer}`),this.connections.delete(e.peer),this.connections.size===0&&this.onConnectionStatus&&(this.isHost||this.onConnectionStatus("disconnected")),this.isHost&&this.onDeviceDisconnected&&this.onDeviceDisconnected(e.peer)}),e.on("error",t=>{console.error("[Sync] Connection error:",t),this.connections.delete(e.peer)})}broadcastState(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}broadcastAction(e){this.isHost&&this.connections.forEach(t=>{t.open&&t.send(e)})}sendAction(e){if(this.isHost||!this.peer)return;let t=!1;this.connections.forEach(s=>{s.open&&(s.send(e),t=!0)}),t||(console.log("[Sync] No connection to host. Queuing action:",e.type),this.actionQueue.push(e))}getRoomId(){return this.hostId}getMyPeerId(){var e;return((e=this.peer)==null?void 0:e.id)||null}destroy(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval),this.connections.forEach(e=>e.close()),this.connections.clear(),this.actionQueue=[],this.peer&&(this.peer.destroy(),this.peer=null),this.lockPeer&&(this.lockPeer.destroy(),this.lockPeer=null)}}const it=new rN,sN=()=>{};var bx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},iN=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],u=r[t++],p=r[t++],g=((a&7)<<18|(l&63)<<12|(u&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],u=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},J1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],u=a+1<r.length,p=u?r[a+1]:0,g=a+2<r.length,y=g?r[a+2]:0,b=l>>2,_=(l&3)<<4|p>>4;let T=(p&15)<<2|y>>6,k=y&63;g||(k=64,u||(T=64)),s.push(t[b],t[_],t[T],t[k])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(X1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):iN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],p=a<r.length?t[r.charAt(a)]:0;++a;const y=a<r.length?t[r.charAt(a)]:64;++a;const _=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||p==null||y==null||_==null)throw new aN;const T=l<<2|p>>4;if(s.push(T),y!==64){const k=p<<4&240|y>>2;if(s.push(k),_!==64){const V=y<<6&192|_;s.push(V)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class aN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oN=function(r){const e=X1(r);return J1.encodeByteArray(e,!0)},rd=function(r){return oN(r).replace(/\./g,"")},W1=function(r){try{return J1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=()=>lN().__FIREBASE_DEFAULTS__,uN=()=>{if(typeof process>"u"||typeof bx>"u")return;const r=bx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&W1(r[1]);return e&&JSON.parse(e)},Ad=()=>{try{return sN()||cN()||uN()||hN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Z1=r=>{var e,t;return(t=(e=Ad())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},dN=r=>{const e=Z1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ew=()=>{var r;return(r=Ad())==null?void 0:r.config},tw=r=>{var e;return(e=Ad())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nw(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[rd(JSON.stringify(t)),rd(JSON.stringify(u)),""].join(".")}const jc={};function mN(){const r={prod:[],emulator:[]};for(const e of Object.keys(jc))jc[e]?r.emulator.push(e):r.prod.push(e);return r}function gN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let xx=!1;function rw(r,e){if(typeof window>"u"||typeof document>"u"||!_l(window.location.host)||jc[r]===e||jc[r]||xx)return;jc[r]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=mN().prod.length>0;function u(){const T=document.getElementById(s);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,k){T.setAttribute("width","24"),T.setAttribute("id",k),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{xx=!0,u()},T}function b(T,k){T.setAttribute("id",k),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=gN(s),k=t("text"),V=document.getElementById(k)||document.createElement("span"),$=t("learnmore"),Z=document.getElementById($)||document.createElement("a"),ae=t("preprendIcon"),he=document.getElementById(ae)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const pe=T.element;p(pe),b(Z,$);const ye=y();g(he,ae),pe.append(he,V,Z,ye),document.body.appendChild(pe)}l?(V.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function vN(){var e;const r=(e=Ad())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wN(){const r=Bn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function EN(){return!vN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TN(){try{return typeof indexedDB=="object"}catch{return!1}}function SN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="FirebaseError";class li extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=NN,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,eu.prototype.create)}}class eu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?CN(l,s):"Error",p=`${this.serviceName}: ${u} (${a}).`;return new li(a,p,s)}}function CN(r,e){return r.replace(AN,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const AN=/\{\$([^}]+)}/g;function RN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function eo(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],u=e[a];if(_x(l)&&_x(u)){if(!eo(l,u))return!1}else if(l!==u)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function _x(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Cc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ac(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function kN(r,e){const t=new IN(r,e);return t.subscribe.bind(t)}class IN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");DN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=dm),a.error===void 0&&(a.error=dm),a.complete===void 0&&(a.complete=dm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(r){return r&&r._delegate?r._delegate:r}class to{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new fN;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PN(e))try{this.getOrInitializeService({instanceIdentifier:Ka})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ka){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ka){return this.instances.has(e)}getOptions(e=Ka){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);s===p&&u.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ON(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ka){return this.component?this.component.multipleInstances?e:Ka:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ON(r){return r===Ka?void 0:r}function PN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new jN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const LN={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},VN=Je.INFO,UN={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},zN=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=UN[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=VN,this._logHandler=zN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const BN=(r,e)=>e.some(t=>r instanceof t);let wx,Ex;function HN(){return wx||(wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GN(){return Ex||(Ex=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sw=new WeakMap,Dm=new WeakMap,iw=new WeakMap,fm=new WeakMap,bg=new WeakMap;function qN(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",u)},l=()=>{t(ia(r.result)),a()},u=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&sw.set(t,r)}).catch(()=>{}),bg.set(e,r),e}function FN(r){if(Dm.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",u),r.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",u),r.addEventListener("abort",u)});Dm.set(r,e)}let jm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Dm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||iw.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ia(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $N(r){jm=r(jm)}function YN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(pm(this),e,...t);return iw.set(s,e.sort?e.sort():[e]),ia(s)}:GN().includes(r)?function(...e){return r.apply(pm(this),e),ia(sw.get(this))}:function(...e){return ia(r.apply(pm(this),e))}}function QN(r){return typeof r=="function"?YN(r):(r instanceof IDBTransaction&&FN(r),BN(r,HN())?new Proxy(r,jm):r)}function ia(r){if(r instanceof IDBRequest)return qN(r);if(fm.has(r))return fm.get(r);const e=QN(r);return e!==r&&(fm.set(r,e),bg.set(e,r)),e}const pm=r=>bg.get(r);function KN(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const u=indexedDB.open(r,e),p=ia(u);return s&&u.addEventListener("upgradeneeded",g=>{s(ia(u.result),g.oldVersion,g.newVersion,ia(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const XN=["get","getKey","getAll","getAllKeys","count"],JN=["put","add","delete","clear"],mm=new Map;function Tx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(mm.get(e))return mm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=JN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||XN.includes(t)))return;const l=async function(u,...p){const g=this.transaction(u,a?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),a&&g.done]))[0]};return mm.set(e,l),l}$N(r=>({...r,get:(e,t,s)=>Tx(e,t)||r.get(e,t,s),has:(e,t)=>!!Tx(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function ZN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Om="@firebase/app",Sx="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=new vg("@firebase/app"),eC="@firebase/app-compat",tC="@firebase/analytics-compat",nC="@firebase/analytics",rC="@firebase/app-check-compat",sC="@firebase/app-check",iC="@firebase/auth",aC="@firebase/auth-compat",oC="@firebase/database",lC="@firebase/data-connect",cC="@firebase/database-compat",uC="@firebase/functions",hC="@firebase/functions-compat",dC="@firebase/installations",fC="@firebase/installations-compat",pC="@firebase/messaging",mC="@firebase/messaging-compat",gC="@firebase/performance",yC="@firebase/performance-compat",vC="@firebase/remote-config",bC="@firebase/remote-config-compat",xC="@firebase/storage",_C="@firebase/storage-compat",wC="@firebase/firestore",EC="@firebase/ai",TC="@firebase/firestore-compat",SC="firebase",NC="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="[DEFAULT]",CC={[Om]:"fire-core",[eC]:"fire-core-compat",[nC]:"fire-analytics",[tC]:"fire-analytics-compat",[sC]:"fire-app-check",[rC]:"fire-app-check-compat",[iC]:"fire-auth",[aC]:"fire-auth-compat",[oC]:"fire-rtdb",[lC]:"fire-data-connect",[cC]:"fire-rtdb-compat",[uC]:"fire-fn",[hC]:"fire-fn-compat",[dC]:"fire-iid",[fC]:"fire-iid-compat",[pC]:"fire-fcm",[mC]:"fire-fcm-compat",[gC]:"fire-perf",[yC]:"fire-perf-compat",[vC]:"fire-rc",[bC]:"fire-rc-compat",[xC]:"fire-gcs",[_C]:"fire-gcs-compat",[wC]:"fire-fst",[TC]:"fire-fst-compat",[EC]:"fire-vertex","fire-js":"fire-js",[SC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=new Map,AC=new Map,Mm=new Map;function Nx(r,e){try{r.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function pl(r){const e=r.name;if(Mm.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Mm.set(e,r);for(const t of sd.values())Nx(t,r);for(const t of AC.values())Nx(t,r);return!0}function xg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function zr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new eu("app","Firebase",RC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl=NC;function aw(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Pm,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw aa.create("bad-app-name",{appName:String(a)});if(t||(t=ew()),!t)throw aa.create("no-options");const l=sd.get(a);if(l){if(eo(t,l.options)&&eo(s,l.config))return l;throw aa.create("duplicate-app",{appName:a})}const u=new MN(a);for(const g of Mm.values())u.addComponent(g);const p=new kC(t,s,u);return sd.set(a,p),p}function ow(r=Pm){const e=sd.get(r);if(!e&&r===Pm&&ew())return aw();if(!e)throw aa.create("no-app",{appName:r});return e}function oa(r,e,t){let s=CC[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${s}" with version "${e}":`];a&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(u.join(" "));return}pl(new to(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebase-heartbeat-database",DC=1,Gc="firebase-heartbeat-store";let gm=null;function lw(){return gm||(gm=KN(IC,DC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(r=>{throw aa.create("idb-open",{originalErrorMessage:r.message})})),gm}async function jC(r){try{const t=(await lw()).transaction(Gc),s=await t.objectStore(Gc).get(cw(r));return await t.done,s}catch(e){if(e instanceof li)si.warn(e.message);else{const t=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});si.warn(t.message)}}}async function Cx(r,e){try{const s=(await lw()).transaction(Gc,"readwrite");await s.objectStore(Gc).put(e,cw(r)),await s.done}catch(t){if(t instanceof li)si.warn(t.message);else{const s=aa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});si.warn(s.message)}}}function cw(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=1024,PC=30;class MC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new VC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ax();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>PC){const u=UC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){si.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ax(),{heartbeatsToSend:s,unsentEntries:a}=LC(this._heartbeatsCache.heartbeats),l=rd(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return si.warn(t),""}}}function Ax(){return new Date().toISOString().substring(0,10)}function LC(r,e=OC){const t=[];let s=r.slice();for(const a of r){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Rx(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Rx(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class VC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TN()?SN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Rx(r){return rd(JSON.stringify({version:2,heartbeats:r})).length}function UC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(r){pl(new to("platform-logger",e=>new WN(e),"PRIVATE")),pl(new to("heartbeat",e=>new MC(e),"PRIVATE")),oa(Om,Sx,r),oa(Om,Sx,"esm2020"),oa("fire-js","")}zC("");var BC="firebase",HC="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oa(BC,HC,"app");function uw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GC=uw,hw=new eu("auth","Firebase",uw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new vg("@firebase/auth");function qC(r,...e){id.logLevel<=Je.WARN&&id.warn(`Auth (${wl}): ${r}`,...e)}function Gh(r,...e){id.logLevel<=Je.ERROR&&id.error(`Auth (${wl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(r,...e){throw _g(r,...e)}function Ns(r,...e){return _g(r,...e)}function dw(r,e,t){const s={...GC(),[e]:t};return new eu("auth","Firebase",s).create(e,{appName:r.name})}function ni(r){return dw(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _g(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return hw.create(r,...e)}function ke(r,e,...t){if(!r)throw _g(e,...t)}function ei(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gh(e),new Error(e)}function ii(r,e){r||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function FC(){return kx()==="http:"||kx()==="https:"}function kx(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FC()||xN()||"connection"in navigator)?navigator.onLine:!0}function YC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=yN()||_N()}get(){return $C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(r,e){ii(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XC=new nu(3e4,6e4);function ya(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function va(r,e,t,s,a={}){return pw(r,a,async()=>{let l={},u={};s&&(e==="GET"?u=s:l={body:JSON.stringify(s)});const p=tu({key:r.config.apiKey,...u}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...l};return bN()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&_l(r.emulatorConfig.host)&&(y.credentials="include"),fw.fetch()(await mw(r,r.config.apiHost,t,p),y)})}async function pw(r,e,t){r._canInitEmulator=!1;const s={...QC,...e};try{const a=new WC(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw Ih(r,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const p=l.ok?u.errorMessage:u.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ih(r,"credential-already-in-use",u);if(g==="EMAIL_EXISTS")throw Ih(r,"email-already-in-use",u);if(g==="USER_DISABLED")throw Ih(r,"user-disabled",u);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw dw(r,b,y);is(r,b)}}catch(a){if(a instanceof li)throw a;is(r,"network-request-failed",{message:String(a)})}}async function ru(r,e,t,s,a={}){const l=await va(r,e,t,s,a);return"mfaPendingCredential"in l&&is(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function mw(r,e,t,s){const a=`${e}${t}?${s}`,l=r,u=l.config.emulator?wg(r.config,a):`${r.config.apiScheme}://${a}`;return KC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function JC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ns(this.auth,"network-request-failed")),XC.get())})}}function Ih(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Ns(r,e,s);return a.customData._tokenResponse=t,a}function Ix(r){return r!==void 0&&r.enterprise!==void 0}class ZC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eA(r,e){return va(r,"GET","/v2/recaptchaConfig",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(r,e){return va(r,"POST","/v1/accounts:delete",e)}async function ad(r,e){return va(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nA(r,e=!1){const t=bn(r),s=await t.getIdToken(e),a=Eg(s);ke(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Oc(ym(a.auth_time)),issuedAtTime:Oc(ym(a.iat)),expirationTime:Oc(ym(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function ym(r){return Number(r)*1e3}function Eg(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const a=W1(t);return a?JSON.parse(a):(Gh("Failed to decode base64 JWT payload"),null)}catch(a){return Gh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Dx(r){const e=Eg(r);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof li&&rA(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function rA({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oc(this.lastLoginAt),this.creationTime=Oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(r){var _;const e=r.auth,t=await r.getIdToken(),s=await qc(r,ad(e,{idToken:t}));ke(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?gw(a.providerUserInfo):[],u=aA(r.providerData,l),p=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(u!=null&&u.length),y=p?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Vm(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(r,b)}async function iA(r){const e=bn(r);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aA(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function gw(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(r,e){const t=await pw(r,{},async()=>{const s=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,u=await mw(r,a,"/v1/token",`key=${l}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&_l(r.emulatorConfig.host)&&(g.credentials="include"),fw.fetch()(u,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lA(r,e){return va(r,"POST","/v2/accounts:revokeToken",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Dx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await oA(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,u=new cl;return s&&(ke(typeof s=="string","internal-error",{appName:e}),u.refreshToken=s),a&&(ke(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(ke(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(r,e){ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ns{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new sA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await qc(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nA(this,e)}reload(){return iA(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ns({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await od(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zr(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await qc(this,tA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:k,providerData:V,stsTokenManager:$}=t;ke(_&&$,e,"internal-error");const Z=cl.fromJSON(this.name,$);ke(typeof _=="string",e,"internal-error"),$i(s,e.name),$i(a,e.name),ke(typeof T=="boolean",e,"internal-error"),ke(typeof k=="boolean",e,"internal-error"),$i(l,e.name),$i(u,e.name),$i(p,e.name),$i(g,e.name),$i(y,e.name),$i(b,e.name);const ae=new ns({uid:_,auth:e,email:a,emailVerified:T,displayName:s,isAnonymous:k,photoURL:u,phoneNumber:l,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:b});return V&&Array.isArray(V)&&(ae.providerData=V.map(he=>({...he}))),g&&(ae._redirectEventId=g),ae}static async _fromIdTokenResponse(e,t,s=!1){const a=new cl;a.updateFromServerResponse(t);const l=new ns({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await od(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];ke(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?gw(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),p=new cl;p.updateFromIdToken(s);const g=new ns({uid:a.localId,auth:e,stsTokenManager:p,isAnonymous:u}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Vm(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Map;function ti(r){ii(r instanceof Function,"Expected a class definition");let e=jx.get(r);return e?(ii(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,jx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yw.type="NONE";const Ox=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r,e,t){return`firebase:${r}:${e}:${t}`}class ul{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=qh(this.userKey,a.apiKey,l),this.fullPersistenceKey=qh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ad(this.auth,{idToken:e}).catch(()=>{});return t?ns._fromGetAccountInfoResponse(this.auth,t,e):null}return ns._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ul(ti(Ox),e,s);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||ti(Ox);const u=qh(s,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(u);if(b){let _;if(typeof b=="string"){const T=await ad(e,{idToken:b}).catch(()=>{});if(!T)break;_=await ns._fromGetAccountInfoResponse(e,T,b)}else _=ns._fromJSON(e,b);y!==l&&(p=_),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new ul(l,e,s):(l=g[0],p&&await l._set(u,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(u)}catch{}})),new ul(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_w(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ew(e))return"Blackberry";if(Tw(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||xw(e))&&!e.includes("edge/"))return"Chrome";if(ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vw(r=Bn()){return/firefox\//i.test(r)}function bw(r=Bn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xw(r=Bn()){return/crios\//i.test(r)}function _w(r=Bn()){return/iemobile/i.test(r)}function ww(r=Bn()){return/android/i.test(r)}function Ew(r=Bn()){return/blackberry/i.test(r)}function Tw(r=Bn()){return/webos/i.test(r)}function Tg(r=Bn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function cA(r=Bn()){var e;return Tg(r)&&!!((e=window.navigator)!=null&&e.standalone)}function uA(){return wN()&&document.documentMode===10}function Sw(r=Bn()){return Tg(r)||ww(r)||Tw(r)||Ew(r)||/windows phone/i.test(r)||_w(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(r,e=[]){let t;switch(r){case"Browser":t=Px(Bn());break;case"Worker":t=`${Px(Bn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((u,p)=>{try{const g=e(l);u(g)}catch(g){p(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(r,e={}){return va(r,"GET","/v2/passwordPolicy",ya(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=6;class pA{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mx(this),this.idTokenSubscription=new Mx(this),this.beforeStateQueue=new hA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ti(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ad(this,{idToken:e}),s=await ns._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(zr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(p,p))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,p=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!u||u===p)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zr(this.app))return Promise.reject(ni(this));const t=e?bn(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zr(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zr(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dA(this),t=new pA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new eu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await lA(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ti(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(p,this,"internal-error"),p.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{u=!0,g()}}else{const g=e.addObserver(t);return()=>{u=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(zr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&qC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ho(r){return bn(r)}class Mx{constructor(e){this.auth=e,this.observer=null,this.addObserver=kN(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gA(r){Rd=r}function Cw(r){return Rd.loadJS(r)}function yA(){return Rd.recaptchaEnterpriseScript}function vA(){return Rd.gapiScript}function bA(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class xA{constructor(){this.enterprise=new _A}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _A{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const wA="recaptcha-enterprise",Aw="NO_RECAPTCHA";class EA{constructor(e){this.type=wA,this.auth=ho(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,p)=>{eA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new ZC(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,u(y.siteKey)}}).catch(g=>{p(g)})})}function a(l,u,p){const g=window.grecaptcha;Ix(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{u(y)}).catch(()=>{u(Aw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xA().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{s(this.auth).then(p=>{if(!t&&Ix(window.grecaptcha))a(p,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let g=yA();g.length!==0&&(g+=p),Cw(g).then(()=>{a(p,l,u)}).catch(y=>{u(y)})}}).catch(p=>{u(p)})})}}async function Lx(r,e,t,s=!1,a=!1){const l=new EA(r);let u;if(a)u=Aw;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:u}):Object.assign(p,{captchaResponse:u}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Um(r,e,t,s,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Lx(r,e,t,t==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await Lx(r,e,t,t==="getOobCode");return s(r,p)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(r,e){const t=xg(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(eo(l,e??{}))return a;is(a,"already-initialized")}return t.initialize({options:e})}function SA(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ti);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function NA(r,e,t){const s=ho(r);ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=Rw(e),{host:u,port:p}=CA(e),g=p===null?"":`:${p}`,y={url:`${l}//${u}${g}/`},b=Object.freeze({host:u,port:p,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ke(eo(y,s.config.emulator)&&eo(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,_l(u)?(nw(`${l}//${u}${g}`),rw("Auth",!0)):AA()}function Rw(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function CA(r){const e=Rw(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:Vx(s.substr(l.length+1))}}else{const[l,u]=s.split(":");return{host:l,port:Vx(u)}}}function Vx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function AA(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function RA(r,e){return va(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(r,e){return ru(r,"POST","/v1/accounts:signInWithPassword",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(r,e){return ru(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}async function DA(r,e){return ru(r,"POST","/v1/accounts:signInWithEmailLink",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Sg{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Fc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Fc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,t,"signInWithPassword",kA);case"emailLink":return IA(e,{email:this._email,oobCode:this._password});default:is(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,s,"signUpPassword",RA);case"emailLink":return DA(e,{idToken:t,email:this._email,oobCode:this._password});default:is(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(r,e){return ru(r,"POST","/v1/accounts:signInWithIdp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="http://localhost";class no extends Sg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):is("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const u=new no(s,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return hl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,hl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hl(e,t)}buildRequest(){const e={requestUri:jA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PA(r){const e=Cc(Ac(r)).link,t=e?Cc(Ac(e)).deep_link_id:null,s=Cc(Ac(r)).deep_link_id;return(s?Cc(Ac(s)).link:null)||s||t||e||r}class Ng{constructor(e){const t=Cc(Ac(e)),s=t.apiKey??null,a=t.oobCode??null,l=OA(t.mode??null);ke(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=PA(e);try{return new Ng(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,t){return Fc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Ng.parseLink(t);return ke(s,"argument-error"),Fc._fromEmailAndCode(e,s.code,s.tenantId)}}El.PROVIDER_ID="password";El.EMAIL_PASSWORD_SIGN_IN_METHOD="password";El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends kw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends su{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends su{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return no._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ji.credential(t,s)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends su{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends su{constructor(){super("twitter.com")}static credential(e,t){return no._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Zi.credential(t,s)}catch{return null}}}Zi.TWITTER_SIGN_IN_METHOD="twitter.com";Zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(r,e){return ru(r,"POST","/v1/accounts:signUp",ya(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await ns._fromIdTokenResponse(e,s,a),u=Ux(s);return new ro({user:l,providerId:u,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Ux(s);return new ro({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Ux(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends li{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new ld(e,t,s,a)}}function Iw(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(r,l,e,s):l})}async function LA(r,e,t=!1){const s=await qc(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ro._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(r,e,t=!1){const{auth:s}=r;if(zr(s.app))return Promise.reject(ni(s));const a="reauthenticate";try{const l=await qc(r,Iw(s,a,e,r),t);ke(l.idToken,s,"internal-error");const u=Eg(l.idToken);ke(u,s,"internal-error");const{sub:p}=u;return ke(r.uid===p,s,"user-mismatch"),ro._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&is(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(r,e,t=!1){if(zr(r.app))return Promise.reject(ni(r));const s="signIn",a=await Iw(r,s,e),l=await ro._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}async function UA(r,e){return Dw(ho(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(r){const e=ho(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zA(r,e,t){if(zr(r.app))return Promise.reject(ni(r));const s=ho(r),u=await Um(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jw(r),g}),p=await ro._fromIdTokenResponse(s,"signIn",u);return await s._updateCurrentUser(p.user),p}function BA(r,e,t){return zr(r.app)?Promise.reject(ni(r)):UA(bn(r),El.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&jw(r),s})}function HA(r,e,t,s){return bn(r).onIdTokenChanged(e,t,s)}function GA(r,e,t){return bn(r).beforeAuthStateChanged(e,t)}function qA(r){return bn(r).signOut()}const cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=1e3,$A=10;class Pw extends Ow{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,p,g)=>{this.notifyListeners(u,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(s);!t&&this.localCache[s]===u||this.notifyListeners(s,u)},l=this.storage.getItem(s);uA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,$A):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},FA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pw.type="LOCAL";const YA=Pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Ow{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mw.type="SESSION";const Lw=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new kd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const p=Array.from(u).map(async y=>y(t.origin,l)),g=await QA(p);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((p,g)=>{const y=Cg("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(_){const T=_;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),p(T.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return window}function XA(r){Cs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function JA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function ZA(){return Vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firebaseLocalStorageDb",eR=1,ud="firebaseLocalStorage",zw="fbase_key";class iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Id(r,e){return r.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function tR(){const r=indexedDB.deleteDatabase(Uw);return new iu(r).toPromise()}function zm(){const r=indexedDB.open(Uw,eR);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ud,{keyPath:zw})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ud)?e(s):(s.close(),await tR(),e(await zm()))})})}async function zx(r,e,t){const s=Id(r,!0).put({[zw]:e,value:t});return new iu(s).toPromise()}async function nR(r,e){const t=Id(r,!1).get(e),s=await new iu(t).toPromise();return s===void 0?null:s.value}function Bx(r,e){const t=Id(r,!0).delete(e);return new iu(t).toPromise()}const rR=800,sR=3;class Bw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>sR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kd._getInstance(ZA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await JA(),!this.activeServiceWorker)return;this.sender=new KA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zm();return await zx(e,cd,"1"),await Bx(e,cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>zx(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>nR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Id(a,!1).getAll();return new iu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bw.type="LOCAL";const iR=Bw;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(r,e){return e?ti(e):(ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends Sg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oR(r){return Dw(r.auth,new Ag(r),r.bypassAuthState)}function lR(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),VA(t,new Ag(r),r.bypassAuthState)}async function cR(r){const{auth:e,user:t}=r;return ke(t,e,"internal-error"),LA(t,new Ag(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:u,type:p}=e;if(u){this.reject(u);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return lR;default:is(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new nu(2e3,1e4);class ol extends Hw{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,ol.currentPopupAction&&ol.currentPopupAction.cancel(),ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uR.get())};e()}}ol.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="pendingRedirect",Fh=new Map;class dR extends Hw{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const s=await fR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fR(r,e){const t=gR(e),s=mR(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function pR(r,e){Fh.set(r._key(),e)}function mR(r){return ti(r._redirectPersistence)}function gR(r){return qh(hR,r.config.apiKey,r.name)}async function yR(r,e,t=!1){if(zr(r.app))return Promise.reject(ni(r));const s=ho(r),a=aR(s,e),u=await new dR(s,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await s._persistUserIfCurrent(u.user),await s._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=600*1e3;class bR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Gw(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ns(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hx(e))}saveEventToCache(e){this.cachedEventUids.add(Hx(e)),this.lastProcessedEventTime=Date.now()}}function Hx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Gw({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gw(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(r,e={}){return va(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ER=/^https?/;async function TR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await _R(r);for(const t of e)try{if(SR(t))return}catch{}is(r,"unauthorized-domain")}function SR(r){const e=Lm(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===s}if(!ER.test(t))return!1;if(wR.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new nu(3e4,6e4);function Gx(){const r=Cs().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function CR(r){return new Promise((e,t)=>{var a,l,u;function s(){Gx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gx(),t(Ns(r,"network-request-failed"))},timeout:NR.get()})}if((l=(a=Cs().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=Cs().gapi)!=null&&u.load)s();else{const p=bA("iframefcb");return Cs()[p]=()=>{gapi.load?s():t(Ns(r,"network-request-failed"))},Cw(`${vA()}?onload=${p}`).catch(g=>t(g))}}).catch(e=>{throw $h=null,e})}let $h=null;function AR(r){return $h=$h||CR(r),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new nu(5e3,15e3),kR="__/auth/iframe",IR="emulator/auth/iframe",DR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OR(r){const e=r.config;ke(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?wg(e,IR):`https://${r.config.authDomain}/${kR}`,s={apiKey:e.apiKey,appName:r.name,v:wl},a=jR.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${tu(s).slice(1)}`}async function PR(r){const e=await AR(r),t=Cs().gapi;return ke(t,r,"internal-error"),e.open({where:document.body,url:OR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DR,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const u=Ns(r,"network-request-failed"),p=Cs().setTimeout(()=>{l(u)},RR.get());function g(){Cs().clearTimeout(p),a(s)}s.ping(g).then(g,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LR=500,VR=600,UR="_blank",zR="http://localhost";class qx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BR(r,e,t,s=LR,a=VR){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...MR,width:s.toString(),height:a.toString(),top:l,left:u},y=Bn().toLowerCase();t&&(p=xw(y)?UR:t),vw(y)&&(e=e||zR,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[k,V])=>`${T}${k}=${V},`,"");if(cA(y)&&p!=="_self")return HR(e||"",p),new qx(null);const _=window.open(e||"",p,b);ke(_,r,"popup-blocked");try{_.focus()}catch{}return new qx(_)}function HR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="__/auth/handler",qR="emulator/auth/handler",FR=encodeURIComponent("fac");async function Fx(r,e,t,s,a,l){ke(r.config.authDomain,r,"auth-domain-config-required"),ke(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:wl,eventId:a};if(e instanceof kw){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",RN(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,_]of Object.entries({}))u[b]=_}if(e instanceof su){const b=e.getScopes().filter(_=>_!=="");b.length>0&&(u.scopes=b.join(","))}r.tenantId&&(u.tid=r.tenantId);const p=u;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await r._getAppCheckToken(),y=g?`#${FR}=${encodeURIComponent(g)}`:"";return`${$R(r)}?${tu(p).slice(1)}${y}`}function $R({config:r}){return r.emulator?wg(r,qR):`https://${r.authDomain}/${GR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="webStorageSupport";class YR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lw,this._completeRedirectFn=yR,this._overrideRedirectResult=pR}async _openPopup(e,t,s,a){var u;ii((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await Fx(e,t,s,Lm(),a);return BR(e,l,Cg())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Fx(e,t,s,Lm(),a);return XA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ii(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await PR(e),s=new bR(e);return t.register("authEvent",a=>(ke(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vm,{type:vm},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[vm];l!==void 0&&t(!!l),is(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=TR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sw()||bw()||Tg()}}const QR=YR;var $x="@firebase/auth",Yx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JR(r){pl(new to("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:p}=s.options;ke(u&&!u.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:u,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nw(r)},y=new mA(s,a,l,g);return SA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),pl(new to("auth-internal",e=>{const t=ho(e.getProvider("auth").getImmediate());return(s=>new KR(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oa($x,Yx,XR(r)),oa($x,Yx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=300,ZR=tw("authIdTokenMaxAge")||WR;let Qx=null;const ek=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>ZR)return;const a=t==null?void 0:t.token;Qx!==a&&(Qx=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function tk(r=ow()){const e=xg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=TA(r,{popupRedirectResolver:QR,persistence:[iR,YA,Lw]}),s=tw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const u=ek(l.toString());GA(t,u,()=>u(t.currentUser)),HA(t,p=>u(p))}}const a=Z1("auth");return a&&NA(t,`http://${a}`),t}function nk(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}gA({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=Ns("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",nk().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JR("Browser");var Kx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var la,qw;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function R(){}R.prototype=C.prototype,A.F=C.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(L,j,O){for(var I=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)I[rt-2]=arguments[rt];return C.prototype[j].apply(L,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,C,R){R||(R=0);const L=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)L[j]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(j=0;j<16;++j)L[j]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=A.g[0],R=A.g[1],j=A.g[2];let O=A.g[3],I;I=C+(O^R&(j^O))+L[0]+3614090360&4294967295,C=R+(I<<7&4294967295|I>>>25),I=O+(j^C&(R^j))+L[1]+3905402710&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(R^O&(C^R))+L[2]+606105819&4294967295,j=O+(I<<17&4294967295|I>>>15),I=R+(C^j&(O^C))+L[3]+3250441966&4294967295,R=j+(I<<22&4294967295|I>>>10),I=C+(O^R&(j^O))+L[4]+4118548399&4294967295,C=R+(I<<7&4294967295|I>>>25),I=O+(j^C&(R^j))+L[5]+1200080426&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(R^O&(C^R))+L[6]+2821735955&4294967295,j=O+(I<<17&4294967295|I>>>15),I=R+(C^j&(O^C))+L[7]+4249261313&4294967295,R=j+(I<<22&4294967295|I>>>10),I=C+(O^R&(j^O))+L[8]+1770035416&4294967295,C=R+(I<<7&4294967295|I>>>25),I=O+(j^C&(R^j))+L[9]+2336552879&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(R^O&(C^R))+L[10]+4294925233&4294967295,j=O+(I<<17&4294967295|I>>>15),I=R+(C^j&(O^C))+L[11]+2304563134&4294967295,R=j+(I<<22&4294967295|I>>>10),I=C+(O^R&(j^O))+L[12]+1804603682&4294967295,C=R+(I<<7&4294967295|I>>>25),I=O+(j^C&(R^j))+L[13]+4254626195&4294967295,O=C+(I<<12&4294967295|I>>>20),I=j+(R^O&(C^R))+L[14]+2792965006&4294967295,j=O+(I<<17&4294967295|I>>>15),I=R+(C^j&(O^C))+L[15]+1236535329&4294967295,R=j+(I<<22&4294967295|I>>>10),I=C+(j^O&(R^j))+L[1]+4129170786&4294967295,C=R+(I<<5&4294967295|I>>>27),I=O+(R^j&(C^R))+L[6]+3225465664&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^R&(O^C))+L[11]+643717713&4294967295,j=O+(I<<14&4294967295|I>>>18),I=R+(O^C&(j^O))+L[0]+3921069994&4294967295,R=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(R^j))+L[5]+3593408605&4294967295,C=R+(I<<5&4294967295|I>>>27),I=O+(R^j&(C^R))+L[10]+38016083&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^R&(O^C))+L[15]+3634488961&4294967295,j=O+(I<<14&4294967295|I>>>18),I=R+(O^C&(j^O))+L[4]+3889429448&4294967295,R=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(R^j))+L[9]+568446438&4294967295,C=R+(I<<5&4294967295|I>>>27),I=O+(R^j&(C^R))+L[14]+3275163606&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^R&(O^C))+L[3]+4107603335&4294967295,j=O+(I<<14&4294967295|I>>>18),I=R+(O^C&(j^O))+L[8]+1163531501&4294967295,R=j+(I<<20&4294967295|I>>>12),I=C+(j^O&(R^j))+L[13]+2850285829&4294967295,C=R+(I<<5&4294967295|I>>>27),I=O+(R^j&(C^R))+L[2]+4243563512&4294967295,O=C+(I<<9&4294967295|I>>>23),I=j+(C^R&(O^C))+L[7]+1735328473&4294967295,j=O+(I<<14&4294967295|I>>>18),I=R+(O^C&(j^O))+L[12]+2368359562&4294967295,R=j+(I<<20&4294967295|I>>>12),I=C+(R^j^O)+L[5]+4294588738&4294967295,C=R+(I<<4&4294967295|I>>>28),I=O+(C^R^j)+L[8]+2272392833&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^R)+L[11]+1839030562&4294967295,j=O+(I<<16&4294967295|I>>>16),I=R+(j^O^C)+L[14]+4259657740&4294967295,R=j+(I<<23&4294967295|I>>>9),I=C+(R^j^O)+L[1]+2763975236&4294967295,C=R+(I<<4&4294967295|I>>>28),I=O+(C^R^j)+L[4]+1272893353&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^R)+L[7]+4139469664&4294967295,j=O+(I<<16&4294967295|I>>>16),I=R+(j^O^C)+L[10]+3200236656&4294967295,R=j+(I<<23&4294967295|I>>>9),I=C+(R^j^O)+L[13]+681279174&4294967295,C=R+(I<<4&4294967295|I>>>28),I=O+(C^R^j)+L[0]+3936430074&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^R)+L[3]+3572445317&4294967295,j=O+(I<<16&4294967295|I>>>16),I=R+(j^O^C)+L[6]+76029189&4294967295,R=j+(I<<23&4294967295|I>>>9),I=C+(R^j^O)+L[9]+3654602809&4294967295,C=R+(I<<4&4294967295|I>>>28),I=O+(C^R^j)+L[12]+3873151461&4294967295,O=C+(I<<11&4294967295|I>>>21),I=j+(O^C^R)+L[15]+530742520&4294967295,j=O+(I<<16&4294967295|I>>>16),I=R+(j^O^C)+L[2]+3299628645&4294967295,R=j+(I<<23&4294967295|I>>>9),I=C+(j^(R|~O))+L[0]+4096336452&4294967295,C=R+(I<<6&4294967295|I>>>26),I=O+(R^(C|~j))+L[7]+1126891415&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~R))+L[14]+2878612391&4294967295,j=O+(I<<15&4294967295|I>>>17),I=R+(O^(j|~C))+L[5]+4237533241&4294967295,R=j+(I<<21&4294967295|I>>>11),I=C+(j^(R|~O))+L[12]+1700485571&4294967295,C=R+(I<<6&4294967295|I>>>26),I=O+(R^(C|~j))+L[3]+2399980690&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~R))+L[10]+4293915773&4294967295,j=O+(I<<15&4294967295|I>>>17),I=R+(O^(j|~C))+L[1]+2240044497&4294967295,R=j+(I<<21&4294967295|I>>>11),I=C+(j^(R|~O))+L[8]+1873313359&4294967295,C=R+(I<<6&4294967295|I>>>26),I=O+(R^(C|~j))+L[15]+4264355552&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~R))+L[6]+2734768916&4294967295,j=O+(I<<15&4294967295|I>>>17),I=R+(O^(j|~C))+L[13]+1309151649&4294967295,R=j+(I<<21&4294967295|I>>>11),I=C+(j^(R|~O))+L[4]+4149444226&4294967295,C=R+(I<<6&4294967295|I>>>26),I=O+(R^(C|~j))+L[11]+3174756917&4294967295,O=C+(I<<10&4294967295|I>>>22),I=j+(C^(O|~R))+L[2]+718787259&4294967295,j=O+(I<<15&4294967295|I>>>17),I=R+(O^(j|~C))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(j+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+O&4294967295}s.prototype.v=function(A,C){C===void 0&&(C=A.length);const R=C-this.blockSize,L=this.C;let j=this.h,O=0;for(;O<C;){if(j==0)for(;O<=R;)a(this,A,O),O+=this.blockSize;if(typeof A=="string"){for(;O<C;)if(L[j++]=A.charCodeAt(O++),j==this.blockSize){a(this,L),j=0;break}}else for(;O<C;)if(L[j++]=A[O++],j==this.blockSize){a(this,L),j=0;break}}this.h=j,this.o+=C},s.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)A[C++]=this.g[R]>>>L&255;return A};function l(A,C){var R=p;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=C(A)}function u(A,C){this.h=C;const R=[];let L=!0;for(let j=A.length-1;j>=0;j--){const O=A[j]|0;L&&O==C||(R[j]=O,L=!1)}this.g=R}var p={};function g(A){return-128<=A&&A<128?l(A,function(C){return new u([C|0],C<0?-1:0)}):new u([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return _;if(A<0)return Z(y(-A));const C=[];let R=1;for(let L=0;A>=R;L++)C[L]=A/R|0,R*=4294967296;return new u(C,0)}function b(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return Z(b(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(C,8));let L=_;for(let O=0;O<A.length;O+=8){var j=Math.min(8,A.length-O);const I=parseInt(A.substring(O,O+j),C);j<8?(j=y(Math.pow(C,j)),L=L.j(j).add(y(I))):(L=L.j(R),L=L.add(y(I)))}return L}var _=g(0),T=g(1),k=g(16777216);r=u.prototype,r.m=function(){if($(this))return-Z(this).m();let A=0,C=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);A+=(L>=0?L:4294967296+L)*C,C*=4294967296}return A},r.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if($(this))return"-"+Z(this).toString(A);const C=y(Math.pow(A,6));var R=this;let L="";for(;;){const j=ye(R,C).g;R=ae(R,j.j(C));let O=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=j,V(R))return O+L;for(;O.length<6;)O="0"+O;L=O+L}},r.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function $(A){return A.h==-1}r.l=function(A){return A=ae(this,A),$(A)?-1:V(A)?0:1};function Z(A){const C=A.g.length,R=[];for(let L=0;L<C;L++)R[L]=~A.g[L];return new u(R,~A.h).add(T)}r.abs=function(){return $(this)?Z(this):this},r.add=function(A){const C=Math.max(this.g.length,A.g.length),R=[];let L=0;for(let j=0;j<=C;j++){let O=L+(this.i(j)&65535)+(A.i(j)&65535),I=(O>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);L=I>>>16,O&=65535,I&=65535,R[j]=I<<16|O}return new u(R,R[R.length-1]&-2147483648?-1:0)};function ae(A,C){return A.add(Z(C))}r.j=function(A){if(V(this)||V(A))return _;if($(this))return $(A)?Z(this).j(Z(A)):Z(Z(this).j(A));if($(A))return Z(this.j(Z(A)));if(this.l(k)<0&&A.l(k)<0)return y(this.m()*A.m());const C=this.g.length+A.g.length,R=[];for(var L=0;L<2*C;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let j=0;j<A.g.length;j++){const O=this.i(L)>>>16,I=this.i(L)&65535,rt=A.i(j)>>>16,bt=A.i(j)&65535;R[2*L+2*j]+=I*bt,he(R,2*L+2*j),R[2*L+2*j+1]+=O*bt,he(R,2*L+2*j+1),R[2*L+2*j+1]+=I*rt,he(R,2*L+2*j+1),R[2*L+2*j+2]+=O*rt,he(R,2*L+2*j+2)}for(A=0;A<C;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=C;A<2*C;A++)R[A]=0;return new u(R,0)};function he(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function pe(A,C){this.g=A,this.h=C}function ye(A,C){if(V(C))throw Error("division by zero");if(V(A))return new pe(_,_);if($(A))return C=ye(Z(A),C),new pe(Z(C.g),Z(C.h));if($(C))return C=ye(A,Z(C)),new pe(Z(C.g),C.h);if(A.g.length>30){if($(A)||$(C))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=C;L.l(A)<=0;)R=De(R),L=De(L);var j=Ee(R,1),O=Ee(L,1);for(L=Ee(L,2),R=Ee(R,2);!V(L);){var I=O.add(L);I.l(A)<=0&&(j=j.add(R),O=I),L=Ee(L,1),R=Ee(R,1)}return C=ae(A,j.j(C)),new pe(j,C)}for(j=_;A.l(C)>=0;){for(R=Math.max(1,Math.floor(A.m()/C.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),O=y(R),I=O.j(C);$(I)||I.l(A)>0;)R-=L,O=y(R),I=O.j(C);V(O)&&(O=T),j=j.add(O),A=ae(A,I)}return new pe(j,A)}r.B=function(A){return ye(this,A).h},r.and=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)&A.i(L);return new u(R,this.h&A.h)},r.or=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)|A.i(L);return new u(R,this.h|A.h)},r.xor=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<C;L++)R[L]=this.i(L)^A.i(L);return new u(R,this.h^A.h)};function De(A){const C=A.g.length+1,R=[];for(let L=0;L<C;L++)R[L]=A.i(L)<<1|A.i(L-1)>>>31;return new u(R,A.h)}function Ee(A,C){const R=C>>5;C%=32;const L=A.g.length-R,j=[];for(let O=0;O<L;O++)j[O]=C>0?A.i(O+R)>>>C|A.i(O+R+1)<<32-C:A.i(O+R);return new u(j,A.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,qw=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=y,u.fromString=b,la=u}).apply(typeof Kx<"u"?Kx:typeof self<"u"?self:typeof window<"u"?window:{});var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fw,Rc,$w,Yh,Bm,Yw,Qw,Kw;(function(){var r,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dh=="object"&&Dh];for(var v=0;v<d.length;++v){var w=d[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(d,v){if(v)e:{var w=s;d=d.split(".");for(var N=0;N<d.length-1;N++){var B=d[N];if(!(B in w))break e;w=w[B]}d=d[d.length-1],N=w[d],v=v(N),v!=N&&v!=null&&e(w,d,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(d){return d||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,w){return d.call.apply(d.bind,arguments)}function y(d,v,w){return y=g,y.apply(null,arguments)}function b(d,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function _(d,v){function w(){}w.prototype=v.prototype,d.Z=v.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(N,B,F){for(var ce=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)ce[Be-2]=arguments[Be];return v.prototype[B].apply(N,ce)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function k(d){const v=d.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=d[N];return w}return[]}function V(d,v){for(let N=1;N<arguments.length;N++){const B=arguments[N];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=d.length||0;const F=B.length||0;d.length=w+F;for(let ce=0;ce<F;ce++)d[w+ce]=B[ce]}else d.push(B)}}class ${constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Z(d){u.setTimeout(()=>{throw d},0)}function ae(){var d=A;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class he{constructor(){this.h=this.g=null}add(v,w){const N=pe.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var pe=new $(()=>new ye,d=>d.reset());class ye{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let De,Ee=!1,A=new he,C=()=>{const d=Promise.resolve(void 0);De=()=>{d.then(R)}};function R(){for(var d;d=ae();){try{d.h.call(d.g)}catch(w){Z(w)}var v=pe;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Ee=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};u.addEventListener("test",w,v),u.removeEventListener("test",w,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function rt(d,v){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}_(rt,j),rt.prototype.init=function(d,v){const w=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(w=="mouseover"?v=d.fromElement:w=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function le(d,v,w,N,B){this.listener=d,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=B,this.key=++Q,this.da=this.fa=!1}function we(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ge(d,v,w){for(const N in d)v.call(w,d[N],N,d)}function et(d,v){for(const w in d)v.call(void 0,d[w],w,d)}function P(d){const v={};for(const w in d)v[w]=d[w];return v}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(d,v){let w,N;for(let B=1;B<arguments.length;B++){N=arguments[B];for(w in N)d[w]=N[w];for(let F=0;F<K.length;F++)w=K[F],Object.prototype.hasOwnProperty.call(N,w)&&(d[w]=N[w])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,v,w,N,B){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const ce=je(d,v,N,B);return ce>-1?(v=d[ce],w||(v.fa=!1)):(v=new le(v,this.src,F,!!N,B),v.fa=w,d.push(v)),v};function Ne(d,v){const w=v.type;if(w in d.g){var N=d.g[w],B=Array.prototype.indexOf.call(N,v,void 0),F;(F=B>=0)&&Array.prototype.splice.call(N,B,1),F&&(we(v),d.g[w].length==0&&(delete d.g[w],d.h--))}}function je(d,v,w,N){for(let B=0;B<d.length;++B){const F=d[B];if(!F.da&&F.listener==v&&F.capture==!!w&&F.ha==N)return B}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),dt={};function ft(d,v,w,N,B){if(Array.isArray(v)){for(let F=0;F<v.length;F++)ft(d,v[F],w,N,B);return null}return w=Ht(w),d&&d[bt]?d.J(v,w,p(N)?!!N.capture:!1,B):Hn(d,v,w,!1,N,B)}function Hn(d,v,w,N,B,F){if(!v)throw Error("Invalid event type");const ce=p(B)?!!B.capture:!!B;let Be=qe(d);if(Be||(d[Re]=Be=new de(d)),w=Be.add(v,w,N,ce,F),w.proxy)return w;if(N=os(),w.proxy=N,N.src=d,N.listener=w,d.addEventListener)O||(B=ce),B===void 0&&(B=!1),d.addEventListener(v.toString(),N,B);else if(d.attachEvent)d.attachEvent(se(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function os(){function d(w){return v.call(d.src,d.listener,w)}const v=me;return d}function Ds(d,v,w,N,B){if(Array.isArray(v))for(var F=0;F<v.length;F++)Ds(d,v[F],w,N,B);else N=p(N)?!!N.capture:!!N,w=Ht(w),d&&d[bt]?(d=d.i,F=String(v).toString(),F in d.g&&(v=d.g[F],w=je(v,w,N,B),w>-1&&(we(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete d.g[F],d.h--)))):d&&(d=qe(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,w,N,B)),(w=d>-1?v[d]:null)&&Gr(w))}function Gr(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[bt])Ne(v.i,d);else{var w=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(w,N,d.capture):v.detachEvent?v.detachEvent(se(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=qe(v))?(Ne(w,d),w.h==0&&(w.src=null,v[Re]=null)):we(d)}}}function se(d){return d in dt?dt[d]:dt[d]="on"+d}function me(d,v){if(d.da)d=!0;else{v=new rt(v,this);const w=d.listener,N=d.ha||d.src;d.fa&&Gr(d),d=w.call(N,v)}return d}function qe(d){return d=d[Re],d instanceof de?d:null}var Dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ht(d){return typeof d=="function"?d:(d[Dt]||(d[Dt]=function(v){return d.handleEvent(v)}),d[Dt])}function Oe(){L.call(this),this.i=new de(this),this.M=this,this.G=null}_(Oe,L),Oe.prototype[bt]=!0,Oe.prototype.removeEventListener=function(d,v,w,N){Ds(this,d,v,w,N)};function Ae(d,v){var w,N=d.G;if(N)for(w=[];N;N=N.G)w.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new j(v,d);else if(v instanceof j)v.target=v.target||d;else{var B=v;v=new j(N,d),oe(v,B)}B=!0;let F,ce;if(w)for(ce=w.length-1;ce>=0;ce--)F=v.g=w[ce],B=Pt(F,N,!0,v)&&B;if(F=v.g=d,B=Pt(F,N,!0,v)&&B,B=Pt(F,N,!1,v)&&B,w)for(ce=0;ce<w.length;ce++)F=v.g=w[ce],B=Pt(F,N,!1,v)&&B}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const w=d.g[v];for(let N=0;N<w.length;N++)we(w[N]);delete d.g[v],d.h--}}this.G=null},Oe.prototype.J=function(d,v,w,N){return this.i.add(String(d),v,!1,w,N)},Oe.prototype.K=function(d,v,w,N){return this.i.add(String(d),v,!0,w,N)};function Pt(d,v,w,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let B=!0;for(let F=0;F<v.length;++F){const ce=v[F];if(ce&&!ce.da&&ce.capture==w){const Be=ce.listener,Wt=ce.ha||ce.src;ce.fa&&Ne(d.i,ce),B=Be.call(Wt,N)!==!1&&B}}return B&&!N.defaultPrevented}function qr(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function ls(d){d.g=qr(()=>{d.g=null,d.i&&(d.i=!1,ls(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Mt extends L{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ls(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(d){L.call(this),this.h=d,this.g={}}_(cs,L);var Er=[];function ci(d){Ge(d.g,function(v,w){this.g.hasOwnProperty(w)&&Gr(v)},d),d.g={}}cs.prototype.N=function(){cs.Z.N.call(this),ci(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kn=u.JSON.stringify,ui=u.JSON.parse,us=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function yo(){}function hi(){}var Gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nn(){j.call(this,"d")}_(nn,j);function Lt(){j.call(this,"c")}_(Lt,j);var mt={},ze=null;function dn(){return ze=ze||new Oe}mt.Ia="serverreachability";function vo(d){j.call(this,mt.Ia,d)}_(vo,j);function In(d){const v=dn();Ae(v,new vo(v))}mt.STAT_EVENT="statevent";function Xn(d,v){j.call(this,mt.STAT_EVENT,d),this.stat=v}_(Xn,j);function At(d){const v=dn();Ae(v,new Xn(v,d))}mt.Ja="timingevent";function qn(d,v){j.call(this,mt.Ja,d),this.size=v}_(qn,j);function fn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function lr(){this.g=!0}lr.prototype.ua=function(){this.g=!1};function di(d,v,w,N,B,F){d.info(function(){if(d.g)if(F){var ce="",Be=F.split("&");for(let ct=0;ct<Be.length;ct++){var Wt=Be[ct].split("=");if(Wt.length>1){const jt=Wt[0];Wt=Wt[1];const Ir=jt.split("_");ce=Ir.length>=2&&Ir[1]=="type"?ce+(jt+"="+Wt+"&"):ce+(jt+"=redacted&")}}}else ce=null;else ce=F;return"XMLHTTP REQ ("+N+") [attempt "+B+"]: "+v+`
`+w+`
`+ce})}function _a(d,v,w,N,B,F,ce){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+B+"]: "+v+`
`+w+`
`+F+" "+ce})}function Jn(d,v,w,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Al(d,w)+(N?" "+N:"")})}function hs(d,v){d.info(function(){return"TIMEOUT: "+v})}lr.prototype.info=function(){};function Al(d,v){if(!d.g)return v;if(!v)return null;try{const F=JSON.parse(v);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var w=F[d];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var B=N[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ce=1;ce<N.length;ce++)N[ce]=""}}}}return kn(F)}catch{return v}}var Fr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},js={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Gt;function ve(){}_(ve,yo),ve.prototype.g=function(){return new XMLHttpRequest},Gt=new ve;function $r(d){return encodeURIComponent(String(d))}function bo(d){var v=1;d=d.split(":");const w=[];for(;v>0&&d.length;)w.push(d.shift()),v--;return d.length&&w.push(d.join(":")),w}function Wn(d,v,w,N){this.j=d,this.i=v,this.l=w,this.S=N||1,this.V=new cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new cr}function cr(){this.i=null,this.g="",this.h=!1}var Vt={},qt={};function Zn(d,v,w){d.M=1,d.A=dr(Tt(v)),d.u=w,d.R=!0,fi(d,null)}function fi(d,v){d.F=Date.now(),Tr(d),d.B=Tt(d.A);var w=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),$n(w.i,"t",N),d.C=0,w=d.j.L,d.h=new cr,d.g=Eu(d.j,w?v:null,!d.u),d.P>0&&(d.O=new Mt(y(d.Y,d,d.g),d.P)),v=d.V,w=d.g,N=d.ba;var B="readystatechange";Array.isArray(B)||(B&&(Er[0]=B.toString()),B=Er);for(let F=0;F<B.length;F++){const ce=ft(w,B[F],N||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),In(),di(d.i,d.v,d.B,d.l,d.S,d.u)}Wn.prototype.ba=function(d){d=d.target;const v=this.O;v&&Xr(d)==3?v.j():this.Y(d)},Wn.prototype.Y=function(d){try{if(d==this.g)e:{const Be=Xr(this.g),Wt=this.g.ya(),ct=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Be!=4||Wt==7||(Wt==8||ct<=0?In(3):In(2)),ur(this);var v=this.g.ca();this.X=v;var w=Rl(this);if(this.o=v==200,_a(this.i,this.v,this.B,this.l,this.S,Be,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,B=this.g;if((N=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var F=N;break t}}F=null}if(d=F)Jn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hr(this,d);else{this.o=!1,this.m=3,At(12),Dn(this),Fn(this);break e}}if(this.R){d=!0;let jt;for(;!this.K&&this.C<w.length;)if(jt=wa(this,w),jt==qt){Be==4&&(this.m=4,At(14),d=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Vt){this.m=4,At(15),Jn(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Jn(this.i,this.l,jt,null),hr(this,jt);if(Os(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||w.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)Jn(this.i,this.l,w,"[Invalid Chunked Response]"),Dn(this),Fn(this);else if(w.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Pl(ce),ce.P=!0,At(11))}}else Jn(this.i,this.l,w,null),hr(this,w);Be==4&&Dn(this),this.o&&!this.K&&(Be==4?bu(this.j,this):(this.o=!1,Tr(this)))}else Ls(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Dn(this),Fn(this)}}}catch{}finally{}};function Rl(d){if(!Os(d))return d.g.la();const v=xn(d.g);if(v==="")return"";let w="";const N=v.length,B=Xr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Dn(d),Fn(d),"";d.h.i=new u.TextDecoder}for(let F=0;F<N;F++)d.h.h=!0,w+=d.h.i.decode(v[F],{stream:!(B&&F==N-1)});return v.length=0,d.h.g+=w,d.C=0,d.h.g}function Os(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function wa(d,v){var w=d.C,N=v.indexOf(`
`,w);return N==-1?qt:(w=Number(v.substring(w,N)),isNaN(w)?Vt:(N+=1,N+w>v.length?qt:(v=v.slice(N,N+w),d.C=N+w,v)))}Wn.prototype.cancel=function(){this.K=!0,Dn(this)};function Tr(d){d.T=Date.now()+d.H,Ps(d,d.H)}function Ps(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=fn(y(d.aa,d),v)}function ur(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Wn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(hs(this.i,this.B),this.M!=2&&(In(),At(17)),Dn(this),this.m=2,Fn(this)):Ps(this,this.T-d)};function Fn(d){d.j.I==0||d.K||bu(d.j,d)}function Dn(d){ur(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,ci(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function hr(d,v){try{var w=d.j;if(w.I!=0&&(w.g==d||Nr(w.h,d))){if(!d.L&&Nr(w.h,d)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var B=N;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)To(w),wi(w);else break e;Da(w),At(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=fn(y(w.Va,w),6e3));Sr(w.h)<=1&&w.ta&&(w.ta=void 0)}else vs(w,11)}else if((d.L||w.g==d)&&To(w),!I(v))for(B=w.Ba.g.parse(v),v=0;v<B.length;v++){let ct=B[v];const jt=ct[0];if(!(jt<=w.K))if(w.K=jt,ct=ct[1],w.I==2)if(ct[0]=="c"){w.M=ct[1],w.ba=ct[2];const Ir=ct[3];Ir!=null&&(w.ka=Ir,w.j.info("VER="+w.ka));const bs=ct[4];bs!=null&&(w.za=bs,w.j.info("SVER="+w.za));const Jr=ct[5];Jr!=null&&typeof Jr=="number"&&Jr>0&&(N=1.5*Jr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Wr=d.g;if(Wr){const ja=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var F=N.h;F.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ta(F,F.h),F.h=null))}if(N.G){const So=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(N.wa=So,at(N.J,N.G,So))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var ce=d;if(N.na=wu(N,N.L?N.ba:null,N.W),ce.L){Cr(N.h,ce);var Be=ce,Wt=N.O;Wt&&(Be.H=Wt),Be.D&&(ur(Be),Tr(Be)),N.g=ce}else yu(N);w.i.length>0&&ys(w)}else ct[0]!="stop"&&ct[0]!="close"||vs(w,7);else w.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?vs(w,7):jl(w):ct[0]!="noop"&&w.l&&w.l.qa(ct),w.A=0)}}In(4)}catch{}}var Ft=class{constructor(d,v){this.g=d,this.map=v}};function Ea(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pi(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Sr(d){return d.h?1:d.g?d.g.size:0}function Nr(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Ta(d,v){d.g?d.g.add(v):d.h=v}function Cr(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ea.prototype.cancel=function(){if(this.i=ds(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ds(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const w of d.g.values())v=v.concat(w.G);return v}return k(d.i)}var Sa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mi(d,v){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const N=d[w].indexOf("=");let B,F=null;N>=0?(B=d[w].substring(0,N),F=d[w].substring(N+1)):B=d[w],v(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function $t(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof $t?(this.l=d.l,Yt(this,d.j),this.o=d.o,this.g=d.g,Ar(this,d.u),this.h=d.h,Yr(this,mu(d.i)),this.m=d.m):d&&(v=String(d).match(Sa))?(this.l=!1,Yt(this,v[1]||"",!0),this.o=fr(v[2]||""),this.g=fr(v[3]||"",!0),Ar(this,v[4]),this.h=fr(v[5]||"",!0),Yr(this,v[6]||"",!0),this.m=fr(v[7]||"")):(this.l=!1,this.i=new U(null,this.l))}$t.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(fs(v,gi,!0),":");var w=this.g;return(w||v=="file")&&(d.push("//"),(v=this.o)&&d.push(fs(v,gi,!0),"@"),d.push($r(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(fs(w,w.charAt(0)=="/"?yi:Na,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",fs(w,J)),d.join("")},$t.prototype.resolve=function(d){const v=Tt(this);let w=!!d.j;w?Yt(v,d.j):w=!!d.o,w?v.o=d.o:w=!!d.g,w?v.g=d.g:w=d.u!=null;var N=d.h;if(w)Ar(v,d.u);else if(w=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var B=v.h.lastIndexOf("/");B!=-1&&(N=v.h.slice(0,B+1)+N)}if(B=N,B==".."||B==".")N="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){N=B.lastIndexOf("/",0)==0,B=B.split("/");const F=[];for(let ce=0;ce<B.length;){const Be=B[ce++];Be=="."?N&&ce==B.length&&F.push(""):Be==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),N&&ce==B.length&&F.push("")):(F.push(Be),N=!0)}N=F.join("/")}else N=B}return w?v.h=N:w=d.i.toString()!=="",w?Yr(v,mu(d.i)):w=!!d.m,w&&(v.m=d.m),v};function Tt(d){return new $t(d)}function Yt(d,v,w){d.j=w?fr(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Ar(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Yr(d,v,w){v instanceof U?(d.i=v,xo(d.i,d.l)):(w||(v=fs(v,E)),d.i=new U(v,d.l))}function at(d,v,w){d.i.set(v,w)}function dr(d){return at(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function fr(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fs(d,v,w){return typeof d=="string"?(d=encodeURI(d).replace(v,jn),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function jn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var gi=/[#\/\?@]/g,Na=/[#\?:]/g,yi=/[#\?]/g,E=/[#\?@]/g,J=/#/g;function U(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function ne(d){d.g||(d.g=new Map,d.h=0,d.i&&mi(d.i,function(v,w){d.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}r=U.prototype,r.add=function(d,v){ne(this),this.i=null,d=vi(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(v),this.h+=1,this};function ue(d,v){ne(d),v=vi(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Pe(d,v){return ne(d),v=vi(d,v),d.g.has(v)}r.forEach=function(d,v){ne(this),this.g.forEach(function(w,N){w.forEach(function(B){d.call(v,B,N,this)},this)},this)};function Nt(d,v){ne(d);let w=[];if(typeof v=="string")Pe(d,v)&&(w=w.concat(d.g.get(vi(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)w=w.concat(d[v]);return w}r.set=function(d,v){return ne(this),this.i=null,d=vi(this,d),Pe(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},r.get=function(d,v){return d?(d=Nt(this,d),d.length>0?String(d[0]):v):v};function $n(d,v,w){ue(d,v),w.length>0&&(d.i=null,d.g.set(vi(d,v),k(w)),d.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const B=$r(w);w=Nt(this,w);for(let F=0;F<w.length;F++){let ce=B;w[F]!==""&&(ce+="="+$r(w[F])),d.push(ce)}}return this.i=d.join("&")};function mu(d){const v=new U;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function vi(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function xo(d,v){v&&!d.j&&(ne(d),d.i=null,d.g.forEach(function(w,N){const B=N.toLowerCase();N!=B&&(ue(this,N),$n(this,B,w))},d)),d.j=v}function Qr(d,v){const w=new lr;if(u.Image){const N=new Image;N.onload=b(Rr,w,"TestLoadImage: loaded",!0,v,N),N.onerror=b(Rr,w,"TestLoadImage: error",!1,v,N),N.onabort=b(Rr,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(Rr,w,"TestLoadImage: timeout",!1,v,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function kl(d,v){const w=new lr,N=new AbortController,B=setTimeout(()=>{N.abort(),Rr(w,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(F=>{clearTimeout(B),F.ok?Rr(w,"TestPingServer: ok",!0,v):Rr(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Rr(w,"TestPingServer: error",!1,v)})}function Rr(d,v,w,N,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),N(w)}catch{}}function bi(){this.g=new us}function ps(d){this.i=d.Sb||null,this.h=d.ab||!1}_(ps,yo),ps.prototype.g=function(){return new Ca(this.i,this.h)};function Ca(d,v){Oe.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ca,Oe),r=Ca.prototype,r.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Kr(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xi(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Kr(this)),this.g&&(this.readyState=3,Kr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_o(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function _o(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?xi(this):Kr(this),this.readyState==3&&_o(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,xi(this))},r.Na=function(d){this.g&&(this.response=d,xi(this))},r.ga=function(){this.g&&xi(this)};function xi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Kr(d)}r.setRequestHeader=function(d,v){this.A.append(d,v)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=v.next();return d.join(`\r
`)};function Kr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function kr(d){let v="";return Ge(d,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function Aa(d,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=kr(w),typeof d=="string"?w!=null&&$r(w):at(d,v,w))}function xt(d){Oe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(xt,Oe);var ms=/^https?$/i,Il=["POST","PUT"];r=xt.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Gt.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(F){Ra(this,F);return}if(d=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var B in N)w.set(B,N[B]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())w.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(F=>F.toLowerCase()=="content-type"),B=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Il,v,void 0)>=0)||N||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ce]of w)this.g.setRequestHeader(F,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){Ra(this,F)}};function Ra(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Dl(d),Ms(d)}function Dl(d){d.A||(d.A=!0,Ae(d,"complete"),Ae(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ae(this,"complete"),Ae(this,"abort"),Ms(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),xt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ka(this):this.Xa())},r.Xa=function(){ka(this)};function ka(d){if(d.h&&typeof l<"u"){if(d.v&&Xr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ae(d,"readystatechange"),Xr(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=F===0){let ce=String(d.D).match(Sa)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),N=!ms.test(ce?ce.toLowerCase():"")}w=N}if(w)Ae(d,"complete"),Ae(d,"success");else{d.o=6;try{var B=Xr(d)>2?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.ca()+"]",Dl(d)}}finally{Ms(d)}}}}function Ms(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,v||Ae(d,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Xr(d){return d.g?d.g.readyState:0}r.ca=function(){try{return Xr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),ui(v)}};function xn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ls(d){const v={};d=(d.g&&Xr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(I(d[N]))continue;var w=bo(d[N]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const F=v[B]||[];v[B]=F,F.push(w)}et(v,function(N){return N.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(d,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||v}function _i(d){this.za=0,this.i=[],this.j=new lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,d),this.Za=gs("retryDelaySeedMs",1e4,d),this.Ta=gs("forwardChannelMaxRetries",2,d),this.va=gs("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(d&&d.concurrentRequestLimit),this.Ba=new bi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=_i.prototype,r.ka=8,r.I=1,r.connect=function(d,v,w,N){At(0),this.W=d,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=wu(this,null,this.W),ys(this)};function jl(d){if(wo(d),d.I==3){var v=d.V++,w=Tt(d.J);if(at(w,"SID",d.M),at(w,"RID",v),at(w,"TYPE","terminate"),Ia(d,w),v=new Wn(d,d.j,v),v.M=2,v.A=dr(Tt(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&u.Image&&(new Image().src=v.A,w=!0),w||(v.g=Eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Tr(v)}_u(d)}function wi(d){d.g&&(Pl(d),d.g.cancel(),d.g=null)}function wo(d){wi(d),d.v&&(u.clearTimeout(d.v),d.v=null),To(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function ys(d){if(!pi(d.h)&&!d.m){d.m=!0;var v=d.Ea;De||C(),Ee||(De(),Ee=!0),A.add(v,d),d.D=0}}function Eo(d,v){return Sr(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=fn(y(d.Ea,d,v),xu(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const B=new Wn(this,this.j,d);let F=this.o;if(this.U&&(F?(F=P(F),oe(F,this.U)):F=this.U),this.u!==null||this.R||(B.J=F,F=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=gu(this,B,v),w=Tt(this.J),at(w,"RID",d),at(w,"CVER",22),this.G&&at(w,"X-HTTP-Session-Id",this.G),Ia(this,w),F&&(this.R?v="headers="+$r(kr(F))+"&"+v:this.u&&Aa(w,this.u,F)),Ta(this.h,B),this.Ra&&at(w,"TYPE","init"),this.S?(at(w,"$req",v),at(w,"SID","null"),B.U=!0,Zn(B,w,null)):Zn(B,w,v),this.I=2}}else this.I==3&&(d?Ol(this,d):this.i.length==0||pi(this.h)||Ol(this))};function Ol(d,v){var w;v?w=v.l:w=d.V++;const N=Tt(d.J);at(N,"SID",d.M),at(N,"RID",w),at(N,"AID",d.K),Ia(d,N),d.u&&d.o&&Aa(N,d.u,d.o),w=new Wn(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),v&&(d.i=v.G.concat(d.i)),v=gu(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ta(d.h,w),Zn(w,N,v)}function Ia(d,v){d.H&&Ge(d.H,function(w,N){at(v,N,w)}),d.l&&Ge({},function(w,N){at(v,N,w)})}function gu(d,v,w){w=Math.min(d.i.length,w);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var B=d.i;let Be=-1;for(;;){const Wt=["count="+w];Be==-1?w>0?(Be=B[0].g,Wt.push("ofs="+Be)):Be=0:Wt.push("ofs="+Be);let ct=!0;for(let jt=0;jt<w;jt++){var F=B[jt].g;const Ir=B[jt].map;if(F-=Be,F<0)Be=Math.max(0,B[jt].g-100),ct=!1;else try{F="req"+F+"_"||"";try{var ce=Ir instanceof Map?Ir:Object.entries(Ir);for(const[bs,Jr]of ce){let Wr=Jr;p(Jr)&&(Wr=kn(Jr)),Wt.push(F+bs+"="+encodeURIComponent(Wr))}}catch(bs){throw Wt.push(F+"type="+encodeURIComponent("_badmap")),bs}}catch{N&&N(Ir)}}if(ct){ce=Wt.join("&");break e}}ce=void 0}return d=d.i.splice(0,w),v.G=d,ce}function yu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;De||C(),Ee||(De(),Ee=!0),A.add(v,d),d.A=0}}function Da(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=fn(y(d.Da,d),xu(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=fn(y(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),wi(this),vu(this))};function Pl(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function vu(d){d.g=new Wn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Tt(d.na);at(v,"RID","rpc"),at(v,"SID",d.M),at(v,"AID",d.K),at(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&at(v,"TO",d.ia),at(v,"TYPE","xmlhttp"),Ia(d,v),d.u&&d.o&&Aa(v,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=dr(Tt(v)),w.u=null,w.R=!0,fi(w,d)}r.Va=function(){this.C!=null&&(this.C=null,wi(this),Da(this),At(19))};function To(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function bu(d,v){var w=null;if(d.g==v){To(d),Pl(d),d.g=null;var N=2}else if(Nr(d.h,v))w=v.G,Cr(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var B=d.D;N=dn(),Ae(N,new qn(N,w)),ys(d)}else yu(d);else if(B=v.m,B==3||B==0&&v.X>0||!(N==1&&Eo(d,v)||N==2&&Da(d)))switch(w&&w.length>0&&(v=d.h,v.i=v.i.concat(w)),B){case 1:vs(d,5);break;case 4:vs(d,10);break;case 3:vs(d,6);break;default:vs(d,2)}}}function xu(d,v){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*v}function vs(d,v){if(d.j.info("Error code "+v),v==2){var w=y(d.bb,d),N=d.Ua;const B=!N;N=new $t(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Yt(N,"https"),dr(N),B?Qr(N.toString(),w):kl(N.toString(),w)}else At(2);d.I=0,d.l&&d.l.pa(v),_u(d),wo(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function _u(d){if(d.I=0,d.ja=[],d.l){const v=ds(d.h);(v.length!=0||d.i.length!=0)&&(V(d.ja,v),V(d.ja,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.oa()}}function wu(d,v,w){var N=w instanceof $t?Tt(w):new $t(w);if(N.g!="")v&&(N.g=v+"."+N.g),Ar(N,N.u);else{var B=u.location;N=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;const F=new $t(null);N&&Yt(F,N),v&&(F.g=v),B&&Ar(F,B),w&&(F.h=w),N=F}return w=d.G,v=d.wa,w&&v&&at(N,w,v),at(N,"VER",d.ka),Ia(d,N),N}function Eu(d,v,w){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new xt(new ps({ab:w})):new xt(d.ma),v.Fa(d.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ei(){}Ei.prototype.g=function(d,v){return new Yn(d,v)};function Yn(d,v){Oe.call(this),this.g=new _i(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Vs(this)}_(Yn,Oe),Yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){jl(this.g)},Yn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=kn(d),d=w);v.i.push(new Ft(v.Ya++,d)),v.I==3&&ys(v)},Yn.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,Yn.Z.N.call(this)};function Su(d){nn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const w in v){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(Su,nn);function Nu(){Lt.call(this),this.status=1}_(Nu,Lt);function Vs(d){this.g=d}_(Vs,Tu),Vs.prototype.ra=function(){Ae(this.g,"a")},Vs.prototype.qa=function(d){Ae(this.g,new Su(d))},Vs.prototype.pa=function(d){Ae(this.g,new Nu)},Vs.prototype.oa=function(){Ae(this.g,"b")},Ei.prototype.createWebChannel=Ei.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,Kw=function(){return new Ei},Qw=function(){return dn()},Yw=mt,Bm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Yh=Fr,js.COMPLETE="complete",$w=js,hi.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Rc=hi,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,Fw=xt}).apply(typeof Dh<"u"?Dh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl="12.9.0";function rk(r){Tl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new vg("@firebase/firestore");function rl(){return so.logLevel}function ge(r,...e){if(so.logLevel<=Je.DEBUG){const t=e.map(Rg);so.debug(`Firestore (${Tl}): ${r}`,...t)}}function ai(r,...e){if(so.logLevel<=Je.ERROR){const t=e.map(Rg);so.error(`Firestore (${Tl}): ${r}`,...t)}}function io(r,...e){if(so.logLevel<=Je.WARN){const t=e.map(Rg);so.warn(`Firestore (${Tl}): ${r}`,...t)}}function Rg(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Xw(r,s,t)}function Xw(r,e,t){let s=`FIRESTORE (${Tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ai(s),new Error(s)}function pt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||Xw(e,a,s)}function Ve(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class ik{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ak{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ri,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},p=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ri)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(pt(typeof s.accessToken=="string",31837,{l:s}),new Jw(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class ok{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class lk{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new ok(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Xx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ck{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pt(this.o===void 0,3512);const s=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Xx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Xx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=uk(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function We(r,e){return r<e?-1:r>e?1:0}function Hm(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return bm(a)===bm(l)?We(a,l):bm(a)?1:-1}return We(r.length,e.length)}const hk=55296,dk=57343;function bm(r){const e=r.charCodeAt(0);return e>=hk&&e<=dk}function ml(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="__name__";class Ts{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ie(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ts.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ts?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Ts.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return We(e.length,t.length)}static compareSegments(e,t){const s=Ts.isNumericId(e),a=Ts.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Ts.extractNumericId(e).compare(Ts.extractNumericId(t)):Hm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return la.fromString(e.substring(4,e.length-2))}}class Ct extends Ts{construct(e,t,s){return new Ct(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Ct(t)}static emptyPath(){return new Ct([])}}const fk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Ts{construct(e,t,s){return new Nn(e,t,s)}static isValidIdentifier(e){return fk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jx}static keyField(){return new Nn([Jx])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;a<e.length;){const p=e[a];if(p==="\\"){if(a+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else p==="`"?(u=!u,a++):p!=="."||u?(s+=p,a++):(l(),a++)}if(l(),u)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Ct.fromString(e))}static fromName(e){return new Se(Ct.fromString(e).popFirst(5))}static empty(){return new Se(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Ct(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(r,e,t){if(!t)throw new fe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function pk(r,e,t,s){if(e===!0&&s===!0)throw new fe(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Wx(r){if(!Se.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zx(r){if(Se.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Zw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Dd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ie(12329,{type:typeof r})}function wr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dd(r);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(r,e){const t={typeString:r};return e&&(t.value=e),t}function au(r,e){if(!Zw(r))throw new fe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const u=r[s];if(a&&typeof u!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new fe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=-62135596800,t_=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*t_);return new It(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<e_)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/t_}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-e_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:hn("string",It._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new It(0,0))}static max(){return new Me(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=-1;function mk(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=Me.fromTimestamp(s===1e9?new It(t+1,0):new It(t,s));return new ua(a,Se.empty(),e)}function gk(r){return new ua(r.readTime,r.key,$c)}class ua{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ua(Me.min(),Se.empty(),$c)}static max(){return new ua(Me.max(),Se.empty(),$c)}}function yk(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(r.documentKey,e.documentKey),t!==0?t:We(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==vk)throw r;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let a=0,l=0,u=!1;e.forEach((p=>{++a,p.next((()=>{++l,u&&l===a&&t()}),(g=>s(g)))})),u=!0,l===a&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((a=>a?re.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,a)=>{const l=e.length,u=new Array(l);let p=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((b=>{u[y]=b,++p,p===l&&s(u)}),(b=>a(b)))}}))}static doWhile(e,t){return new re(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function xk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=-1;function Od(r){return r==null}function hd(r){return r===0&&1/r==-1/0}function _k(r){return typeof r=="number"&&Number.isInteger(r)&&!hd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="";function wk(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=n_(e)),e=Ek(r.get(t),e);return n_(e)}function Ek(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case eE:t+="";break;default:t+=l}}return t}function n_(r){return r+eE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function ba(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function tE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jh(this.root,e,this.comparator,!1)}getReverseIterator(){return new jh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jh(this.root,e,this.comparator,!0)}}class jh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Sn.RED,this.left=a??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Sn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Sn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new _r([])}unionWith(e){let t=new mn(Nn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new nE("Invalid base64 string: "+l):l}})(e);return new Rn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const Tk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ha(r){if(pt(!!r,39018),typeof r=="string"){let e=0;const t=Tk.exec(r);if(pt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(r.seconds),nanos:tn(r.nanos)}}function tn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function da(r){return typeof r=="string"?Rn.fromBase64String(r):Rn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="server_timestamp",sE="__type__",iE="__previous_value__",aE="__local_write_time__";function Dg(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[sE])==null?void 0:s.stringValue)===rE}function Pd(r){const e=r.mapValue.fields[iE];return Dg(e)?Pd(e):e}function Yc(r){const e=ha(r.mapValue.fields[aE].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t,s,a,l,u,p,g,y,b,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=_}}const dd="(default)";class Qc{constructor(e,t){this.projectId=e,this.database=t||dd}static empty(){return new Qc("","")}get isDefaultDatabase(){return this.database===dd}isEqual(e){return e instanceof Qc&&e.projectId===this.projectId&&e.database===this.database}}function Nk(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="__type__",Ck="__max__",Oh={mapValue:{}},lE="__vector__",fd="value";function fa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Dg(r)?4:Rk(r)?9007199254740991:Ak(r)?10:11:Ie(28295,{value:r})}function Is(r,e){if(r===e)return!0;const t=fa(r);if(t!==fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Yc(r).isEqual(Yc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=ha(a.timestampValue),p=ha(l.timestampValue);return u.seconds===p.seconds&&u.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return da(a.bytesValue).isEqual(da(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return tn(a.geoPointValue.latitude)===tn(l.geoPointValue.latitude)&&tn(a.geoPointValue.longitude)===tn(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return tn(a.integerValue)===tn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=tn(a.doubleValue),p=tn(l.doubleValue);return u===p?hd(u)===hd(p):isNaN(u)&&isNaN(p)}return!1})(r,e);case 9:return ml(r.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},p=l.mapValue.fields||{};if(r_(u)!==r_(p))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(p[g]===void 0||!Is(u[g],p[g])))return!1;return!0})(r,e);default:return Ie(52216,{left:r})}}function Kc(r,e){return(r.values||[]).find((t=>Is(t,e)))!==void 0}function gl(r,e){if(r===e)return 0;const t=fa(r),s=fa(e);if(t!==s)return We(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return(function(l,u){const p=tn(l.integerValue||l.doubleValue),g=tn(u.integerValue||u.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return i_(r.timestampValue,e.timestampValue);case 4:return i_(Yc(r),Yc(e));case 5:return Hm(r.stringValue,e.stringValue);case 6:return(function(l,u){const p=da(l),g=da(u);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,u){const p=l.split("/"),g=u.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=We(p[y],g[y]);if(b!==0)return b}return We(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,u){const p=We(tn(l.latitude),tn(u.latitude));return p!==0?p:We(tn(l.longitude),tn(u.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return a_(r.arrayValue,e.arrayValue);case 10:return(function(l,u){var T,k,V,$;const p=l.fields||{},g=u.fields||{},y=(T=p[fd])==null?void 0:T.arrayValue,b=(k=g[fd])==null?void 0:k.arrayValue,_=We(((V=y==null?void 0:y.values)==null?void 0:V.length)||0,(($=b==null?void 0:b.values)==null?void 0:$.length)||0);return _!==0?_:a_(y,b)})(r.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Oh.mapValue&&u===Oh.mapValue)return 0;if(l===Oh.mapValue)return 1;if(u===Oh.mapValue)return-1;const p=l.fields||{},g=Object.keys(p),y=u.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let _=0;_<g.length&&_<b.length;++_){const T=Hm(g[_],b[_]);if(T!==0)return T;const k=gl(p[g[_]],y[b[_]]);if(k!==0)return k}return We(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function i_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const t=ha(r),s=ha(e),a=We(t.seconds,s.seconds);return a!==0?a:We(t.nanos,s.nanos)}function a_(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=gl(t[a],s[a]);if(l)return l}return We(t.length,s.length)}function yl(r){return Gm(r)}function Gm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=ha(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return da(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Se.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Gm(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of s)l?l=!1:a+=",",a+=`${u}:${Gm(t.fields[u])}`;return a+"}"})(r.mapValue):Ie(61005,{value:r})}function Qh(r){switch(fa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(r);return e?16+Qh(e):16;case 5:return 2*r.stringValue.length;case 6:return da(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Qh(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return ba(s.fields,((l,u)=>{a+=l.length+Qh(u)})),a})(r.mapValue);default:throw Ie(13486,{value:r})}}function o_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function qm(r){return!!r&&"integerValue"in r}function jg(r){return!!r&&"arrayValue"in r}function l_(r){return!!r&&"nullValue"in r}function c_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Kh(r){return!!r&&"mapValue"in r}function Ak(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[oE])==null?void 0:s.stringValue)===lE}function Pc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return ba(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Pc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pc(r.arrayValue.values[t]);return e}return{...r}}function Rk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Ck}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Kh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(t)}setAll(e){let t=Nn.emptyPath(),s={},a=[];e.forEach(((u,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=p.popLast()}u?s[p.lastSegment()]=Pc(u):a.push(p.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Kh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Kh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ba(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new or(Pc(this.value))}}function cE(r){const e=[];return ba(r.fields,((t,s)=>{const a=new Nn([t]);if(Kh(s)){const l=cE(s.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t,s,a,l,u,p){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=u,this.documentState=p}static newInvalidDocument(e){return new Vn(e,0,Me.min(),Me.min(),Me.min(),or.empty(),0)}static newFoundDocument(e,t,s,a){return new Vn(e,1,t,Me.min(),s,a,0)}static newNoDocument(e,t){return new Vn(e,2,t,Me.min(),Me.min(),or.empty(),0)}static newUnknownDocument(e,t){return new Vn(e,3,t,Me.min(),Me.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.position=e,this.inclusive=t}}function u_(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],u=r.position[a];if(l.field.isKeyField()?s=Se.comparator(Se.fromName(u.referenceValue),t.key):s=gl(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function h_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Is(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t="asc"){this.field=e,this.dir=t}}function kk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{}class un extends uE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Dk(e,t,s):t==="array-contains"?new Pk(e,s):t==="in"?new Mk(e,s):t==="not-in"?new Lk(e,s):t==="array-contains-any"?new Vk(e,s):new un(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new jk(e,s):new Ok(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(gl(t,this.value)):t!==null&&fa(this.value)===fa(t)&&this.matchesComparison(gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class as extends uE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new as(e,t)}matches(e){return hE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hE(r){return r.op==="and"}function dE(r){return Ik(r)&&hE(r)}function Ik(r){for(const e of r.filters)if(e instanceof as)return!1;return!0}function Fm(r){if(r instanceof un)return r.field.canonicalString()+r.op.toString()+yl(r.value);if(dE(r))return r.filters.map((e=>Fm(e))).join(",");{const e=r.filters.map((t=>Fm(t))).join(",");return`${r.op}(${e})`}}function fE(r,e){return r instanceof un?(function(s,a){return a instanceof un&&s.op===a.op&&s.field.isEqual(a.field)&&Is(s.value,a.value)})(r,e):r instanceof as?(function(s,a){return a instanceof as&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,u,p)=>l&&fE(u,a.filters[p])),!0):!1})(r,e):void Ie(19439)}function pE(r){return r instanceof un?(function(t){return`${t.field.canonicalString()} ${t.op} ${yl(t.value)}`})(r):r instanceof as?(function(t){return t.op.toString()+" {"+t.getFilters().map(pE).join(" ,")+"}"})(r):"Filter"}class Dk extends un{constructor(e,t,s){super(e,t,s),this.key=Se.fromName(s.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class jk extends un{constructor(e,t){super(e,"in",t),this.keys=mE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Ok extends un{constructor(e,t){super(e,"not-in",t),this.keys=mE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function mE(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Se.fromName(s.referenceValue)))}class Pk extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jg(t)&&Kc(t.arrayValue,this.value)}}class Mk extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Kc(this.value.arrayValue,t)}}class Lk extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Kc(this.value.arrayValue,t)}}class Vk extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Kc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t=null,s=[],a=[],l=null,u=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=u,this.endAt=p,this.Te=null}}function d_(r,e=null,t=[],s=[],a=null,l=null,u=null){return new Uk(r,e,t,s,a,l,u)}function Og(r){const e=Ve(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Fm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>yl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>yl(s))).join(",")),e.Te=t}return e.Te}function Pg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!kk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!fE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!h_(r.startAt,e.startAt)&&h_(r.endAt,e.endAt)}function $m(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,t=null,s=[],a=[],l=null,u="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=u,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function zk(r,e,t,s,a,l,u,p){return new ou(r,e,t,s,a,l,u,p)}function Md(r){return new ou(r)}function f_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Bk(r){return Se.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function gE(r){return r.collectionGroup!==null}function Mc(r){const e=Ve(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let p=new mn(Nn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new md(l,s))})),t.has(Nn.keyField().canonicalString())||e.Ie.push(new md(Nn.keyField(),s))}return e.Ie}function As(r){const e=Ve(r);return e.Ee||(e.Ee=Hk(e,Mc(r))),e.Ee}function Hk(r,e){if(r.limitType==="F")return d_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new md(a.field,l)}));const t=r.endAt?new pd(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new pd(r.startAt.position,r.startAt.inclusive):null;return d_(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Ym(r,e){const t=r.filters.concat([e]);return new ou(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Qm(r,e,t){return new ou(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ld(r,e){return Pg(As(r),As(e))&&r.limitType===e.limitType}function yE(r){return`${Og(As(r))}|lt:${r.limitType}`}function sl(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>pE(a))).join(", ")}]`),Od(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>yl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>yl(a))).join(",")),`Target(${s})`})(As(r))}; limitType=${r.limitType})`}function Vd(r,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Se.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,a){for(const l of Mc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(u,p,g){const y=u_(u,p,g);return u.inclusive?y<=0:y<0})(s.startAt,Mc(s),a)||s.endAt&&!(function(u,p,g){const y=u_(u,p,g);return u.inclusive?y>=0:y>0})(s.endAt,Mc(s),a))})(r,e)}function Gk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function vE(r){return(e,t)=>{let s=!1;for(const a of Mc(r)){const l=qk(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function qk(r,e,t){const s=r.field.isKeyField()?Se.comparator(e.key,t.key):(function(l,u,p){const g=u.data.field(l),y=p.data.field(l);return g!==null&&y!==null?gl(g,y):Ie(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return tE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new zt(Se.comparator);function oi(){return Fk}const bE=new zt(Se.comparator);function kc(...r){let e=bE;for(const t of r)e=e.insert(t.key,t);return e}function xE(r){let e=bE;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ja(){return Lc()}function _E(){return Lc()}function Lc(){return new fo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const $k=new zt(Se.comparator),Yk=new mn(Se.comparator);function Ze(...r){let e=Yk;for(const t of r)e=e.add(t);return e}const Qk=new mn(We);function Kk(){return Qk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hd(e)?"-0":e}}function wE(r){return{integerValue:""+r}}function Xk(r,e){return _k(e)?wE(e):Mg(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this._=void 0}}function Jk(r,e,t){return r instanceof gd?(function(a,l){const u={fields:{[sE]:{stringValue:rE},[aE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Dg(l)&&(l=Pd(l)),l&&(u.fields[iE]=l),{mapValue:u}})(t,e):r instanceof Xc?TE(r,e):r instanceof Jc?SE(r,e):(function(a,l){const u=EE(a,l),p=p_(u)+p_(a.Ae);return qm(u)&&qm(a.Ae)?wE(p):Mg(a.serializer,p)})(r,e)}function Wk(r,e,t){return r instanceof Xc?TE(r,e):r instanceof Jc?SE(r,e):t}function EE(r,e){return r instanceof yd?(function(s){return qm(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class gd extends Ud{}class Xc extends Ud{constructor(e){super(),this.elements=e}}function TE(r,e){const t=NE(e);for(const s of r.elements)t.some((a=>Is(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Jc extends Ud{constructor(e){super(),this.elements=e}}function SE(r,e){let t=NE(e);for(const s of r.elements)t=t.filter((a=>!Is(a,s)));return{arrayValue:{values:t}}}class yd extends Ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function p_(r){return tn(r.integerValue||r.doubleValue)}function NE(r){return jg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function Zk(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof Xc&&a instanceof Xc||s instanceof Jc&&a instanceof Jc?ml(s.elements,a.elements,Is):s instanceof yd&&a instanceof yd?Is(s.Ae,a.Ae):s instanceof gd&&a instanceof gd})(r.transform,e.transform)}class eI{constructor(e,t){this.version=e,this.transformResults=t}}class rs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zd{}function CE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Lg(r.key,rs.none()):new lu(r.key,r.data,rs.none());{const t=r.data,s=or.empty();let a=new mn(Nn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),a=a.add(l)}return new xa(r.key,s,new _r(a.toArray()),rs.none())}}function tI(r,e,t){r instanceof lu?(function(a,l,u){const p=a.value.clone(),g=g_(a.fieldTransforms,l,u.transformResults);p.setAll(g),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(r,e,t):r instanceof xa?(function(a,l,u){if(!Xh(a.precondition,l))return void l.convertToUnknownDocument(u.version);const p=g_(a.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(AE(a)),g.setAll(p),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Vc(r,e,t,s){return r instanceof lu?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=l.value.clone(),b=y_(l.fieldTransforms,g,u);return y.setAll(b),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof xa?(function(l,u,p,g){if(!Xh(l.precondition,u))return p;const y=y_(l.fieldTransforms,g,u),b=u.data;return b.setAll(AE(l)),b.setAll(y),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(r,e,t,s):(function(l,u,p){return Xh(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):p})(r,e,t)}function nI(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=EE(s.transform,a||null);l!=null&&(t===null&&(t=or.empty()),t.set(s.field,l))}return t||null}function m_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&ml(s,a,((l,u)=>Zk(l,u)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class lu extends zd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class xa extends zd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function AE(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function g_(r,e,t){const s=new Map;pt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const l=r[a],u=l.transform,p=e.data.field(l.field);s.set(l.field,Wk(u,p,t[a]))}return s}function y_(r,e,t){const s=new Map;for(const a of r){const l=a.transform,u=t.data.field(a.field);s.set(a.field,Jk(l,u,e))}return s}class Lg extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rI extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&tI(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Vc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Vc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_E();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let p=this.applyToLocalView(u,l.mutatedFields);p=t.has(a.key)?null:p;const g=CE(u,p);g!==null&&s.set(a.key,g),u.isValidDocument()||u.convertToNoDocument(Me.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,((t,s)=>m_(t,s)))&&ml(this.baseMutations,e.baseMutations,((t,s)=>m_(t,s)))}}class Vg{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){pt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return $k})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,s[u].version);return new Vg(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,st;function oI(r){switch(r){case te.OK:return Ie(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ie(15467,{code:r})}}function RE(r){if(r===void 0)return ai("GRPC error has no .code"),te.UNKNOWN;switch(r){case ln.OK:return te.OK;case ln.CANCELLED:return te.CANCELLED;case ln.UNKNOWN:return te.UNKNOWN;case ln.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case ln.INTERNAL:return te.INTERNAL;case ln.UNAVAILABLE:return te.UNAVAILABLE;case ln.UNAUTHENTICATED:return te.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case ln.NOT_FOUND:return te.NOT_FOUND;case ln.ALREADY_EXISTS:return te.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return te.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case ln.ABORTED:return te.ABORTED;case ln.OUT_OF_RANGE:return te.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return te.UNIMPLEMENTED;case ln.DATA_LOSS:return te.DATA_LOSS;default:return Ie(39323,{code:r})}}(st=ln||(ln={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new la([4294967295,4294967295],0);function v_(r){const e=lI().encode(r),t=new qw;return t.update(e),new Uint8Array(t.digest())}function b_(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new la([t,s],0),new la([a,l],0)]}class Ug{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ic(`Invalid padding: ${t}`);if(s<0)throw new Ic(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ic(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ic(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=la.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(la.fromNumber(s)));return a.compare(cI)===1&&(a=new la([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=v_(e),[s,a]=b_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Ug(l,a,t);return s.forEach((p=>u.insert(p))),u}insert(e){if(this.ge===0)return;const t=v_(e),[s,a]=b_(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ic extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Bd(Me.min(),a,new zt(We),oi(),Ze())}}class cu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new cu(s,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,s,a){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=a}}class kE{constructor(e,t){this.targetId=e,this.Ce=t}}class IE{constructor(e,t,s=Rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class x_{constructor(){this.ve=0,this.Fe=__(),this.Me=Rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ie(38017,{changeType:l})}})),new cu(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=__()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class uI{constructor(e){this.Ge=e,this.ze=new Map,this.je=oi(),this.He=Ph(),this.Je=Ph(),this.Ze=new zt(We)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if($m(l))if(s===0){const u=new Se(l.path);this.et(t,u,Vn.newNoDocument(u,Me.min()))}else pt(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const p=this.ut(e),g=p?this.ct(p,e,u):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let u,p;try{u=da(s).toUint8Array()}catch(g){if(g instanceof nE)return io("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ug(u,a,l)}catch(g){return io(g instanceof Ic?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const u=this.Ge.ht(),p=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(p)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const p=this.ot(u);if(p){if(l.current&&$m(p.target)){const g=new Se(p.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,Vn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let s=Ze();this.Je.forEach(((l,u)=>{let p=!0;u.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Bd(e,t,this.Ze,this.je,s);return this.je=oi(),this.He=Ph(),this.Je=Ph(),this.Ze=new zt(We),a}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new x_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new mn(We),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new mn(We),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new x_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ph(){return new zt(Se.comparator)}function __(){return new zt(Se.comparator)}const hI={asc:"ASCENDING",desc:"DESCENDING"},dI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class pI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Km(r,e){return r.useProto3Json||Od(e)?e:{value:e}}function vd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function mI(r,e){return vd(r,e.toTimestamp())}function Rs(r){return pt(!!r,49232),Me.fromTimestamp((function(t){const s=ha(t);return new It(s.seconds,s.nanos)})(r))}function zg(r,e){return Xm(r,e).canonicalString()}function Xm(r,e){const t=(function(a){return new Ct(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function jE(r){const e=Ct.fromString(r);return pt(VE(e),10190,{key:e.toString()}),e}function Jm(r,e){return zg(r.databaseId,e.path)}function xm(r,e){const t=jE(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Se(PE(t))}function OE(r,e){return zg(r.databaseId,e)}function gI(r){const e=jE(r);return e.length===4?Ct.emptyPath():PE(e)}function Wm(r){return new Ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function PE(r){return pt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function w_(r,e,t){return{name:Jm(r,e),fields:t.value.mapValue.fields}}function yI(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,b){return y.useProto3Json?(pt(b===void 0||typeof b=="string",58123),Rn.fromBase64String(b||"")):(pt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Rn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),u=e.targetChange.cause,p=u&&(function(y){const b=y.code===void 0?te.UNKNOWN:RE(y.code);return new fe(b,y.message||"")})(u);t=new IE(s,a,l,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=xm(r,s.document.name),l=Rs(s.document.updateTime),u=s.document.createTime?Rs(s.document.createTime):Me.min(),p=new or({mapValue:{fields:s.document.fields}}),g=Vn.newFoundDocument(a,l,u,p),y=s.targetIds||[],b=s.removedTargetIds||[];t=new Jh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=xm(r,s.document),l=s.readTime?Rs(s.readTime):Me.min(),u=Vn.newNoDocument(a,l),p=s.removedTargetIds||[];t=new Jh([],p,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=xm(r,s.document),l=s.removedTargetIds||[];t=new Jh([],l,a,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,u=new aI(a,l),p=s.targetId;t=new kE(p,u)}}return t}function vI(r,e){let t;if(e instanceof lu)t={update:w_(r,e.key,e.value)};else if(e instanceof Lg)t={delete:Jm(r,e.key)};else if(e instanceof xa)t={update:w_(r,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof rI))return Ie(16599,{dt:e.type});t={verify:Jm(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const p=u.transform;if(p instanceof gd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Xc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Jc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yd)return{fieldPath:u.field.canonicalString(),increment:p.Ae};throw Ie(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:mI(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(r,e.precondition)),t}function bI(r,e){return r&&r.length>0?(pt(e!==void 0,14353),r.map((t=>(function(a,l){let u=a.updateTime?Rs(a.updateTime):Rs(l);return u.isEqual(Me.min())&&(u=Rs(l)),new eI(u,a.transformResults||[])})(t,e)))):[]}function xI(r,e){return{documents:[OE(r,e.path)]}}function _I(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=OE(r,a);const l=(function(y){if(y.length!==0)return LE(as.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:il(T.field),direction:TI(T.dir)}})(b)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const p=Km(r,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function wI(r){let e=gI(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){pt(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(_){const T=ME(_);return T instanceof as&&dE(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((T=>(function(V){return new md(al(V.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(_){let T;return T=typeof _=="object"?_.value:_,Od(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(_){const T=!!_.before,k=_.values||[];return new pd(k,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const T=!_.before,k=_.values||[];return new pd(k,T)})(t.endAt)),zk(e,a,u,l,p,"F",g,y)}function EI(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ME(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=al(t.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=al(t.unaryFilter.field);return un.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=al(t.unaryFilter.field);return un.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=al(t.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(r):r.fieldFilter!==void 0?(function(t){return un.create(al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return as.create(t.compositeFilter.filters.map((s=>ME(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(r):Ie(30097,{filter:r})}function TI(r){return hI[r]}function SI(r){return dI[r]}function NI(r){return fI[r]}function il(r){return{fieldPath:r.canonicalString()}}function al(r){return Nn.fromServerFormat(r.fieldPath)}function LE(r){return r instanceof un?(function(t){if(t.op==="=="){if(c_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(l_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(c_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(l_(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:SI(t.op),value:t.value}}})(r):r instanceof as?(function(t){const s=t.getFilters().map((a=>LE(a)));return s.length===1?s[0]:{compositeFilter:{op:NI(t.op),filters:s}}})(r):Ie(54877,{filter:r})}function CI(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function UE(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t,s,a,l=Me.min(),u=Me.min(),p=Rn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.yt=e}}function RI(r){const e=wI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.Sn=new II}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(ua.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(ua.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class II{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new mn(Ct.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mn(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zE=41943040;class ar{static withCacheSize(e){return new ar(e,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ar.DEFAULT_COLLECTION_PERCENTILE=10,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ar.DEFAULT=new ar(zE,ar.DEFAULT_COLLECTION_PERCENTILE,ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ar.DISABLED=new ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new vl(0)}static ar(){return new vl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LruGarbageCollector",DI=1048576;function S_([r,e],[t,s]){const a=We(r,t);return a===0?We(e,s):a}class jI{constructor(e){this.Pr=e,this.buffer=new mn(S_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();S_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(T_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nl(t)?ge(T_,"Ignoring IndexedDB error during garbage collection: ",t):await Sl(t)}await this.Ar(3e5)}))}}class PI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(jd.ce);const s=new jI(t);return this.Vr.forEachTarget(e,(a=>s.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>s.Er(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(E_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,a,l,u,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,p=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(y=Date.now(),rl()<=Je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-b}ms
	Determined least recently used ${a} in `+(p-u)+`ms
	Removed ${l} targets in `+(g-p)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function MI(r,e){return new PI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Vc(s.mutation,a,_r.empty(),It.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const a=Ja();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let u=kc();return l.forEach(((p,g)=>{u=u.insert(p,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=Ja();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,p)=>{t.set(u,p)}))}))}computeViews(e,t,s,a){let l=oi();const u=Lc(),p=(function(){return Lc()})();return t.forEach(((g,y)=>{const b=s.get(y.key);a.has(y.key)&&(b===void 0||b.mutation instanceof xa)?l=l.insert(y.key,y):b!==void 0?(u.set(y.key,b.mutation.getFieldMask()),Vc(b.mutation,y,b.mutation.getFieldMask(),It.now())):u.set(y.key,_r.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,b)=>u.set(y,b))),t.forEach(((y,b)=>p.set(y,new VI(b,u.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const s=Lc();let a=new zt(((u,p)=>u-p)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const p of u)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=s.get(g)||_r.empty();b=p.applyToLocalView(y,b),s.set(g,b);const _=(a.get(p.batchId)||Ze()).add(g);a=a.insert(p.batchId,_)}))})).next((()=>{const u=[],p=a.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,_=_E();b.forEach((T=>{if(!l.has(T)){const k=CE(t.get(T),s.get(T));k!==null&&_.set(T,k),l=l.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,y,_))}return re.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return Bk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):re.resolve(Ja());let p=$c,g=l;return u.next((y=>re.forEach(y,((b,_)=>(p<_.largestBatchId&&(p=_.largestBatchId),l.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Ze()))).next((b=>({batchId:p,changes:xE(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((s=>{let a=kc();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let u=kc();return this.indexManager.getCollectionParents(e,l).next((p=>re.forEach(p,(g=>{const y=(function(_,T){return new ou(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,a).next((b=>{b.forEach(((_,T)=>{u=u.insert(_,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((u=>{l.forEach(((g,y)=>{const b=y.getKey();u.get(b)===null&&(u=u.insert(b,Vn.newInvalidDocument(b)))}));let p=kc();return u.forEach(((g,y)=>{const b=l.get(g);b!==void 0&&Vc(b.mutation,y,_r.empty(),It.now()),Vd(t,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Rs(a.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:RI(a.bundledQuery),readTime:Rs(a.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.overlays=new zt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ja();return re.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.bt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Lr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const a=Ja(),l=t.length+1,u=new Se(t.child("")),p=this.overlays.getIteratorFrom(u);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new zt(((y,b)=>y-b));const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let b=l.get(y.largestBatchId);b===null&&(b=Ja(),l=l.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Ja(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=a)););return re.resolve(p)}bt(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(s.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new iI(t,s));let l=this.Lr.get(t);l===void 0&&(l=Ze(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.kr=new mn(vn.Kr),this.qr=new mn(vn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new vn(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new vn(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Se(new Ct([])),s=new vn(t,e),a=new vn(t,e+1),l=[];return this.qr.forEachInRange([s,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new Ct([])),s=new vn(t,e),a=new vn(t,e+1);let l=Ze();return this.qr.forEachInRange([s,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new vn(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class vn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||We(e.Hr,t.Hr)}static Ur(e,t){return We(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new mn(vn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new sI(l,t,s,a);this.mutationQueue.push(u);for(const p of a)this.Jr=this.Jr.add(new vn(p.key,l)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.Xr(s),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Ig:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new vn(t,0),a=new vn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,a],(u=>{const p=this.Zr(u.Hr);l.push(p)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new mn(We);return t.forEach((a=>{const l=new vn(a,0),u=new vn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(p=>{s=s.add(p.Hr)}))})),re.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Se.isDocumentKey(l)||(l=l.child(""));const u=new vn(new Se(l),0);let p=new mn(We);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===a&&(p=p.add(g.Hr)),!0)}),u),re.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((s=>{const a=this.Zr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){pt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return re.forEach(t.mutations,(a=>{const l=new vn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new vn(t,0),a=this.Jr.firstAfterOrEqual(s);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.ti=e,this.docs=(function(){return new zt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():Vn.newInvalidDocument(t))}getEntries(e,t){let s=oi();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Vn.newInvalidDocument(a))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=oi();const u=t.path,p=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!u.isPrefixOf(y.path))break;y.path.length>u.length+1||yk(gk(b),s)<=0||(a.has(b.key)||Vd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ie(9500)}ni(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new FI(this)}getSize(e){return re.resolve(this.size)}}class FI extends LI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.persistence=e,this.ri=new fo((t=>Og(t)),Pg),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.ii=0,this.si=new Bg,this.targetCount=0,this.oi=vl._r()}forEachTarget(e,t){return this.ri.forEach(((s,a)=>t(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new vl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.ri.forEach(((u,p)=>{p.sequenceNumber<=t&&s.get(p.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),re.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e,t){this._i={},this.overlays={},this.ai=new jd(0),this.ui=!1,this.ui=!0,this.ci=new HI,this.referenceDelegate=e(this),this.li=new $I(this),this.indexManager=new kI,this.remoteDocumentCache=(function(a){return new qI(a)})((s=>this.referenceDelegate.hi(s))),this.serializer=new AI(t),this.Pi=new zI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new GI(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ge("MemoryPersistence","Starting transaction:",e);const a=new YI(this.ai.next());return this.referenceDelegate.Ti(),s(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class YI extends bk{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.Ri=new Bg,this.Ai=null}static Vi(e){return new Hg(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(s=>{const a=Se.fromPath(s);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Me.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bd{constructor(e,t){this.persistence=e,this.fi=new fo((s=>wk(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=MI(this,t)}static Vi(e,t){return new bd(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((s,a)=>this.wr(e,s,a).next((l=>l?re.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((p=>{p||(s++,l.removeEntry(u,Me.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}wr(e,t,s){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return re.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=a}static Es(e,t){let s=Ze(),a=Ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Gg(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return EN()?8:xk(Bn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new QI;return this.ys(e,t,u).next((p=>{if(l.result=p,this.As)return this.ws(e,t,u,p.size)}))})).next((()=>l.result))}ws(e,t,s,a){return s.documentReadCount<this.Vs?(rl()<=Je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(rl()<=Je.DEBUG&&ge("QueryEngine","Query:",sl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.ds*a?(rl()<=Je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,As(t))):re.resolve())}gs(e,t){if(f_(t))return re.resolve(null);let s=As(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Qm(t,null,"F"),s=As(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=Ze(...l);return this.fs.getDocuments(e,u).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,u,g.readTime)?this.gs(e,Qm(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,s,a){return f_(t)||a.isEqual(Me.min())?re.resolve(null):this.fs.getDocuments(e,s).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,s,a)?re.resolve(null):(rl()<=Je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),sl(t)),this.Ds(e,u,t,mk(a,$c)).next((p=>p)))}))}bs(e,t){let s=new mn(vE(e));return t.forEach(((a,l)=>{Vd(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,s){return rl()<=Je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",sl(t)),this.fs.getDocumentsMatchingQuery(e,t,ua.min(),s)}Ds(e,t,s,a){return this.fs.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="LocalStore",XI=3e8;class JI{constructor(e,t,s,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new zt(We),this.Fs=new fo((l=>Og(l)),Pg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function WI(r,e,t,s){return new JI(r,e,t,s)}async function HE(r,e){const t=Ve(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],p=[];let g=Ze();for(const y of a){u.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of l){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:u,addedBatchIds:p})))}))}))}function ZI(r,e){const t=Ve(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const _=y.batch,T=_.keys();let k=re.resolve();return T.forEach((V=>{k=k.next((()=>b.getEntry(g,V))).next(($=>{const Z=y.docVersions.get(V);pt(Z!==null,48541),$.version.compareTo(Z)<0&&(_.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),b.addEntry($)))}))})),k.next((()=>p.mutationQueue.removeMutationBatch(g,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Ze();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function GE(r){const e=Ve(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function e4(r,e){const t=Ve(r),s=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const p=[];e.targetChanges.forEach(((b,_)=>{const T=a.get(_);if(!T)return;p.push(t.li.removeMatchingKeys(l,b.removedDocuments,_).next((()=>t.li.addMatchingKeys(l,b.addedDocuments,_))));let k=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?k=k.withResumeToken(Rn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):b.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(b.resumeToken,s)),a=a.insert(_,k),(function($,Z,ae){return $.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=XI?!0:ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0})(T,k,b)&&p.push(t.li.updateTargetData(l,k))}));let g=oi(),y=Ze();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),p.push(t4(l,u,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!s.isEqual(Me.min())){const b=t.li.getLastRemoteSnapshotVersion(l).next((_=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));p.push(b)}return re.waitFor(p).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.vs=a,l)))}function t4(r,e,t){let s=Ze(),a=Ze();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let u=oi();return t.forEach(((p,g)=>{const y=l.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(p)),g.isNoDocument()&&g.version.isEqual(Me.min())?(e.removeEntry(p,g.readTime),u=u.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(p,g)):ge(qg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:u,Ls:a}}))}function n4(r,e){const t=Ve(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ig),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function r4(r,e){const t=Ve(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.li.getTargetData(s,e).next((l=>l?(a=l,re.resolve(a)):t.li.allocateTargetId(s).next((u=>(a=new ta(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.vs.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function Zm(r,e,t){const s=Ve(r),a=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Nl(u))throw u;ge(qg,`Failed to update sequence numbers for target ${e}: ${u}`)}s.vs=s.vs.remove(e),s.Fs.delete(a.target)}function N_(r,e,t){const s=Ve(r);let a=Me.min(),l=Ze();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,y,b){const _=Ve(g),T=_.Fs.get(b);return T!==void 0?re.resolve(_.vs.get(T)):_.li.getTargetData(y,b)})(s,u,As(e)).next((p=>{if(p)return a=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(u,p.targetId).next((g=>{l=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(u,e,t?a:Me.min(),t?l:Ze()))).next((p=>(s4(s,Gk(e),p),{documents:p,ks:l})))))}function s4(r,e,t){let s=r.Ms.get(e)||Me.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Ms.set(e,s)}class C_{constructor(){this.activeTargetIds=Kk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i4{constructor(){this.vo=new C_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new C_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="ConnectivityMonitor";class R_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(A_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(A_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function eg(){return Mh===null?Mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="RestConnection",o4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class l4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${a}`,this.$o=this.databaseId.database===dd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Wo(e,t,s,a,l){const u=eg(),p=this.Qo(e,t.toUriEncodedString());ge(_m,`Sending RPC '${e}' ${u}:`,p,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,a,l);const{host:y}=new URL(p),b=_l(y);return this.zo(e,p,g,s,b).then((_=>(ge(_m,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw io(_m,`RPC '${e}' ${u} failed with error: `,_,"url: ",p,"request:",s),_}))}jo(e,t,s,a,l,u){return this.Wo(e,t,s,a,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const s=o4[e];let a=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection",wc=(r,e,t)=>{r.listen(e,(s=>{try{t(s)}catch(a){setTimeout((()=>{throw a}),0)}}))};class dl extends l4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!dl.c_){const e=Qw();wc(e,Yw.STAT_EVENT,(t=>{t.stat===Bm.PROXY?ge(Pn,"STAT_EVENT: detected buffering proxy"):t.stat===Bm.NOPROXY&&ge(Pn,"STAT_EVENT: detected no buffering proxy")})),dl.c_=!0}}zo(e,t,s,a,l){const u=eg();return new Promise(((p,g)=>{const y=new Fw;y.setWithCredentials(!0),y.listenOnce($w.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yh.NO_ERROR:const _=y.getResponseJson();ge(Pn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),p(_);break;case Yh.TIMEOUT:ge(Pn,`RPC '${e}' ${u} timed out`),g(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const T=y.getStatus();if(ge(Pn,`RPC '${e}' ${u} failed with status:`,T,"response text:",y.getResponseText()),T>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const V=k==null?void 0:k.error;if(V&&V.status&&V.message){const $=(function(ae){const he=ae.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(he)>=0?he:te.UNKNOWN})(V.status);g(new fe($,V.message))}else g(new fe(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ge(Pn,`RPC '${e}' ${u} completed.`)}}));const b=JSON.stringify(a);ge(Pn,`RPC '${e}' ${u} sending request:`,a),y.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=eg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const y=l.join("");ge(Pn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const b=u.createWebChannel(y,p);this.I_(b);let _=!1,T=!1;const k=new c4({Ho:V=>{T?ge(Pn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(_||(ge(Pn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),_=!0),ge(Pn,`RPC '${e}' stream ${a} sending:`,V),b.send(V))},Jo:()=>b.close()});return wc(b,Rc.EventType.OPEN,(()=>{T||(ge(Pn,`RPC '${e}' stream ${a} transport opened.`),k.i_())})),wc(b,Rc.EventType.CLOSE,(()=>{T||(T=!0,ge(Pn,`RPC '${e}' stream ${a} transport closed`),k.o_(),this.E_(b))})),wc(b,Rc.EventType.ERROR,(V=>{T||(T=!0,io(Pn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),k.o_(new fe(te.UNAVAILABLE,"The operation could not be completed")))})),wc(b,Rc.EventType.MESSAGE,(V=>{var $;if(!T){const Z=V.data[0];pt(!!Z,16349);const ae=Z,he=(ae==null?void 0:ae.error)||(($=ae[0])==null?void 0:$.error);if(he){ge(Pn,`RPC '${e}' stream ${a} received error:`,he);const pe=he.status;let ye=(function(A){const C=ln[A];if(C!==void 0)return RE(C)})(pe),De=he.message;pe==="NOT_FOUND"&&De.includes("database")&&De.includes("does not exist")&&De.includes(this.databaseId.database)&&io(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ye===void 0&&(ye=te.INTERNAL,De="Unknown error status: "+pe+" with message "+he.message),T=!0,k.o_(new fe(ye,De)),b.close()}else ge(Pn,`RPC '${e}' stream ${a} received:`,Z),k.__(Z)}})),dl.u_(),setTimeout((()=>{k.s_()}),0),k}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Kw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(r){return new dl(r)}function wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(r){return new pI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dl.c_=!1;class qE{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&ge("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="PersistentStream";class FE{constructor(e,t,s,a,l,u,p,g){this.Ci=e,this.b_=s,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qE(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(ai(t.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new fe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(k_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ge(k_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h4 extends FE{constructor(e,t,s,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=yI(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Me.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Me.min():u.readTime?Rs(u.readTime):Me.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=Wm(this.serializer),t.addTarget=(function(l,u){let p;const g=u.target;if(p=$m(g)?{documents:xI(l,g)}:{query:_I(l,g).ft},p.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){p.resumeToken=DE(l,u.resumeToken);const y=Km(l,u.expectedCount);y!==null&&(p.expectedCount=y)}else if(u.snapshotVersion.compareTo(Me.min())>0){p.readTime=vd(l,u.snapshotVersion.toTimestamp());const y=Km(l,u.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=EI(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=Wm(this.serializer),t.removeTarget=e,this.K_(t)}}class d4 extends FE{constructor(e,t,s,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return pt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=bI(e.writeResults,e.commitTime),s=Rs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Wm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>vI(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{}class p4 extends f4{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Xm(t,s),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(te.UNKNOWN,l.toString())}))}jo(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,p])=>this.connection.jo(e,Xm(t,s),a,u,p,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function m4(r,e,t,s){return new p4(r,e,t,s)}class g4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ai(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class y4{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{s.enqueueAndForget((async()=>{po(this)&&(ge(ao,"Restarting streams for network reachability change."),await(async function(g){const y=Ve(g);y.Ea.add(4),await uu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Gd(y)})(this))}))})),this.Va=new g4(s,a)}}async function Gd(r){if(po(r))for(const e of r.Ra)await e(!0)}async function uu(r){for(const e of r.Ra)await e(!1)}function $E(r,e){const t=Ve(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Qg(t)?Yg(t):Cl(t).O_()&&$g(t,e))}function Fg(r,e){const t=Ve(r),s=Cl(t);t.Ia.delete(e),s.O_()&&YE(t,e),t.Ia.size===0&&(s.O_()?s.L_():po(t)&&t.Va.set("Unknown"))}function $g(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cl(r).Z_(e)}function YE(r,e){r.da.$e(e),Cl(r).X_(e)}function Yg(r){r.da=new uI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Cl(r).start(),r.Va.ua()}function Qg(r){return po(r)&&!Cl(r).x_()&&r.Ia.size>0}function po(r){return Ve(r).Ea.size===0}function QE(r){r.da=void 0}async function v4(r){r.Va.set("Online")}async function b4(r){r.Ia.forEach(((e,t)=>{$g(r,e)}))}async function x4(r,e){QE(r),Qg(r)?(r.Va.ha(e),Yg(r)):r.Va.set("Unknown")}async function _4(r,e,t){if(r.Va.set("Online"),e instanceof IE&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const p of l.targetIds)a.Ia.has(p)&&(await a.remoteSyncer.rejectListen(p,u),a.Ia.delete(p),a.da.removeTarget(p))})(r,e)}catch(s){ge(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xd(r,s)}else if(e instanceof Jh?r.da.Xe(e):e instanceof kE?r.da.st(e):r.da.tt(e),!t.isEqual(Me.min()))try{const s=await GE(r.localStore);t.compareTo(s)>=0&&await(function(l,u){const p=l.da.Tt(u);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(y);b&&l.Ia.set(y,b.withResumeToken(g.resumeToken,u))}})),p.targetMismatches.forEach(((g,y)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(Rn.EMPTY_BYTE_STRING,b.snapshotVersion)),YE(l,g);const _=new ta(b.target,g,y,b.sequenceNumber);$g(l,_)})),l.remoteSyncer.applyRemoteEvent(p)})(r,t)}catch(s){ge(ao,"Failed to raise snapshot:",s),await xd(r,s)}}async function xd(r,e,t){if(!Nl(e))throw e;r.Ea.add(1),await uu(r),r.Va.set("Offline"),t||(t=()=>GE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(ao,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Gd(r)}))}function KE(r,e){return e().catch((t=>xd(r,t,e)))}async function qd(r){const e=Ve(r),t=pa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ig;for(;w4(e);)try{const a=await n4(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,E4(e,a)}catch(a){await xd(e,a)}XE(e)&&JE(e)}function w4(r){return po(r)&&r.Ta.length<10}function E4(r,e){r.Ta.push(e);const t=pa(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function XE(r){return po(r)&&!pa(r).x_()&&r.Ta.length>0}function JE(r){pa(r).start()}async function T4(r){pa(r).ra()}async function S4(r){const e=pa(r);for(const t of r.Ta)e.ea(t.mutations)}async function N4(r,e,t){const s=r.Ta.shift(),a=Vg.from(s,e,t);await KE(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await qd(r)}async function C4(r,e){e&&pa(r).Y_&&await(async function(s,a){if((function(u){return oI(u)&&u!==te.ABORTED})(a.code)){const l=s.Ta.shift();pa(s).B_(),await KE(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await qd(s)}})(r,e),XE(r)&&JE(r)}async function I_(r,e){const t=Ve(r);t.asyncQueue.verifyOperationInProgress(),ge(ao,"RemoteStore received new credentials");const s=po(t);t.Ea.add(3),await uu(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gd(t)}async function A4(r,e){const t=Ve(r);e?(t.Ea.delete(2),await Gd(t)):e||(t.Ea.add(2),await uu(t),t.Va.set("Unknown"))}function Cl(r){return r.ma||(r.ma=(function(t,s,a){const l=Ve(t);return l.sa(),new h4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:v4.bind(null,r),Yo:b4.bind(null,r),t_:x4.bind(null,r),J_:_4.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Qg(r)?Yg(r):r.Va.set("Unknown")):(await r.ma.stop(),QE(r))}))),r.ma}function pa(r){return r.fa||(r.fa=(function(t,s,a){const l=Ve(t);return l.sa(),new d4(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:T4.bind(null,r),t_:C4.bind(null,r),ta:S4.bind(null,r),na:N4.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await qd(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(ao,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const u=Date.now()+s,p=new Kg(e,t,u,a,l);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(r,e){if(ai("AsyncQueue",`${e}: ${r}`),Nl(r))return new fe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{static emptySet(e){return new fl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Se.comparator(t.key,s.key):(t,s)=>Se.comparator(t.key,s.key),this.keyedMap=kc(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new fl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.ga=new zt(Se.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class bl{constructor(e,t,s,a,l,u,p,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,a,l){const u=[];return t.forEach((p=>{u.push({type:0,doc:p})})),new bl(e,t,fl.emptySet(t),u,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class k4{constructor(){this.queries=j_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ve(t),l=a.queries;a.queries=j_(),l.forEach(((u,p)=>{for(const g of p.ba)g.onError(s)}))})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function j_(){return new fo((r=>yE(r)),Ld)}async function Jg(r,e){const t=Ve(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(s=2):(l=new R4,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const p=Xg(u,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(p)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Zg(t)}async function Wg(r,e){const t=Ve(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function I4(r,e){const t=Ve(r);let s=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const p of u.ba)p.Fa(a)&&(s=!0);u.wa=a}}s&&Zg(t)}function D4(r,e,t){const s=Ve(r),a=s.queries.get(e);if(a)for(const l of a.ba)l.onError(t);s.queries.delete(e)}function Zg(r){r.Ca.forEach((e=>{e.next()}))}var tg,O_;(O_=tg||(tg={})).Ma="default",O_.Cache="cache";class e0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new bl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.key=e}}class ZE{constructor(e){this.key=e}}class j4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.eu=vE(e),this.tu=new fl(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new D_,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,p=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,_)=>{const T=a.get(b),k=Vd(this.query,_)?_:null,V=!!T&&this.mutatedKeys.has(T.key),$=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Z=!1;T&&k?T.data.isEqual(k.data)?V!==$&&(s.track({type:3,doc:k}),Z=!0):this.su(T,k)||(s.track({type:2,doc:k}),Z=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(p=!0)):!T&&k?(s.track({type:0,doc:k}),Z=!0):T&&!k&&(s.track({type:1,doc:T}),Z=!0,(g||y)&&(p=!0)),Z&&(k?(u=u.add(k),l=$?l.add(b):l.delete(b)):(u=u.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const b=this.query.limitType==="F"?u.last():u.first();u=u.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:u,iu:s,Ss:p,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((b,_)=>(function(k,V){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:Z})}};return $(k)-$(V)})(b.type,_.type)||this.eu(b.doc,_.doc))),this.ou(s),a=a??!1;const p=t&&!a?this._u():[],g=this.Ya.size===0&&this.current&&!a?1:0,y=g!==this.Xa;return this.Xa=g,u.length!==0||y?{snapshot:new bl(this.query,e.tu,l,u,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new D_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new ZE(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new WE(s))})),t}cu(e){this.Za=e.ks,this.Ya=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const t0="SyncEngine";class O4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class P4{constructor(e){this.key=e,this.hu=!1}}class M4{constructor(e,t,s,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new fo((p=>yE(p)),Ld),this.Iu=new Map,this.Eu=new Set,this.Ru=new zt(Se.comparator),this.Au=new Map,this.Vu=new Bg,this.du={},this.mu=new Map,this.fu=vl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function L4(r,e,t=!0){const s=iT(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await eT(s,e,t,!0),a}async function V4(r,e){const t=iT(r);await eT(t,e,!0,!1)}async function eT(r,e,t,s){const a=await r4(r.localStore,As(e)),l=a.targetId,u=r.sharedClientState.addLocalQueryTarget(l,t);let p;return s&&(p=await U4(r,e,l,u==="current",a.resumeToken)),r.isPrimaryClient&&t&&$E(r.remoteStore,a),p}async function U4(r,e,t,s,a){r.pu=(_,T,k)=>(async function($,Z,ae,he){let pe=Z.view.ru(ae);pe.Ss&&(pe=await N_($.localStore,Z.query,!1).then((({documents:A})=>Z.view.ru(A,pe))));const ye=he&&he.targetChanges.get(Z.targetId),De=he&&he.targetMismatches.get(Z.targetId)!=null,Ee=Z.view.applyChanges(pe,$.isPrimaryClient,ye,De);return M_($,Z.targetId,Ee.au),Ee.snapshot})(r,_,T,k);const l=await N_(r.localStore,e,!0),u=new j4(e,l.ks),p=u.ru(l.documents),g=cu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),y=u.applyChanges(p,r.isPrimaryClient,g);M_(r,t,y.au);const b=new O4(e,t,u);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function z4(r,e,t){const s=Ve(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((u=>!Ld(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Zm(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Fg(s.remoteStore,a.targetId),ng(s,a.targetId)})).catch(Sl)):(ng(s,a.targetId),await Zm(s.localStore,a.targetId,!0))}async function B4(r,e){const t=Ve(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Fg(t.remoteStore,s.targetId))}async function H4(r,e,t){const s=K4(r);try{const a=await(function(u,p){const g=Ve(u),y=It.now(),b=p.reduce(((k,V)=>k.add(V.key)),Ze());let _,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let V=oi(),$=Ze();return g.xs.getEntries(k,b).next((Z=>{V=Z,V.forEach(((ae,he)=>{he.isValidDocument()||($=$.add(ae))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,V))).next((Z=>{_=Z;const ae=[];for(const he of p){const pe=nI(he,_.get(he.key).overlayedDocument);pe!=null&&ae.push(new xa(he.key,pe,cE(pe.value.mapValue),rs.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,ae,p)})).next((Z=>{T=Z;const ae=Z.applyToLocalDocumentSet(_,$);return g.documentOverlayCache.saveOverlays(k,Z.batchId,ae)}))})).then((()=>({batchId:T.batchId,changes:xE(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(u,p,g){let y=u.du[u.currentUser.toKey()];y||(y=new zt(We)),y=y.insert(p,g),u.du[u.currentUser.toKey()]=y})(s,a.batchId,t),await hu(s,a.changes),await qd(s.remoteStore)}catch(a){const l=Xg(a,"Failed to persist write");t.reject(l)}}async function tT(r,e){const t=Ve(r);try{const s=await e4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(pt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?pt(u.hu,14607):a.removedDocuments.size>0&&(pt(u.hu,42227),u.hu=!1))})),await hu(t,s,e)}catch(s){await Sl(s)}}function P_(r,e,t){const s=Ve(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,u)=>{const p=u.view.va(e);p.snapshot&&a.push(p.snapshot)})),(function(u,p){const g=Ve(u);g.onlineState=p;let y=!1;g.queries.forEach(((b,_)=>{for(const T of _.ba)T.va(p)&&(y=!0)})),y&&Zg(g)})(s.eventManager,e),a.length&&s.Pu.J_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function G4(r,e,t){const s=Ve(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let u=new zt(Se.comparator);u=u.insert(l,Vn.newNoDocument(l,Me.min()));const p=Ze().add(l),g=new Bd(Me.min(),new Map,new zt(We),u,p);await tT(s,g),s.Ru=s.Ru.remove(l),s.Au.delete(e),n0(s)}else await Zm(s.localStore,e,!1).then((()=>ng(s,e,t))).catch(Sl)}async function q4(r,e){const t=Ve(r),s=e.batch.batchId;try{const a=await ZI(t.localStore,e);rT(t,s,null),nT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await hu(t,a)}catch(a){await Sl(a)}}async function F4(r,e,t){const s=Ve(r);try{const a=await(function(u,p){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((_=>(pt(_!==null,37113),b=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(s.localStore,e);rT(s,e,t),nT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await hu(s,a)}catch(a){await Sl(a)}}function nT(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function rT(r,e,t){const s=Ve(r);let a=s.du[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.du[s.currentUser.toKey()]=a}}function ng(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||sT(r,s)}))}function sT(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Fg(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),n0(r))}function M_(r,e,t){for(const s of t)s instanceof WE?(r.Vu.addReference(s.key,e),$4(r,s)):s instanceof ZE?(ge(t0,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||sT(r,s.key)):Ie(19791,{wu:s})}function $4(r,e){const t=e.key,s=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(s)||(ge(t0,"New document in limbo: "+t),r.Eu.add(s),n0(r))}function n0(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Se(Ct.fromString(e)),s=r.fu.next();r.Au.set(s,new P4(t)),r.Ru=r.Ru.insert(t,s),$E(r.remoteStore,new ta(As(Md(t.path)),s,"TargetPurposeLimboResolution",jd.ce))}}async function hu(r,e,t){const s=Ve(r),a=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{u.push(s.pu(g,e,t).then((y=>{var b;if((y||t)&&s.isPrimaryClient){const _=y?!y.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){a.push(y);const _=Gg.Es(g.targetId,y);l.push(_)}})))})),await Promise.all(u),s.Pu.J_(a),await(async function(g,y){const b=Ve(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>re.forEach(y,(T=>re.forEach(T.Ts,(k=>b.persistence.referenceDelegate.addReference(_,T.targetId,k))).next((()=>re.forEach(T.Is,(k=>b.persistence.referenceDelegate.removeReference(_,T.targetId,k)))))))))}catch(_){if(!Nl(_))throw _;ge(qg,"Failed to update sequence numbers: "+_)}for(const _ of y){const T=_.targetId;if(!_.fromCache){const k=b.vs.get(T),V=k.snapshotVersion,$=k.withLastLimboFreeSnapshotVersion(V);b.vs=b.vs.insert(T,$)}}})(s.localStore,l))}async function Y4(r,e){const t=Ve(r);if(!t.currentUser.isEqual(e)){ge(t0,"User change. New user:",e.toKey());const s=await HE(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((p=>{p.forEach((g=>{g.reject(new fe(te.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await hu(t,s.Ns)}}function Q4(r,e){const t=Ve(r),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let a=Ze();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const p=t.Tu.get(u);a=a.unionWith(p.view.nu)}return a}}function iT(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G4.bind(null,e),e.Pu.J_=I4.bind(null,e.eventManager),e.Pu.yu=D4.bind(null,e.eventManager),e}function K4(r){const e=Ve(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F4.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WI(this.persistence,new KI,e.initialUser,this.serializer)}Cu(e){return new BE(Hg.Vi,this.serializer)}Du(e){return new i4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class X4 extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pt(this.persistence.referenceDelegate instanceof bd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OI(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ar.withCacheSize(this.cacheSizeBytes):ar.DEFAULT;return new BE((s=>bd.Vi(s,t)),this.serializer)}}class rg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>P_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y4.bind(null,this.syncEngine),await A4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new k4})()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),s=u4(e.databaseInfo);return m4(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,u,p){return new y4(s,a,l,u,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>P_(this.syncEngine,t,0)),(function(){return R_.v()?new R_:new a4})())}createSyncEngine(e,t){return(function(a,l,u,p,g,y,b){const _=new M4(a,l,u,p,g,y);return b&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ve(a);ge(ao,"RemoteStore shutting down."),l.Ea.add(5),await uu(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}rg.provider={build:()=>new rg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="FirestoreClient";class J4{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=a,this.user=Mn.UNAUTHENTICATED,this.clientId=kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{ge(ma,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ge(ma,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Xg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Em(r,e){r.asyncQueue.verifyOperationInProgress(),ge(ma,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await HE(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function L_(r,e){r.asyncQueue.verifyOperationInProgress();const t=await W4(r);ge(ma,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>I_(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>I_(e.remoteStore,a))),r._onlineComponents=e}async function W4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(ma,"Using user provided OfflineComponentProvider");try{await Em(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),await Em(r,new _d)}}else ge(ma,"Using default OfflineComponentProvider"),await Em(r,new X4(void 0));return r._offlineComponents}async function aT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(ma,"Using user provided OnlineComponentProvider"),await L_(r,r._uninitializedComponentsProvider._online)):(ge(ma,"Using default OnlineComponentProvider"),await L_(r,new rg))),r._onlineComponents}function Z4(r){return aT(r).then((e=>e.syncEngine))}async function wd(r){const e=await aT(r),t=e.eventManager;return t.onListen=L4.bind(null,e.syncEngine),t.onUnlisten=z4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=V4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=B4.bind(null,e.syncEngine),t}function e5(r,e,t,s){const a=new r0(s),l=new e0(e,a,t);return r.asyncQueue.enqueueAndForget((async()=>Jg(await wd(r),l))),()=>{a.Nu(),r.asyncQueue.enqueueAndForget((async()=>Wg(await wd(r),l)))}}function t5(r,e,t={}){const s=new ri;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new r0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Wg(l,_)));const k=T.docs.has(p);!k&&T.fromCache?y.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&T.fromCache&&g&&g.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new e0(Md(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Jg(l,_)})(await wd(r),r.asyncQueue,e,t,s))),s.promise}function n5(r,e,t={}){const s=new ri;return r.asyncQueue.enqueueAndForget((async()=>(function(l,u,p,g,y){const b=new r0({next:T=>{b.Nu(),u.enqueueAndForget((()=>Wg(l,_))),T.fromCache&&g.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),_=new e0(p,b,{includeMetadataChanges:!0,Ka:!0});return Jg(l,_)})(await wd(r),r.asyncQueue,e,t,s))),s.promise}function r5(r,e){const t=new ri;return r.asyncQueue.enqueueAndForget((async()=>H4(await Z4(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="ComponentProvider",V_=new Map;function i5(r,e,t,s,a){return new Sk(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,oT(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firestore.googleapis.com",U_=!0;class z_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lT,this.ssl=U_}else this.host=e.host,this.ssl=e.ssl??U_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new sk;switch(s.type){case"firstParty":return new lk(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=V_.get(t);s&&(ge(s5,"Removing Datastore"),V_.delete(t),s.terminate())})(this),Promise.resolve()}}function a5(r,e,t,s={}){var y;r=wr(r,Fd);const a=_l(e),l=r._getSettings(),u={...l,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${t}`;a&&(nw(`https://${p}`),rw("Firestore",!0)),l.host!==lT&&l.host!==p&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:p,ssl:a,emulatorOptions:s};if(!eo(g,u)&&(r._setSettings(g),s.mockUserToken)){let b,_;if(typeof s.mockUserToken=="string")b=s.mockUserToken,_=Mn.MOCK_USER;else{b=pN(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Mn(T)}r._authCredentials=new ik(new Jw(b,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class Xt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}toJSON(){return{type:Xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(au(t,Xt._jsonSchema))return new Xt(e,s||null,new Se(Ct.fromString(t.referencePath)))}}Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:hn("string",Xt._jsonSchemaVersion),referencePath:hn("string")};class ca extends mo{constructor(e,t,s){super(e,t,Md(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new Se(e))}withConverter(e){return new ca(this.firestore,e,this._path)}}function go(r,e,...t){if(r=bn(r),Ww("collection","path",e),r instanceof Fd){const s=Ct.fromString(e,...t);return Zx(s),new ca(r,null,s)}{if(!(r instanceof Xt||r instanceof ca))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ct.fromString(e,...t));return Zx(s),new ca(r.firestore,null,s)}}function Hr(r,e,...t){if(r=bn(r),arguments.length===1&&(e=kg.newId()),Ww("doc","path",e),r instanceof Fd){const s=Ct.fromString(e,...t);return Wx(s),new Xt(r,null,new Se(s))}{if(!(r instanceof Xt||r instanceof ca))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ct.fromString(e,...t));return Wx(s),new Xt(r.firestore,r instanceof ca?r.converter:null,new Se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="AsyncQueue";class H_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qE(this,"async_queue_retry"),this._c=()=>{const s=wm();s&&ge(B_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=wm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=wm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ri;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Nl(e))throw e;ge(B_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ai("INTERNAL UNHANDLED ERROR: ",G_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Kg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ie(47125,{Pc:G_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function G_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ga extends Fd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new H_,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H_(e),this._firestoreClient=void 0,await e}}}function o5(r,e){const t=typeof r=="object"?r:ow(),s=typeof r=="string"?r:dd,a=xg(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=dN("firestore");l&&a5(a,...l)}return a}function $d(r){if(r._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||l5(r),r._firestoreClient}function l5(r){var s,a,l,u;const e=r._freezeSettings(),t=i5(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new J4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(g){const y=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(y),_online:y}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(Rn.fromBase64String(e))}catch(t){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Br(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:hn("string",Br._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ks._jsonSchemaVersion}}static fromJSON(e){if(au(e,ks._jsonSchema))return new ks(e.latitude,e.longitude)}}ks._jsonSchemaVersion="firestore/geoPoint/1.0",ks._jsonSchema={type:hn("string",ks._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ss(e.vectorValues);throw new fe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:hn("string",ss._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=/^__.*__$/;class u5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new xa(e,this.data,this.fieldMask,t,this.fieldTransforms):new lu(e,this.data,t,this.fieldTransforms)}}class cT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new xa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:r})}}class a0{constructor(e,t,s,a,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new a0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ed(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(uT(this.dataSource)&&c5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class h5{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Hd(e)}createContext(e,t,s,a=!1){return new a0({dataSource:e,methodName:t,targetDoc:s,path:Nn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o0(r){const e=r._freezeSettings(),t=Hd(r._databaseId);return new h5(r._databaseId,!!e.ignoreUndefinedProperties,t)}function d5(r,e,t,s,a,l={}){const u=r.createContext(l.merge||l.mergeFields?2:0,e,t,a);l0("Data must be an object, but it was:",u,s);const p=hT(s,u);let g,y;if(l.merge)g=new _r(u.fieldMask),y=u.fieldTransforms;else if(l.mergeFields){const b=[];for(const _ of l.mergeFields){const T=xl(e,_,t);if(!u.contains(T))throw new fe(te.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);pT(b,T)||b.push(T)}g=new _r(b),y=u.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=u.fieldTransforms;return new u5(new or(p),g,y)}class Yd extends i0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yd}}function f5(r,e,t,s){const a=r.createContext(1,e,t);l0("Data must be an object, but it was:",a,s);const l=[],u=or.empty();ba(s,((g,y)=>{const b=fT(e,g,t);y=bn(y);const _=a.childContextForFieldPath(b);if(y instanceof Yd)l.push(b);else{const T=du(y,_);T!=null&&(l.push(b),u.set(b,T))}}));const p=new _r(l);return new cT(u,p,a.fieldTransforms)}function p5(r,e,t,s,a,l){const u=r.createContext(1,e,t),p=[xl(e,s,t)],g=[a];if(l.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)p.push(xl(e,l[T])),g.push(l[T+1]);const y=[],b=or.empty();for(let T=p.length-1;T>=0;--T)if(!pT(y,p[T])){const k=p[T];let V=g[T];V=bn(V);const $=u.childContextForFieldPath(k);if(V instanceof Yd)y.push(k);else{const Z=du(V,$);Z!=null&&(y.push(k),b.set(k,Z))}}const _=new _r(y);return new cT(b,_,u.fieldTransforms)}function m5(r,e,t,s=!1){return du(t,r.createContext(s?4:3,e))}function du(r,e){if(dT(r=bn(r)))return l0("Unsupported field value:",e,r),hT(r,e);if(r instanceof i0)return(function(s,a){if(!uT(a.dataSource))throw a.createError(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,a){const l=[];let u=0;for(const p of s){let g=du(p,a.childContextForArray(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(r,e)}return(function(s,a){if((s=bn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Xk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=It.fromDate(s);return{timestampValue:vd(a.serializer,l)}}if(s instanceof It){const l=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:vd(a.serializer,l)}}if(s instanceof ks)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Br)return{bytesValue:DE(a.serializer,s._byteString)};if(s instanceof Xt){const l=a.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zg(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ss)return(function(u,p){const g=u instanceof ss?u.toArray():u;return{mapValue:{fields:{[oE]:{stringValue:lE},[fd]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Mg(p.serializer,b)}))}}}}}})(s,a);if(UE(s))return s._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Dd(s)}`)})(r,e)}function hT(r,e){const t={};return tE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(r,((s,a)=>{const l=du(a,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function dT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof It||r instanceof ks||r instanceof Br||r instanceof Xt||r instanceof i0||r instanceof ss||UE(r))}function l0(r,e,t){if(!dT(t)||!Zw(t)){const s=Dd(t);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function xl(r,e,t){if((e=bn(e))instanceof s0)return e._internalPath;if(typeof e=="string")return fT(r,e);throw Ed("Field path arguments must be of type string or ",r,!1,void 0,t)}const g5=new RegExp("[~\\*/\\[\\]]");function fT(r,e,t){if(e.search(g5)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new s0(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ed(r,e,t,s,a){const l=s&&!s.isEmpty(),u=a!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${a}`),g+=")"),new fe(te.INVALID_ARGUMENT,p+r+g)}function pT(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{convertValue(e,t="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ba(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[fd].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>tn(u.doubleValue)));return new ss(t)}convertGeoPoint(e){return new ks(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Pd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const t=ha(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ct.fromString(e);pt(VE(s),9688,{name:e});const a=new Qc(s.get(1),s.get(3)),l=new Se(s.popFirst(5));return a.isEqual(t)||ai(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0 extends y5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}}const q_="@firebase/firestore",F_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(r){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(xl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class v5 extends mT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}class b5 extends u0{}function h0(r,e,...t){let s=[];e instanceof u0&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((g=>g instanceof f0)).length,p=l.filter((g=>g instanceof Qd)).length;if(u>1||u>0&&p>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Qd extends b5{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Qd(e,t,s)}_apply(e){const t=this._parse(e);return yT(e._query,t),new mo(e.firestore,e.converter,Ym(e._query,t))}_parse(e){const t=o0(e.firestore);return(function(l,u,p,g,y,b,_){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Q_(_,b);const V=[];for(const $ of _)V.push(Y_(g,l,$));T={arrayValue:{values:V}}}else T=Y_(g,l,_)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Q_(_,b),T=m5(p,u,_,b==="in"||b==="not-in");return un.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function d0(r,e,t){const s=e,a=xl("where",r);return Qd._create(a,s,t)}class f0 extends u0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new f0(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:as.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const p=l.getFlattenedFilters();for(const g of p)yT(u,g),u=Ym(u,g)})(e._query,t),new mo(e.firestore,e.converter,Ym(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Y_(r,e,t){if(typeof(t=bn(t))=="string"){if(t==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gE(e)&&t.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ct.fromString(t));if(!Se.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return o_(r,new Se(s))}if(t instanceof Xt)return o_(r,t._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(t)}.`)}function Q_(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yT(r,e){const t=(function(a,l){for(const u of a)for(const p of u.getFlattenedFilters())if(l.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function x5(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class Dc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wa extends mT{constructor(e,t,s,a,l,u){super(e,t,s,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xl("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wa._jsonSchema={type:hn("string",Wa._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Wh extends Wa{data(e={}){return super.data(e)}}class Za{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Dc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Wh(this._firestore,this._userDataWriter,s.key,s,new Dc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Dc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((p=>l||p.type!==3)).map((p=>{const g=new Wh(a._firestore,a._userDataWriter,p.doc.key,p.doc,new Dc(a._snapshot.mutatedKeys.has(p.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,b=-1;return p.type!==0&&(y=u.indexOf(p.doc.key),u=u.delete(p.doc.key)),p.type!==1&&(u=u.add(p.doc),b=u.indexOf(p.doc.key)),{type:_5(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Za._jsonSchemaVersion="firestore/querySnapshot/1.0",Za._jsonSchema={type:hn("string",Za._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(r){r=wr(r,Xt);const e=wr(r.firestore,ga),t=$d(e);return t5(t,r._key).then((s=>bT(e,r,s)))}function fu(r){r=wr(r,mo);const e=wr(r.firestore,ga),t=$d(e),s=new c0(e);return gT(r._query),n5(t,r._query).then((a=>new Za(e,s,r,a)))}function vT(r,e,t){r=wr(r,Xt);const s=wr(r.firestore,ga),a=x5(r.converter,e),l=o0(s);return g0(s,[d5(l,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,rs.none())])}function Kd(r,e,t,...s){r=wr(r,Xt);const a=wr(r.firestore,ga),l=o0(a);let u;return u=typeof(e=bn(e))=="string"||e instanceof s0?p5(l,"updateDoc",r._key,e,t,s):f5(l,"updateDoc",r._key,e),g0(a,[u.toMutation(r._key,rs.exists(!0))])}function Td(r){return g0(wr(r.firestore,ga),[new Lg(r._key,rs.none())])}function m0(r,...e){var y,b,_;r=bn(r);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$_(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($_(e[s])){const T=e[s];e[s]=(y=T.next)==null?void 0:y.bind(T),e[s+1]=(b=T.error)==null?void 0:b.bind(T),e[s+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,p;if(r instanceof Xt)u=wr(r.firestore,ga),p=Md(r._key.path),l={next:T=>{e[s]&&e[s](bT(u,r,T))},error:e[s+1],complete:e[s+2]};else{const T=wr(r,mo);u=wr(T.firestore,ga),p=T._query;const k=new c0(u);l={next:V=>{e[s]&&e[s](new Za(u,k,T,V))},error:e[s+1],complete:e[s+2]},gT(r._query)}const g=$d(u);return e5(g,p,a,l)}function g0(r,e){const t=$d(r);return r5(t,e)}function bT(r,e,t){const s=t.docs.get(e._key),a=new c0(r);return new Wa(r,a,e._key,s,new Dc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){rk(wl),pl(new to("firestore",((s,{instanceIdentifier:a,options:l})=>{const u=s.getProvider("app").getImmediate(),p=new ga(new ak(s.getProvider("auth-internal")),new ck(u,s.getProvider("app-check-internal")),Nk(u,a),u);return l={useFetchStreams:t,...l},p._setSettings(l),p}),"PUBLIC").setMultipleInstances(!0)),oa(q_,F_,e),oa(q_,F_,"esm2020")})();const w5={apiKey:"AIzaSyD2rR0OH2OzSlt4fs2w72TKOUNDngp0zXQ",authDomain:"singmode-7c657.firebaseapp.com",projectId:"singmode-7c657",storageBucket:"singmode-7c657.firebasestorage.app",messagingSenderId:"292866266443",appId:"1:292866266443:web:190d34e55980509c1b04ce"},xT=aw(w5),y0=tk(xT),gn=o5(xT),v0="kstar_karaoke_session",Cn="kstar_active_user",An="kstar_user_accounts";let Jt=!1,K_=Promise.resolve();const pu=async r=>await(K_=K_.then(async()=>{const t=await Qe(),s=await r(t);return await vt(t),s})),_T={id:"current-session",participants:[],requests:[],currentRound:null,history:[],messages:[],tickerMessages:[],verifiedSongbook:[],isPlayingVideo:!1,nextRequestNumber:1,maxRequestsPerUser:5,bannedUsers:[],deviceConnections:[],queueStrategy:Ss.FRESH_MEAT,startedAt:Date.now()},sg=typeof window<"u"&&window.chrome&&window.chrome.storage,nt={get:async r=>{if(sg)return(await window.chrome.storage.local.get([r]))[r];const e=localStorage.getItem(r);return e?JSON.parse(e):null},set:async(r,e)=>{sg?await window.chrome.storage.local.set({[r]:e}):localStorage.setItem(r,JSON.stringify(e)),typeof window<"u"&&(window.dispatchEvent(new Event("kstar_sync")),window.dispatchEvent(new Event("storage")))}};it.onStateReceived=r=>{Jt&&nt.set(v0,r)};it.onActionReceived=r=>{E5(r)};it.onPeerConnected=async()=>{if(!Jt){const r=await Qe();it.broadcastState(r)}};async function E5(r){switch(r.type){case"ADD_REQUEST":await Qi(r.payload);break;case"JOIN_SESSION":{const{id:s,profile:a}=r.payload;if(a){const l=await Bt(),u=l.findIndex(p=>p.id===s);u===-1?(l.push(a),await nt.set(An,l)):(l[u]={...l[u],...a},await nt.set(An,l))}await na(s),ag(`${(a==null?void 0:a.name)||s} joined the session`,"info"),await pu(l=>{l.deviceConnections||(l.deviceConnections=[]);const u=l.deviceConnections.findIndex(p=>p.peerId===r.senderId);u>-1?(l.deviceConnections[u].userId=s,l.deviceConnections[u].isGuest=(a==null?void 0:a.isGuest)??!1,r.payload.userAgent&&(l.deviceConnections[u].userAgent=r.payload.userAgent)):l.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r.senderId,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:r.payload.userAgent||"Unknown",userId:s,isGuest:(a==null?void 0:a.isGuest)??!1})});break}case"TOGGLE_STATUS":await ra(r.payload.id,r.payload.status);break;case"TOGGLE_MIC":await U5(r.payload.id,r.payload.enabled);break;case"DELETE_REQUEST":await Ki(r.payload);break;case"UPDATE_REQUEST":await Uc(r.payload.id,r.payload.updates);break;case"ADD_CHAT":await q5(r.senderId,r.payload.name,r.payload.text);break;case"SYNC_PROFILE":if(Jt){const s=await Un();s&&s.id===r.payload.id&&await nt.set(Cn,r.payload)}const e=await Bt(),t=e.findIndex(s=>s.id===r.payload.id);t>-1?e[t]=r.payload:e.push(r.payload),await nt.set(An,e);break;case"TOGGLE_FAVORITE":Jt||await TT(r.payload,r.senderId);break;case"REORDER_ROUND":await ST(r.payload);break;case"REORDER_REQUESTS":await NT(r.payload);break;case"REORDER_PENDING":await CT(r.payload);break;case"REORDER_MY_REQUESTS":await lg(r.senderId,r.payload.requestId,r.payload.direction);break}}const ig=async(r,e)=>{Jt=r==="PARTICIPANT"&&!!e;const t=await it.initialize(r,e);if(!Jt&&t){const s=await Un(),a=(s==null?void 0:s.name)||"SingMode DJ",l=s==null?void 0:s.id;await $5({id:t,hostName:a,hostUid:l,isActive:!0,startedAt:Date.now()});const u=setInterval(()=>{Y5(t)},120*1e3);window.addEventListener("beforeunload",()=>{clearInterval(u),AT(t)});const p=go(gn,"users");m0(p,g=>{const y=[];g.forEach(b=>{y.push(b.data())}),console.log("Synced users from Firestore:",y.length),nt.set(An,y)}),it.onDeviceConnected=g=>{T5(g),ag(`New device connected: ${g.substr(0,8)}...`,"info")},it.onDeviceDisconnected=async g=>{const y=await Qe();if(y.deviceConnections){const b=y.deviceConnections.findIndex(_=>_.peerId===g);if(b>-1){const _=y.deviceConnections[b].id;y.deviceConnections[b].status="disconnected",y.deviceConnections[b].lastSeen=Date.now(),await vt(y),ag(`Device disconnected: ${_}`,"warn")}}}}},T5=async r=>{await pu(e=>{e.deviceConnections||(e.deviceConnections=[]);const t=e.deviceConnections.findIndex(s=>s.peerId===r);t>-1?(e.deviceConnections[t].status="connected",e.deviceConnections[t].lastSeen=Date.now()):e.deviceConnections.push({id:`D-${Math.random().toString(36).substr(2,4).toUpperCase()}`,peerId:r,connectedAt:Date.now(),lastSeen:Date.now(),status:"connected",userAgent:"Unknown"})})},S5=async(r,e,t=!1)=>{await pu(s=>{if(!s.deviceConnections)return;const a=s.deviceConnections.findIndex(l=>l.id===r);a>-1&&(s.deviceConnections[a].userId=e,s.deviceConnections[a].isGuest=t)})},N5=async r=>{await pu(e=>{e.deviceConnections&&(e.deviceConnections=e.deviceConnections.filter(t=>t.id!==r))})},Qe=async()=>{const r=await nt.get(v0)||{..._T};return r.history||(r.history=[]),r.messages||(r.messages=[]),r.tickerMessages||(r.tickerMessages=[]),r.verifiedSongbook||(r.verifiedSongbook=[]),r.isPlayingVideo===void 0&&(r.isPlayingVideo=!1),r.nextRequestNumber||(r.nextRequestNumber=1),r.maxRequestsPerUser===void 0&&(r.maxRequestsPerUser=5),r.bannedUsers||(r.bannedUsers=[]),r.deviceConnections||(r.deviceConnections=[]),r.logs||(r.logs=[]),r.queueStrategy||(r.queueStrategy=Ss.FRESH_MEAT),r},vt=async r=>{await nt.set(v0,r),it.broadcastState(r);try{const e=Hr(gn,"sessions",r.id);await Kd(e,{fullState:JSON.stringify(r),participantsCount:r.participants.length,lastHeartbeat:Date.now()})}catch(e){console.warn("[SessionManager] Could not persist state to Firestore:",e)}},ag=async(r,e="info")=>{await pu(t=>{t.logs||(t.logs=[]),t.logs.push({timestamp:Date.now(),message:r,type:e}),t.logs.length>100&&(t.logs=t.logs.slice(-100))})},wT=(r,e)=>{if(e.youtubeUrl&&e.youtubeUrl.trim()!==""){const t=r.verifiedSongbook.find(s=>s.songName.toLowerCase()===e.songName.toLowerCase()&&s.artist.toLowerCase()===e.artist.toLowerCase());if(t)t.youtubeUrl!==e.youtubeUrl&&(t.youtubeUrl=e.youtubeUrl);else{const s={id:Math.random().toString(36).substr(2,9),songName:e.songName,artist:e.artist,youtubeUrl:e.youtubeUrl,type:e.type,addedAt:Date.now()};r.verifiedSongbook.push(s)}}},C5=async r=>{const e=await Qe(),t={...r,id:Math.random().toString(36).substr(2,9),addedAt:Date.now()};e.verifiedSongbook.push(t),await vt(e)},A5=async(r,e)=>{const t=await Qe(),s=t.verifiedSongbook.findIndex(a=>a.id===r);s!==-1&&(t.verifiedSongbook[s]={...t.verifiedSongbook[s],...e},await vt(t))},X_=async r=>{const e=await Qe();e.verifiedSongbook=e.verifiedSongbook.filter(t=>t.id!==r),await vt(e)},R5=async()=>{const r=await Qe(),e={..._T,id:`session-${Date.now()}`,verifiedSongbook:r.verifiedSongbook,nextRequestNumber:1,startedAt:Date.now()};await vt(e)},Bt=async()=>{let r=await nt.get(An);if(!r||r.length===0){try{const t=go(gn,"users"),s=await fu(t),a=[];if(s.forEach(l=>a.push(l.data())),a.length>0)return await nt.set(An,a),a}catch(t){console.error("Error fetching users from Firebase:",t)}return Array.from({length:5},(t,s)=>({id:`singer-${s+1}`,name:`Singer${s+1}`,favorites:[],personalHistory:[],createdAt:Date.now()}))}return r},oo=async(r,e)=>{try{const t=Hr(gn,"users",r);if(e.name&&(await Bt()).find(p=>{var g;return p.id!==r&&p.name.toLowerCase()===((g=e.name)==null?void 0:g.toLowerCase())}))return{success:!1,error:"Username already exists."};await Kd(t,e);const s=await Bt(),a=s.findIndex(l=>l.id===r);if(a>-1){s[a]={...s[a],...e},await nt.set(An,s);const l=await Un();l&&l.id===r&&await nt.set(Cn,s[a]),Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:s[a],senderId:"DJ"})}return{success:!0}}catch(t){return console.error("Error updating account:",t),{success:!1,error:t.message}}},k5=async(r,e)=>{const t=await Bt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a=t[s].favorites.filter(l=>l.id!==e);await oo(r,{favorites:a})}},I5=async(r,e,t)=>{const s=await Bt(),a=s.findIndex(l=>l.id===r);if(a>-1){const l=[...s[a].favorites],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await oo(r,{favorites:l}))}},D5=async(r,e)=>{const t=await Bt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a={...e,id:Math.random().toString(36).substr(2,9)},l=[...t[s].favorites,a];await oo(r,{favorites:l})}},j5=async(r,e)=>{const t=await Bt(),s=t.findIndex(a=>a.id===r);if(s>-1){const a=t[s].personalHistory.filter(l=>l.id!==e);await oo(r,{personalHistory:a})}},O5=async(r,e,t)=>{const s=await Bt(),a=s.findIndex(l=>l.id===r);if(a>-1){const l=[...s[a].personalHistory],u=l.findIndex(p=>p.id===e);u>-1&&(l[u]={...l[u],...t},await oo(r,{personalHistory:l}))}},Zh=async r=>{await og(r);try{await Td(Hr(gn,"users",r));let t=await Bt();t=t.filter(s=>s.id!==r),await nt.set(An,t)}catch(t){console.error("Error deleting account",t)}const e=await Un();e&&e.id===r&&await Xd()},ET=async()=>{try{const r=await Bt(),e=[],t=new Map;for(const s of r){if(!s.password){e.push(s.id);continue}const a=s.name.toLowerCase().trim();t.has(a)?e.push(s.id):t.set(a,s.id)}if(e.length>0){for(const u of e)await Td(Hr(gn,"users",u));const s=go(gn,"users"),a=await fu(s),l=[];a.forEach(u=>l.push(u.data())),await nt.set(An,l)}return{success:!0,deletedCount:e.length}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},Un=async()=>await nt.get(Cn),Wc=async(r,e=!1)=>{var t;try{let s=r.id;const a=!!(r.password&&r.email),l=!!(r.password&&!r.email);if(a)try{s=(await zA(y0,r.email,r.password)).user.uid}catch(y){if(y.code==="auth/email-already-in-use")return{success:!1,error:"Email already in use."};throw y}else if(l){if((await Bt()).find(_=>{var T;return _.name.toLowerCase()===((T=r.name)==null?void 0:T.trim().toLowerCase())}))return{success:!1,error:"Username already taken."};s=J_()||`user-${Date.now()}-${Math.random().toString(36).substr(2,5)}`}else s=r.id||J_()||`guest-${Math.random().toString(36).substr(2,9)}`;const u={id:s,name:((t=r.name)==null?void 0:t.trim())||"Guest",email:r.email||void 0,password:l?r.password:void 0,isGuest:!a&&!l,favorites:r.favorites||[],personalHistory:r.personalHistory||[],createdAt:Date.now()},p=JSON.parse(JSON.stringify(u));await vT(Hr(gn,"users",s),p);const g=await Bt();return g.some(y=>y.id===s)||(g.push(u),await nt.set(An,g)),e?await nt.set(Cn,u):Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:u,senderId:"DJ"}),{success:!0,profile:u}}catch(s){return console.error("Registration error:",s),{success:!1,error:s.message}}},J_=()=>{},P5=async(r,e)=>{if(r.toLowerCase()==="singmaster"&&e==="Organized"){const a={id:"admin-singmaster",name:"SingMaster",password:"Organized",favorites:[],personalHistory:[],createdAt:Date.now()};return await nt.set(Cn,a),{success:!0,profile:a}}const t=await Bt();let s=t.find(a=>a.name.toLowerCase()===r.toLowerCase());if(!s)try{const a=go(gn,"users"),l=h0(a,d0("name","==",r)),u=await fu(l);u.empty||(s=u.docs[0].data(),t.push(s),await nt.set(An,t))}catch(a){console.warn("Error checking remote user:",a)}if(!s&&!e)return await Wc({name:r},!0);if(e)try{const a=`${r.replace(/\s+/g,"").toLowerCase()}@singmode.app`,u=(await BA(y0,a,e)).user.uid,p=await p0(Hr(gn,"users",u));if(p.exists()){const g=p.data();return await nt.set(Cn,g),{success:!0,profile:g}}else return s?{success:!0,profile:s}:{success:!1,error:"Profile data missing."}}catch(a){return console.warn("Firebase login failed, checking legacy local storage:",a),s?s.password&&s.password===e?(await nt.set(Cn,s),{success:!0,profile:s}):{success:!1,error:"Incorrect passkey."}:{success:!1,error:a.message||"Login failed."}}return s?(await nt.set(Cn,s),{success:!0,profile:s}):{success:!1,error:"User not found"}},M5=async r=>{const e=await Bt();let t=e.find(s=>s.id===r);if(!t)try{const s=Hr(gn,"users",r),a=await p0(s);a.exists()&&(t=a.data(),e.push(t),await nt.set(An,e))}catch(s){console.error("Error fetching user by ID:",s)}return t?(await nt.set(Cn,t),{success:!0,profile:t}):{success:!1,error:"User not found"}},Xd=async()=>{await qA(y0),sg?await window.chrome.storage.local.remove([Cn]):localStorage.removeItem(Cn),window.dispatchEvent(new Event("kstar_sync"))},na=async r=>{var l;const e=await Qe(),t=(l=e.bannedUsers)==null?void 0:l.find(u=>u.id===r);if(t)throw new Error(`ACCESS DENIED: ${t.reason}`);if(Jt){const u=await Un();return it.sendAction({type:"JOIN_SESSION",payload:{id:r,profile:u,userAgent:typeof navigator<"u"?navigator.userAgent:"Unknown"},senderId:it.getMyPeerId()||r}),{id:r,name:(u==null?void 0:u.name)||"Joining...",status:Ut.STANDBY,joinedAt:Date.now()}}const a=(await Bt()).find(u=>u.id===r);if(!a){const u=await Un();if(u&&u.id===r)return await W_(e,u);throw new Error("Profile not found")}return await W_(e,a)},W_=async(r,e)=>{const t={id:e.id,name:e.name,status:Ut.STANDBY,micEnabled:!1,joinedAt:Date.now()},s=r.participants.findIndex(a=>a.id===e.id);return s>-1?r.participants[s]={...r.participants[s],...t,status:r.participants[s].status}:r.participants.push(t),await vt(r),t},L5=async(r,e)=>{const t=await Bt(),s=t.findIndex(a=>a.id===r);if(s>-1){t[s].vocalRange=e,await nt.set(An,t),Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:t[s],senderId:"DJ"});const a=await Un();a&&a.id===r&&await nt.set(Cn,t[s])}},TT=async(r,e)=>{var l;const t=e||((l=await Un())==null?void 0:l.id);if(!t)return;if(Jt&&!e){it.sendAction({type:"TOGGLE_FAVORITE",payload:r,senderId:t});const u=await Un();if(u){const p=u.favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);p>-1?u.favorites.splice(p,1):u.favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await nt.set(Cn,u)}return}const s=await Bt(),a=s.findIndex(u=>u.id===t);if(a>-1){const u=s[a].favorites.findIndex(g=>g.songName===r.songName&&g.artist===r.artist);u>-1?s[a].favorites.splice(u,1):s[a].favorites.push({...r,id:Math.random().toString(36).substr(2,9)}),await nt.set(An,s),Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:s[a],senderId:"DJ"});const p=await Un();p&&p.id===t&&await nt.set(Cn,s[a])}},og=async r=>{const e=await Qe(),s=e.requests.filter(a=>a.participantId===r).map(a=>({...a,playedAt:Date.now(),status:Ue.DONE,isInRound:!1}));s.length>0&&(e.history=[...s,...e.history].slice(0,100)),e.participants=e.participants.filter(a=>a.id!==r),e.requests=e.requests.filter(a=>a.participantId!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(a=>a.participantId!==r),e.currentRound.length===0&&(e.currentRound=null)),await vt(e)},ra=async(r,e)=>{if(Jt){it.sendAction({type:"TOGGLE_STATUS",payload:{id:r,status:e},senderId:r});return}const t=await Qe(),s=t.participants.find(a=>a.id===r);s&&(s.status=e,await vt(t))},V5=async r=>{const e=await Qe();e.maxRequestsPerUser=r,await vt(e)},lg=async(r,e,t)=>{if(Jt){it.sendAction({type:"REORDER_MY_REQUESTS",payload:{requestId:e,direction:t},senderId:r});return}const s=await Qe(),a=s.requests.filter(b=>b.participantId===r&&b.status!==Ue.DONE),l=a.findIndex(b=>b.id===e);if(l===-1)return;const u=t==="up"?l-1:l+1;if(u<0||u>=a.length)return;const[p]=a.splice(l,1);a.splice(u,0,p);const g=[...s.requests];g.map((b,_)=>b.participantId===r&&b.status!==Ue.DONE?_:-1).filter(b=>b!==-1).forEach((b,_)=>{g[b]=a[_]}),s.requests=g,await vt(s)},U5=async(r,e)=>{if(Jt){it.sendAction({type:"TOGGLE_MIC",payload:{id:r,enabled:e},senderId:r});return}const t=await Qe(),s=t.participants.find(a=>a.id===r);s&&(s.micEnabled=e,await vt(t))},Qi=async r=>{if(Jt)return it.sendAction({type:"ADD_REQUEST",payload:r,senderId:r.participantId}),null;const e=await Qe(),t=e.nextRequestNumber++,s={...r,id:Math.random().toString(36).substr(2,9),requestNumber:t,createdAt:Date.now(),status:Ue.PENDING,isInRound:!1},a=e.requests.filter(g=>g.participantId===r.participantId&&g.status===Ue.PENDING).length;if(e.maxRequestsPerUser&&a>=e.maxRequestsPerUser)throw new Error(`Request limit reached. Max ${e.maxRequestsPerUser} requests allowed per performer.`);e.requests.unshift(s),wT(e,s);const l=await Bt(),u=l.findIndex(g=>g.id===r.participantId);u>-1&&(l[u].personalHistory=[s,...l[u].personalHistory].slice(0,50),await nt.set(An,l),Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}));const p=await Un();if(p&&p.id===r.participantId){const g=l.find(y=>y.id===r.participantId);g&&await nt.set(Cn,g)}return await vt(e),s},Uc=async(r,e)=>{if(Jt){it.sendAction({type:"UPDATE_REQUEST",payload:{id:r,updates:e},senderId:"client"});return}const t=await Qe(),s=t.requests.findIndex(l=>l.id===r);let a="";if(s!==-1&&(t.requests[s]={...t.requests[s],...e},a=t.requests[s].participantId,wT(t,t.requests[s])),t.currentRound){const l=t.currentRound.findIndex(u=>u.id===r);l!==-1&&(t.currentRound[l]={...t.currentRound[l],...e},a=t.currentRound[l].participantId)}if(a){const l=await Bt(),u=l.findIndex(g=>g.id===a);if(u>-1){const g=l[u].personalHistory.findIndex(y=>y.id===r);g!==-1&&(l[u].personalHistory[g]={...l[u].personalHistory[g],...e},await nt.set(An,l),Jt||it.broadcastAction({type:"SYNC_PROFILE",payload:l[u],senderId:"DJ"}))}const p=await Un();if(p&&p.id===a){const g=l.find(y=>y.id===a);g&&await nt.set(Cn,g)}}await vt(t)},Ec=async r=>{const e=await Qe(),t=e.requests.find(s=>s.id===r);t&&(t.status=Ue.APPROVED,await vt(e))},z5=async r=>{const e=await Qe(),t=e.requests.findIndex(a=>a.id===r);if(t===-1)return;const s=e.requests[t];s.status=Ue.APPROVED,s.isInRound=!0,e.currentRound?e.currentRound.push({...s}):e.currentRound=[{...s}],await vt(e)},Z_=async r=>{if(Jt)return;const e=await Qe(),t=e.requests.find(s=>s.id===r);if(t){if(t.status=Ue.DONE,t.completedAt=Date.now(),e.currentRound){const s=e.currentRound.find(a=>a.id===r);s&&(s.status=Ue.DONE,s.completedAt=Date.now())}await vt(e)}},Ki=async r=>{if(Jt){it.sendAction({type:"DELETE_REQUEST",payload:r,senderId:"client"});return}const e=await Qe();e.requests=e.requests.filter(t=>t.id!==r),e.currentRound&&(e.currentRound=e.currentRound.filter(t=>t.id!==r),e.currentRound.length===0&&(e.currentRound=null)),await vt(e)},e1=async(r,e)=>{const t=await Qe(),s=t.requests.findIndex(l=>l.id===r);if(s===-1)return;const a=e==="up"?s-1:s+1;if(a>=0&&a<t.requests.length){const l=t.requests[s];t.requests[s]=t.requests[a],t.requests[a]=l,await vt(t)}},B5=async r=>{const e=await Qe();e.queueStrategy=r,await vt(e)},H5=async()=>{const r=await Qe(),e=r.queueStrategy||Ss.FRESH_MEAT,t=r.requests.filter(a=>a.status===Ue.APPROVED&&a.type===ht.SINGING&&!a.isInRound),s=[];if(e===Ss.FIFO){const a=[...t].sort((l,u)=>l.createdAt-u.createdAt);s.push(...a.slice(0,10))}else{let l=[...r.participants.filter(u=>t.some(p=>p.participantId===u.id))];switch(e){case Ss.FRESH_MEAT:l.sort((g,y)=>(y.joinedAt||0)-(g.joinedAt||0));break;case Ss.OLDEST_MEMBER:l.sort((g,y)=>(g.joinedAt||0)-(y.joinedAt||0));break;case Ss.RANDOM:l.sort(()=>Math.random()-.5);break;case Ss.FAIR_ROTATION:const u=g=>r.requests.filter(y=>y.participantId===g&&y.status===Ue.DONE).length,p=g=>{var b;return((b=t.filter(_=>_.participantId===g).sort((_,T)=>_.createdAt-T.createdAt)[0])==null?void 0:b.createdAt)||Date.now()};l.sort((g,y)=>{const b=u(g.id),_=u(y.id);return b!==_?b-_:p(g.id)-p(y.id)});break}l.forEach(u=>{const g=t.filter(y=>y.participantId===u.id).sort((y,b)=>y.createdAt-b.createdAt)[0];g&&s.push(g)})}if(s.length===0){const a=r.requests.filter(l=>l.status===Ue.APPROVED&&l.type===ht.LISTENING&&!l.isInRound).sort((l,u)=>l.createdAt-u.createdAt);a.length>0&&s.push(...a.slice(0,5))}s.forEach(a=>{const l=r.requests.find(u=>u.id===a.id);if(l&&(l.isInRound=!0),a.type===ht.SINGING){const u=r.participants.find(p=>p.id===a.participantId);u&&(u.status=Ut.READY)}}),s.length>0&&(r.currentRound=s,await vt(r))},ST=async r=>{const e=await Qe();e.currentRound=r,await vt(e)},NT=async r=>{const e=await Qe(),t=e.requests.filter(s=>!(s.status===Ue.APPROVED&&s.type===ht.SINGING&&!s.isInRound));e.requests=[...r,...t],await vt(e)},CT=async r=>{const e=await Qe(),t=e.requests.filter(s=>!(s.status===Ue.PENDING&&!s.isInRound));e.requests=[...r,...t],await vt(e)},G5=async()=>{const r=await Qe();if(!r.currentRound)return;const e=[...r.currentRound].sort((p,g)=>p.completedAt&&g.completedAt?p.completedAt-g.completedAt:p.completedAt?-1:g.completedAt?1:0),t=Date.now(),s=e.map(p=>({...p,playedAt:t,isInRound:!1,status:Ue.DONE,completedAt:p.completedAt||t})),a=r.currentRound.map(p=>p.id);r.history=[...s,...r.history].slice(0,100),r.requests=r.requests.filter(p=>!a.includes(p.id));const l=await Bt();for(const p of s){const g=l.findIndex(y=>y.id===p.participantId);g!==-1&&(l[g].personalHistory=[p,...l[g].personalHistory].slice(0,50))}await nt.set(An,l);const u=await Un();if(u){const p=l.find(g=>g.id===u.id);p&&await nt.set(Cn,p)}r.currentRound=null,r.isPlayingVideo=!1,await vt(r)},Tm=async(r,e)=>{const t=await Qe(),s=t.nextRequestNumber++,a={...r,id:Math.random().toString(36).substr(2,9),requestNumber:s,createdAt:Date.now(),status:Ue.APPROVED,isInRound:!1,playedAt:void 0,aiIntro:void 0};t.requests.push(a),await vt(t)},t1=async()=>{const r=await Qe();r.history=[],await vt(r)},q5=async(r,e,t)=>{if(Jt){it.sendAction({type:"ADD_CHAT",payload:{name:e,text:t},senderId:r});return}const s=await Qe(),a={id:Math.random().toString(36).substr(2,9),senderId:r,senderName:e,text:t,timestamp:Date.now()};s.messages||(s.messages=[]),s.messages.push(a),await vt(s)},F5=async()=>{const r=await Bt(),e=Date.now(),t=1440*60*1e3,s=r.filter(a=>!a.password&&a.createdAt&&e-a.createdAt>t);if(s.length>0){for(const a of s)await Zh(a.id);console.log(`Cleaned up ${s.length} expired guest accounts.`)}},$5=async r=>{try{const e={id:r.id,hostName:r.hostName||"SingMode DJ",hostUid:r.hostUid||"anonymous-host",isActive:r.isActive??!0,startedAt:r.startedAt||Date.now(),lastHeartbeat:Date.now(),participantsCount:0,venueName:r.venueName||"SingMode Venue"};await vT(Hr(gn,"sessions",r.id),e)}catch(e){console.error("Error registering session:",e)}},Y5=async r=>{try{const e=Hr(gn,"sessions",r);await Kd(e,{lastHeartbeat:Date.now()})}catch(e){console.error("Error sending heartbeat:",e)}},AT=async r=>{try{const e=Hr(gn,"sessions",r);await Kd(e,{isActive:!1,endedAt:Date.now()})}catch(e){console.error("Error unregistering session:",e)}},Q5=async()=>{try{const r=go(gn,"sessions"),e=h0(r,d0("isActive","==",!1)),t=await fu(e),s=[];return t.forEach(a=>{s.push(a.data())}),s.sort((a,l)=>(l.endedAt||0)-(a.endedAt||0))}catch(r){return console.error("Error fetching session history:",r),[]}},K5=async()=>{try{const r=go(gn,"sessions"),e=await fu(r),t=Date.now(),s=1800*1e3;let a=0;for(const l of e.docs){const u=l.data();u.lastHeartbeat&&t-u.lastHeartbeat>s?(await Td(l.ref),a++):!u.lastHeartbeat&&t-u.startedAt>s&&(await Td(l.ref),a++)}return{success:!0,deletedCount:a}}catch(r){return console.error("Cleanup failed:",r),{success:!1,error:String(r)}}},RT=r=>{const e=go(gn,"sessions"),t=h0(e,d0("isActive","==",!0));return m0(t,s=>{const a=new Map,l=Date.now(),u=300*1e3;s.forEach(g=>{const y=g.data();if(y.lastHeartbeat&&l-y.lastHeartbeat<u){const _=y.hostUid||`${y.hostName}-${y.venueName}`,T=a.get(_);(!T||y.lastHeartbeat>T.lastHeartbeat)&&a.set(_,y)}});const p=Array.from(a.values()).sort((g,y)=>y.lastHeartbeat-g.lastHeartbeat);r(p)})},X5=(r,e)=>{const t=Hr(gn,"sessions",r);return m0(t,s=>{if(s.exists()){const a=s.data();if(a.fullState)try{const l=JSON.parse(a.fullState);e(l)}catch(l){console.error("[SessionManager] Error parsing fullState:",l)}}})},n1=async r=>{try{const e=Hr(gn,"sessions",r),t=await p0(e);if(t.exists()){const s=t.data();if(s.fullState)return JSON.parse(s.fullState)}return null}catch(e){return console.error(`[SessionManager] Error fetching session ${r}:`,e),null}},kT=({onSubmit:r,onCancel:e,title:t="Song Request",showSingerName:s=!1,initialSingerName:a="",initialSongName:l="",initialArtist:u="",initialYoutubeUrl:p="",initialType:g=ht.SINGING,submitLabel:y="SEND REQUEST",participants:b=[],currentUserId:_=""})=>{const[T,k]=ie.useState(a),V=T?`${t}: ${T}`:t,[$,Z]=ie.useState(l),[ae,he]=ie.useState(u),[pe,ye]=ie.useState(p),[De,Ee]=ie.useState(g),[A,C]=ie.useState(""),[R,L]=ie.useState(""),j=O=>{if(O.preventDefault(),(!$||!ae)&&!pe||s&&!T)return;const I=b.find(rt=>rt.id===R);r({singerName:T,songName:$,artist:ae,youtubeUrl:pe,type:De,message:A,duetPartnerId:R||void 0,duetPartnerName:I==null?void 0:I.name})};return h.jsxs("form",{onSubmit:j,className:"relative w-full bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in fade-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"mb-8 text-center",children:[h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase tracking-tight neon-text-glow-purple mb-2",children:V}),h.jsx("p",{className:"text-[10px] text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80",children:"NEW REQUEST"})]}),h.jsxs("div",{className:"space-y-6",children:[s&&h.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2",children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Your Name"}),h.jsx("input",{type:"text",required:!0,value:T,onChange:O=>k(O.target.value),placeholder:"e.g. STAR_VIBE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Song Title"}),h.jsx("input",{type:"text",value:$,onChange:O=>Z(O.target.value),placeholder:"TITLE",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Artist"}),h.jsx("input",{type:"text",value:ae,onChange:O=>he(O.target.value),placeholder:"ARTIST",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"YouTube URL (Optional)"}),h.jsx("input",{type:"url",value:pe,onChange:O=>ye(O.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all text-xs font-mono shadow-inner tracking-wider"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Note for DJ"}),h.jsx("textarea",{value:A,onChange:O=>C(O.target.value),placeholder:"Key change? Dedication?",rows:2,className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest resize-none"})]}),De===ht.SINGING&&b.length>1&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Duet Partner (Optional)"}),h.jsxs("select",{value:R,onChange:O=>L(O.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold focus:border-[var(--neon-green)] outline-none transition-all uppercase shadow-inner text-sm font-righteous tracking-widest appearance-none",children:[h.jsx("option",{value:"",children:"-- NO PARTNER --"}),b.filter(O=>O.id!==_).map(O=>h.jsx("option",{value:O.id,children:O.name},O.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-4 font-righteous",children:"Performance Mode"}),h.jsx("div",{className:"flex bg-black/40 p-1.5 rounded-2xl border-2 border-white/5",children:Object.values(ht).map(O=>h.jsx("button",{type:"button",onClick:()=>Ee(O),className:`flex-1 py-3 rounded-xl font-bold text-[9px] uppercase tracking-widest transition-all font-righteous ${De===O?"bg-[var(--neon-cyan)] text-black shadow-[0_0_20px_rgba(0,229,255,0.4)]":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:O},O))})]}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 py-4 bg-black hover:bg-white/5 text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all border-2 border-white/10 font-righteous",children:"DISCARD"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_30px_rgba(255,0,127,0.4)] transition-all font-righteous hover:scale-105",children:y})]})]})]})};function J5(){if(typeof window>"u")return"/";const r=window.location.pathname.match(/^(\/[^/]+\/)/);return r?r[1]:"/"}function Sd(){if(typeof window>"u")return"";const r=window.location.port?`:${window.location.port}`:"",e=J5(),t=localStorage.getItem("kstar_network_ip");if(t){if(t.startsWith("http")){const l=t.replace(/\/$/,"");return l.endsWith(e.replace(/\/$/,""))?l+"/":l+e}return`http://${t.trim()}${r}${e}`}const s=window.location.origin;return!s.includes("localhost")&&!s.includes("127.0.0.1"),s+e}function cg(r){localStorage.setItem("kstar_network_ip",r),window.dispatchEvent(new Event("kstar_sync"))}function IT(){return localStorage.getItem("kstar_network_ip")}const W5=[{songName:"Bohemian Rhapsody",artist:"Queen"},{songName:"Toxic",artist:"Britney Spears"},{songName:"Someone Like You",artist:"Adele"},{songName:"Sweet Caroline",artist:"Neil Diamond"},{songName:"Wonderwall",artist:"Oasis"},{songName:"Dancing Queen",artist:"ABBA"},{songName:"I Will Survive",artist:"Gloria Gaynor"},{songName:"Don't Stop Believin'",artist:"Journey"},{songName:"Livin' on a Prayer",artist:"Bon Jovi"},{songName:"My Way",artist:"Frank Sinatra"}],Yi=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-3 rounded-2xl text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border-2 border-[var(--neon-cyan)]/10 transition-all shadow-xl",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,Z5=({url:r})=>{const[e,t]=ie.useState(!1);if(!r)return null;const s=()=>{navigator.clipboard.writeText(r).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:s,title:"Copy Video URL",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-cyan)] text-black border-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)]":"text-slate-400 hover:text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1-2-2h9a2 2 0 0 1 2 2v1"})]})})},Tc=({request:r})=>{const[e,t]=ie.useState(!1),s=r.songName||r.songName,a=()=>{const u=(r.type||r.type||ht.SINGING)===ht.SINGING?" Karaoke":" Lyric",p=`${s} ${r.artist}${u}`;navigator.clipboard.writeText(p).then(()=>{t(!0),setTimeout(()=>t(!1),2e3)})};return h.jsx("button",{onClick:a,title:"Copy Command String",className:`p-3 rounded-2xl transition-all border-2 ${e?"bg-[var(--neon-green)] text-black border-[var(--neon-green)] shadow-[0_0_20px_rgba(0,255,157,0.4)]":"text-slate-400 hover:text-[var(--neon-green)] hover:bg-[var(--neon-green)]/10 border-white/5 shadow-xl"}`,children:e?h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})}):h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),h.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})},Sc=({request:r})=>{const e=r.songName||r.songName,t=()=>{const a=(r.type||r.type||ht.SINGING)===ht.SINGING?" Karaoke":" Lyric",l=encodeURIComponent(`${e} ${r.artist}${a}`);window.open(`https://www.youtube.com/results?search_query=${l}`,"_blank")};return h.jsx("button",{onClick:t,title:"Search on YouTube",className:"p-3 rounded-2xl transition-all border-2 text-rose-500 hover:text-white hover:bg-rose-500 border-white/5 shadow-xl",children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})})},eD=({onAdminAccess:r})=>{var Na,yi;const[e,t]=ie.useState(null),[s,a]=ie.useState([]),[l,u]=ie.useState(!1),[p,g]=ie.useState(!1),[y,b]=ie.useState(null),[_,T]=ie.useState(!1),[k,V]=ie.useState(!1),[$,Z]=ie.useState(!1),[ae,he]=ie.useState(!1),[pe,ye]=ie.useState(!1),[De,Ee]=ie.useState([]),[A,C]=ie.useState(null),[R,L]=ie.useState(null),[j,O]=ie.useState(null),[I,rt]=ie.useState({}),[bt,Q]=ie.useState(!1),[le,we]=ie.useState(!1),[Ge,et]=ie.useState([]),[P,K]=ie.useState(null),oe=it.getRoomId(),[de,Ne]=ie.useState("DAY_SHOW"),[je,Re]=ie.useState(!1),[dt,ft]=ie.useState(IT()||""),[Hn,os]=ie.useState(""),[Ds,Gr]=ie.useState(!1),[se,me]=ie.useState(0),[qe,Dt]=ie.useState(null),[Ht,Oe]=ie.useState(new Set),[Ae,Pt]=ie.useState(""),[qr,ls]=ie.useState(null),[Mt,cs]=ie.useState("COMMAND"),[Er,ci]=ie.useState(""),[kn,ui]=ie.useState(null),[us,yo]=ie.useState(""),hi=ie.useRef(null);ie.useRef(null);const Gn=ie.useRef(null),nn=ie.useRef(null),[Lt,mt]=ie.useState(null),[ze,dn]=ie.useState(null),[vo,In]=ie.useState(!1),[Xn,At]=ie.useState({name:"",password:""}),[qn,fn]=ie.useState(""),[lr,di]=ie.useState(!1),[_a,Jn]=ie.useState(""),[hs,Al]=ie.useState([]),[Fr,js]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),Gt=(E,J)=>{js({isOpen:!0,message:E,onConfirm:J})};ie.useEffect(()=>{const E=RT(J=>{Al(J)});return()=>E()},[]);const ve=ie.useCallback(async()=>{const E=await Qe();t(E);const J=await Bt();a(J);const U=await Un();K(U)},[]);ie.useEffect(()=>{if(ze&&s.length>0){const E=s.find(J=>J.id===ze.id);E&&JSON.stringify(E)!==JSON.stringify(ze)&&dn(E)}},[s,ze]),ie.useEffect(()=>(ve(),window.addEventListener("kstar_sync",ve),window.addEventListener("storage",ve),()=>{window.removeEventListener("kstar_sync",ve),window.removeEventListener("storage",ve),bo()}),[ve]),ie.useEffect(()=>{le&&Q5().then(E=>{et(P?E.filter(J=>J.hostUid===P.id):E)}).catch(console.error)},[le,P]),ie.useEffect(()=>{e&&oe&&it.broadcastState(e)},[e,oe]),ie.useEffect(()=>(e&&(it.onPeerConnected=()=>{console.log("[Sync] New peer connected, broadcasting state..."),it.broadcastState(e)}),()=>{it.onPeerConnected=null}),[e]);const $r=async()=>{Re(!0);try{await ig("DJ",de),ve()}catch(E){alert(E.message)}finally{Re(!1)}};ie.useEffect(()=>{(!(e!=null&&e.currentRound)||e.currentRound.length===0)&&Oe(new Set)},[e==null?void 0:e.currentRound]);const bo=()=>{nn.current&&cancelAnimationFrame(nn.current),Gn.current&&(Gn.current.getTracks().forEach(E=>E.stop()),Gn.current=null),hi.current&&(hi.current.close(),hi.current=null),Gr(!1),me(0)},Wn=async(E,J,U)=>{const ne=`Taking the stage now, it's ${E} with "${J}"!`;await Uc(U,{aiIntro:ne}),rt(ue=>({...ue,[U]:ne})),await ve()},cr=async E=>{if(R&&ze)R.type==="favorite"?await I5(ze.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}):await O5(ze.id,R.itemId,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),L(null);else if(A)await Uc(A.id,{participantName:E.singerName||A.participantName,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),C(null);else if(y)await A5(y.id,{songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),b(null);else if(p)await C5({songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),g(!1);else{let J=(j==null?void 0:j.id)||"DJ-MANUAL",U=E.singerName||(j==null?void 0:j.name)||"Guest";if(!j&&E.singerName){const ne=await Wc({name:E.singerName});ne.success&&ne.profile&&(J=ne.profile.id,U=ne.profile.name,await na(J))}await Qi({participantId:J,participantName:U,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type,message:E.message}),u(!1),O(null)}await ve()},Vt=async E=>{await na(E.id);const J=[...W5];for(let U=0;U<3&&J.length!==0;U++){const ne=Math.floor(Math.random()*J.length),ue=J.splice(ne,1)[0],Pe=await Qi({participantId:E.id,participantName:E.name,songName:ue.songName,artist:ue.artist,type:ht.SINGING});Pe&&await Ec(Pe.id)}await ra(E.id,Ut.READY),await ve()},qt=(E,J,U)=>{const ne=U===ht.SINGING?`${E} ${J} karaoke`:`${E} ${J} Lyrics Letra`,ue=`https://www.youtube.com/results?search_query=${encodeURIComponent(ne)}`;window.open(ue,"_blank")},Zn=async E=>{var ne;await z5(E),await ve();const U=(ne=(await Qe()).currentRound)==null?void 0:ne.find(ue=>ue.id===E);U&&Wn(U.participantName,U.songName,U.id)},fi=E=>{E.youtubeUrl?window.open(E.youtubeUrl,"_blank"):qt(E.songName,E.artist,E.type)},Rl=async E=>{E.preventDefault(),fn("");const J={name:Xn.name,password:Xn.password||void 0};let U;Lt?U=await oo(Lt.id,J):U=await Wc(J),U.success?(mt(null),In(!1),At({name:"",password:""}),fn(""),await ve()):fn(U.error||"Action failed.")},[Os,wa]=ie.useState(null),[Tr,Ps]=ie.useState(null),ur=(E,J,U)=>{wa(J),Ps(U),E.dataTransfer.effectAllowed="move"},Fn=E=>{E.preventDefault(),E.dataTransfer.dropEffect="move"},Dn=async(E,J,U)=>{if(E.preventDefault(),!(Os===null||Tr!==U)){if(U==="ROUND"&&(e!=null&&e.currentRound)){const ne=Array.from(e.currentRound),[ue]=ne.splice(Os,1);ne.splice(J,0,ue),await ST(ne)}else if(U==="QUEUE"){const ue=Array.from(Tt),[Pe]=ue.splice(Os,1);ue.splice(J,0,Pe),await NT(ue)}else if(U==="PENDING"){const ue=Array.from(ds),[Pe]=ue.splice(Os,1);ue.splice(J,0,Pe),await CT(ue)}wa(null),Ps(null),await ve()}},hr=E=>{mt(E),In(!0),At({name:E.name,password:E.password||""})},Ft=E=>{mt(E),Jn(""),di(!0),fn(""),dn(null)},Ea=async E=>{if(E.preventDefault(),!Lt)return;const J=await oo(Lt.id,{password:_a});J.success?(dn(Lt),mt(null),di(!1),Jn(""),fn(""),await ve()):fn(J.error||"Update failed.")},pi=()=>{u(!1),C(null),L(null),O(null),T(!1),V(!1),Z(!1),he(!1),ye(!1),In(!1),di(!1),mt(null),dn(null),Q(!1),g(!1),b(null),ls(null),ui(null)},Sr=()=>{cg(dt),Q(!1),ve()},Nr=async()=>{await H5(),V(!1),await ve();const E=await Qe();E.currentRound&&E.currentRound.forEach(J=>{J.aiIntro||Wn(J.participantName,J.songName,J.id)})},Ta=async()=>{await R5(),ye(!1),await ve()},Cr=E=>{const J=s.find(U=>U.id===E);J&&(dn(J),Z(!0))};if(!e)return h.jsx("div",{className:"flex items-center justify-center p-20 min-h-screen",children:h.jsx("div",{className:"w-12 h-12 border-4 border-teal-400 border-t-transparent rounded-full animate-spin"})});const ds=e.requests.filter(E=>E.status===Ue.PENDING&&!E.isInRound),Sa=e.requests.filter(E=>E.status===Ue.APPROVED&&E.type===ht.SINGING&&!E.isInRound),mi=e.participants.filter(E=>Sa.some(J=>J.participantId===E.id)).sort((E,J)=>(J.joinedAt||0)-(E.joinedAt||0)),$t={};Sa.forEach(E=>{$t[E.participantId]||($t[E.participantId]=[]),$t[E.participantId].push(E)}),Object.keys($t).forEach(E=>{$t[E].sort((J,U)=>J.createdAt-U.createdAt)});const Tt=[];let Yt=0,Ar=!0;for(;Ar;)Ar=!1,mi.forEach(E=>{$t[E.id]&&$t[E.id][Yt]&&(Tt.push($t[E.id][Yt]),Ar=!0)}),Yt++;const Yr=e.requests.filter(E=>E.status===Ue.APPROVED&&E.type===ht.LISTENING&&!E.isInRound),at=e.participants.filter(E=>E.status===Ut.READY).length,dr=e.verifiedSongbook||[];Sd()+(oe?`?room=${oe}`:"");const fr=({name:E,isActive:J})=>{const U=E.split(" ").map(Pe=>Pe[0]).join("").toUpperCase().slice(0,2),ne=["from-teal-400 to-indigo-500","from-rose-400 to-orange-500","from-amber-400 to-rose-500","from-indigo-400 to-purple-500","from-emerald-400 to-teal-500"],ue=E.length%ne.length;return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-12 h-12 rounded-2xl bg-gradient-to-br ${ne[ue]} p-[2px] shadow-lg shadow-black/20`,children:h.jsx("div",{className:"w-full h-full bg-slate-950 rounded-[14px] flex items-center justify-center",children:h.jsx("span",{className:"text-xl font-black text-white tracking-widest",children:U})})}),J&&h.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[var(--neon-green)] rounded-full border-4 border-slate-950 animate-pulse"})]})},fs=dr.filter(E=>E.songName.toLowerCase().includes(Er.toLowerCase())||E.artist.toLowerCase().includes(Er.toLowerCase())),jn=async E=>{if(qr){const J=await Qi({participantId:qr.id,participantName:qr.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl||"",type:E.type});J&&await Ec(J.id),ls(null),ci(""),await ve()}},gi=E=>{b(E)};return h.jsxs("div",{className:"max-w-[1600px] mx-auto p-4 lg:p-8 space-y-12 relative font-inter text-slate-300",children:[h.jsxs("header",{className:"relative rounded-[4rem] p-1 overflow-hidden shadow-3xl mb-12 group",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] opacity-80 group-hover:opacity-100 transition-all duration-1000 animate-gradient-x"}),h.jsxs("div",{className:"relative glass-panel rounded-[3.9rem] p-10 flex flex-col md:flex-row justify-between items-center gap-12 border border-white/20 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex items-center gap-10",children:[h.jsxs("div",{className:"relative group/logo",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-[var(--neon-yellow)] to-[var(--neon-pink)] rounded-full blur-xl opacity-60 group-hover/logo:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"relative p-1.5 rounded-full border-4 border-white/10 shadow-2xl bg-black/40",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-32 h-32 rounded-full transition-transform duration-700 group-hover/logo:rotate-[360deg]"})})]}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-8xl font-bold font-bungee text-white flex items-center gap-6 uppercase tracking-tight neon-glow-pink leading-none",children:["Singmode v.2 ",h.jsx("span",{className:"text-[var(--neon-blue)] neon-glow-cyan text-5xl font-righteous translate-y-2",children:"beta"})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[h.jsx("span",{className:"px-4 py-1.5 rounded-full bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] text-lg font-bold uppercase tracking-widest font-righteous",children:"DJ CONSOLE"}),h.jsx("span",{className:"text-[var(--neon-blue)]/30",children:"||"}),h.jsxs("span",{className:"text-[var(--neon-blue)] text-lg font-bold uppercase tracking-widest font-righteous neon-glow-cyan",children:["SINGERS: ",e.participants.length]})]})]})]}),h.jsx("div",{className:"flex gap-4",children:h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-base text-[var(--neon-yellow)] font-bold uppercase tracking-widest font-righteous mb-1",children:"STATUS"}),h.jsxs("div",{className:"text-4xl text-white font-bold uppercase tracking-widest font-bungee flex items-center justify-end gap-3",children:["ONLINE ",h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-pulse shadow-[0_0_10px_var(--neon-green)]"})]})]})})]})]}),h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[2.5rem] p-6 border border-white/5 shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 rounded-full blur-[80px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-5",children:[h.jsx("span",{className:"text-4xl",children:""}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold font-bungee text-white uppercase neon-glow-purple",children:"DAY_SHOW SESSION"}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:`text-xs font-black uppercase tracking-widest font-righteous ${oe?"text-[var(--neon-green)]":"text-slate-500"}`,children:oe?" ACTIVE":" OFFLINE"}),oe&&h.jsxs("span",{className:"text-slate-400 font-mono text-xs",children:["ROOM: ",h.jsx("span",{className:"text-white font-bold",children:oe})]})]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[!oe&&h.jsx("button",{onClick:()=>cs("SESSION"),className:"px-6 py-3 bg-[var(--neon-purple)] text-white rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-fuchsia-500 transition-all font-righteous shadow-[0_0_20px_rgba(180,0,255,0.3)]",children:" OPEN BROADCAST"}),h.jsx("button",{onClick:()=>we(!le),className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl font-black text-xs uppercase tracking-widest font-righteous text-slate-400 hover:text-white transition-all",children:le?" HIDE HISTORY":" SESSION HISTORY"})]})]}),le&&h.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:Ge.length===0?h.jsx("p",{className:"text-slate-600 font-black uppercase tracking-widest text-xs font-righteous py-4 text-center",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ge.slice().reverse().map(E=>h.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl hover:border-white/10 transition-all",children:[h.jsx("div",{className:"text-white font-bold font-bungee text-sm truncate",children:E.hostName||"DAY_SHOW"}),h.jsx("div",{className:"text-[var(--neon-cyan)] font-mono text-[10px] mt-1",children:new Date(E.startedAt).toLocaleString()}),E.endedAt&&h.jsxs("div",{className:"text-slate-500 text-[10px] font-righteous mt-0.5",children:["DURATION: ",Math.round((E.endedAt-E.startedAt)/6e4),"m"]})]},E.id))})})]}),h.jsx("div",{className:"sticky top-4 z-50",children:h.jsxs("div",{className:"glass-panel p-4 rounded-[2.5rem] border border-white/20 shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col gap-3 backdrop-blur-3xl",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsxs("div",{className:"flex gap-3 p-2 bg-black/40 rounded-[2rem] border border-white/5",children:[h.jsxs("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-[var(--neon-pink)] text-black font-black hover:bg-white transition-all active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(255,42,109,0.4)] text-lg uppercase tracking-[0.2em] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:rotate-90 transition-transform",children:""})," ADD SONG"]}),h.jsxs("button",{onClick:()=>{V(!0),ve()},className:"px-8 py-4 bg-[var(--neon-blue)] text-black font-black hover:bg-white transition-all uppercase tracking-[0.2em] text-lg active:scale-95 rounded-[1.5rem] shadow-[0_0_25px_rgba(5,217,232,0.4)] font-righteous flex items-center gap-3 group",children:[h.jsx("span",{className:"text-3xl group-hover:animate-spin",children:""})," NEXT ROUND"]})]}),h.jsx("div",{className:"w-[1px] h-12 bg-white/10 mx-2"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>T(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-yellow)] border border-[var(--neon-yellow)]/30 bg-[var(--neon-yellow)]/5 hover:bg-[var(--neon-yellow)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(255,200,87,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>Z(!0),className:"w-14 h-14 flex items-center justify-center text-[var(--neon-blue)] border border-[var(--neon-blue)]/30 bg-[var(--neon-blue)]/5 hover:bg-[var(--neon-blue)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(5,217,232,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""})}),h.jsx("button",{onClick:()=>ye(!0),className:"w-14 h-14 flex items-center justify-center text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group",children:h.jsx("span",{className:"text-4xl group-hover:rotate-12 transition-transform",children:""})}),r&&h.jsxs("button",{onClick:r,title:"ADMIN PORTAL",className:"w-14 h-14 flex items-center justify-center text-[var(--neon-purple)] border border-[var(--neon-purple)]/30 bg-[var(--neon-purple)]/5 hover:bg-[var(--neon-purple)] hover:text-black transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(147,51,234,0.1)] group ml-4 relative",children:[h.jsx("span",{className:"text-4xl group-hover:scale-110 transition-transform",children:""}),h.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-[var(--neon-pink)] rounded-full animate-pulse border-2 border-black"})]}),h.jsxs("button",{onClick:()=>{Gt("Are you sure you want to sign out?",async()=>{await Xd(),window.location.reload()})},title:"SIGN OUT",className:"px-6 h-14 flex items-center justify-center gap-3 text-rose-500 border border-rose-500/30 bg-rose-500/5 hover:bg-rose-500 hover:text-white transition-all rounded-[1.2rem] shadow-[0_0_15px_rgba(244,63,94,0.1)] group ml-2",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),h.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-righteous",children:"SIGN_OUT"})]})]})]}),h.jsx("div",{className:"flex gap-1.5 overflow-x-auto no-scrollbar border-t border-white/5 pt-3",children:["COMMAND","ROTATION","PERFORMERS","LIBRARY","SESSION"].map(E=>h.jsx("button",{onClick:()=>cs(E),className:`px-6 py-2.5 rounded-full font-bungee text-sm tracking-widest transition-all whitespace-nowrap border-2 ${Mt===E?"bg-white text-black border-white shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-transparent text-slate-400 border-white/20 hover:border-white/40 hover:text-white"}`,children:E==="COMMAND"?"DECK":E==="ROTATION"?"ROTATION":E==="PERFORMERS"?"PERFORMERS":E==="LIBRARY"?"LIBRARY":"SESSION"},E))})]})}),h.jsxs("main",{className:"min-h-[600px] animate-in fade-in duration-500",children:[Mt==="COMMAND"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 animate-in slide-in-from-bottom-2",children:[h.jsxs("div",{className:"lg:col-span-8 space-y-10",children:[e.currentRound&&h.jsxs("section",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-[0_0_100px_rgba(255,42,109,0.3)] zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-orange)] opacity-20 animate-pulse"}),h.jsxs("div",{className:"relative bg-[#150030]/90 p-10 rounded-[2.8rem] backdrop-blur-xl border-2 border-[var(--neon-green)]/50",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-6xl animate-pulse",children:""})," NOW PLAYING"]}),h.jsx("button",{onClick:async()=>{await G5(),await ve()},className:"px-8 py-3 bg-[var(--neon-pink)] text-black text-base font-bold uppercase hover:bg-white transition-all rounded-[1rem] tracking-widest font-righteous shadow-[0_0_20px_var(--neon-pink)] active:scale-95",children:"END ROUND"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:e.currentRound.map((E,J)=>{const U=e.participants.find(Nt=>Nt.id===E.participantId),ne=(U==null?void 0:U.status)===Ut.READY,ue=e.currentRound.findIndex(Nt=>Nt.status!==Ue.DONE),Pe=J===(ue===-1?0:ue);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${Pe?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[Pe&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("button",{onClick:()=>{const Nt=E.type===ht.SINGING?" Karaoke":" Lyric",$n=`${E.songName} ${E.artist}${Nt}`;navigator.clipboard.writeText($n)},title:"Copy Command String",className:`w-16 h-16 flex flex-col justify-center items-center border-2 rounded-2xl transition-all shrink-0 active:scale-95 ${Pe?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"border-white/10 text-slate-400 hover:border-white/30 hover:bg-white/5"}`,children:h.jsx("span",{className:"text-2xl font-bold font-mono tracking-tighter",children:E.requestNumber})})]}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${Pe?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"flex items-center gap-2 group/singer hover:underline",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${ne?"bg-[var(--neon-green)] shadow-[0_0_5px_var(--neon-green)]":"bg-slate-700"}`}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[h.jsx("button",{onClick:async()=>{E.status===Ue.DONE?await Uc(E.id,{status:Ue.APPROVED}):await Z_(E.id),await ve()},title:E.status===Ue.DONE?"Undo Done":"Mark as Done",className:`p-2 rounded-xl transition-all border-2 ${E.status===Ue.DONE?"text-yellow-500 border-yellow-500/30 bg-yellow-500/10 shadow-[0_0_15px_rgba(234,179,8,0.2)]":"text-slate-600 border-white/5 hover:border-white/20 hover:text-white"}`,children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("polyline",{points:"20 6 9 17 4 12"})})}),h.jsx("button",{onClick:()=>{Gt("Remove from active round?",async()=>{await Ki(E.id),await ve()})},className:"w-8 h-8 flex items-center justify-center rounded bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white transition-all border border-rose-500/20",title:"REMOVE",children:""})]})]},E.id)})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/80 border-2 border-[var(--neon-blue)]/30 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(5,217,232,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-cyan",children:[h.jsx("span",{className:"text-[var(--neon-blue)]",children:""})," REQUESTS"]}),h.jsxs("span",{className:"px-6 py-2 bg-[var(--neon-blue)]/10 border border-[var(--neon-blue)]/30 rounded-full text-base text-[var(--neon-blue)] font-bold tracking-widest font-righteous",children:[ds.length," PENDING"]})]}),h.jsxs("div",{className:"flex flex-col gap-4",children:[ds.map((E,J)=>h.jsxs("div",{draggable:!0,onDragStart:U=>ur(U,J,"PENDING"),onDragOver:Fn,onDrop:U=>Dn(U,J,"PENDING"),className:"bg-black/40 border border-white/5 p-4 rounded-3xl flex items-center gap-6 hover:border-[var(--neon-blue)] transition-all group cursor-move shadow-xl",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-1",children:[h.jsx("div",{className:"text-xs font-black font-righteous text-[var(--neon-pink)] uppercase tracking-[0.2em] bg-[var(--neon-pink)]/10 px-2 py-0.5 rounded-full border border-[var(--neon-pink)]/20 shrink-0",children:"NEW_CONNECTION"}),h.jsx("div",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-slate-500 text-base font-black uppercase tracking-[0.2em] font-righteous truncate",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"text-base font-bold text-[var(--neon-pink)] uppercase truncate hover:text-white transition-colors font-righteous tracking-[0.2em]",children:["@",E.participantName]}),E.message&&h.jsx("div",{className:"flex-1 max-w-md px-3 py-1 bg-black/40 border-l-2 border-[var(--neon-pink)] rounded-r-lg",children:h.jsxs("p",{className:"text-base text-white/60 font-medium italic truncate",children:['"',E.message,'"']})})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Tc,{request:E}),h.jsx(Sc,{request:E}),h.jsx(Yi,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white/50 hover:text-white border border-white/5",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:async()=>{await Ec(E.id),await ve()},className:"px-6 py-3 bg-[var(--neon-blue)] text-black text-sm font-black uppercase hover:bg-white transition-all rounded-xl tracking-[0.1em] shadow-[0_0_20px_rgba(5,217,232,0.3)]",children:"ACCEPT"}),h.jsx("button",{onClick:()=>{Gt("Delete pending request?",async()=>{await Ki(E.id),await ve()})},className:"w-11 h-11 flex items-center justify-center text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all",children:""})]})]})]},E.id)),ds.length===0&&h.jsx("div",{className:"col-span-full py-24 text-center border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-30",children:h.jsx("p",{className:"text-4xl font-black font-righteous uppercase tracking-[0.4em] italic text-slate-500",children:"NO CONNECTION DETECTED"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-10",children:[h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-yellow)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-5xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-yellow flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-yellow)] animate-pulse",children:""})," QUEUE"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[Tt.map((E,J)=>h.jsxs("div",{draggable:!0,onDragStart:U=>ur(U,J,"QUEUE"),onDragOver:Fn,onDrop:U=>Dn(U,J,"QUEUE"),className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-yellow)] transition-all cursor-move shadow-lg relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-yellow)] font-bungee text-3xl shrink-0 group-hover:scale-110 transition-transform",children:J+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-2xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-yellow)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:U=>{U.stopPropagation(),Cr(E.participantId)},className:"text-sm font-black text-[var(--neon-yellow)] uppercase tracking-[0.2em] font-righteous hover:text-white transition-colors",children:["@",E.participantName]}),E.message&&h.jsxs("div",{className:"flex-1 max-w-sm px-2 py-0.5 bg-[var(--neon-yellow)]/5 border-l border-[var(--neon-yellow)]/30 rounded-r text-xs text-[var(--neon-yellow)]/70 italic truncate",children:['"',E.message,'"']})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[h.jsx("button",{onClick:async()=>{await e1(E.id,"up"),await ve()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""}),h.jsx("button",{onClick:async()=>{await e1(E.id,"down"),await ve()},className:"text-slate-700 hover:text-white transition-colors p-1 text-base",children:""})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Tc,{request:E}),h.jsx(Sc,{request:E}),h.jsx(Yi,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"p-2 text-slate-600 hover:text-white text-xs font-black uppercase tracking-widest font-righteous transition-colors border border-white/5 rounded-lg",children:"EDIT"})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5",children:[h.jsx("button",{onClick:()=>Zn(E.id),className:"px-4 py-2 bg-[var(--neon-yellow)] text-black text-sm font-black uppercase rounded-lg hover:bg-white transition-all shadow-[0_0_15px_rgba(255,200,87,0.3)] tracking-wider",children:"STAGE"}),h.jsx("button",{onClick:()=>{Gt("Remove from queue?",async()=>{await Ki(E.id),await ve()})},className:"w-9 h-9 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-all",children:""})]})]})]},E.id)),Tt.length===0&&h.jsx("div",{className:"flex-1 py-12 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-xl font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"QUEUE EMPTY"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-blue)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-blue flex items-center gap-4",children:[h.jsx("span",{className:"text-[var(--neon-blue)] animate-pulse",children:""})," TO HEAR (",Yr.length,")"]}),h.jsxs("div",{className:"flex flex-col gap-3",children:[Yr.map((E,J)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-[2rem] flex items-center gap-6 group hover:border-[var(--neon-blue)] transition-all relative",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black/40 rounded-2xl border border-white/5 text-[var(--neon-blue)] font-bungee text-xl shrink-0",children:J+1}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-0.5",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-blue)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-sm text-slate-500 uppercase tracking-widest font-righteous",children:["/ ",E.artist]})]}),h.jsxs("div",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-[0.2em] font-righteous",children:["@",E.participantName]})]}),h.jsx("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx("button",{onClick:async()=>{await Ki(E.id),await ve()},className:"px-4 py-2 text-rose-500 hover:bg-rose-500 hover:text-white rounded-lg transition-all font-black text-xs uppercase tracking-widest font-righteous",children:"REMOVE"})})]},E.id)),Yr.length===0&&h.jsx("div",{className:"flex-1 py-8 flex items-center justify-center border-2 border-dashed border-white/5 rounded-[2rem] opacity-30 w-full",children:h.jsx("p",{className:"text-base font-black font-righteous uppercase tracking-[0.3em] text-slate-500",children:"NO LISTENING TRACKS"})})]})]}),h.jsxs("section",{className:"bg-[#10002B]/60 border-2 border-[var(--neon-green)]/20 rounded-[3rem] p-10 shadow-2xl relative overflow-hidden backdrop-blur-sm",children:[h.jsxs("h3",{className:"text-3xl md:text-4xl font-bold font-bungee text-white uppercase mb-8 px-2 neon-glow-green flex items-center gap-4 flex-wrap",children:[h.jsx("span",{className:"text-[var(--neon-green)] animate-pulse",children:""})," ATMOSPHERE"]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"p-6 bg-black/40 rounded-3xl border border-white/5 space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsx("label",{className:"text-sm md:text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.2em] font-righteous opacity-80 break-words",children:"REQUEST LIMIT"}),h.jsx("span",{className:"text-4xl font-black text-white font-bungee neon-glow-cyan",children:e.maxRequestsPerUser||5})]}),h.jsx("input",{type:"range",min:"1",max:"20",value:e.maxRequestsPerUser||5,onChange:async E=>{await V5(parseInt(E.target.value)),await ve()},className:"w-full accent-[var(--neon-cyan)] bg-white/5 rounded-lg appearance-none h-2 cursor-pointer transition-all"}),h.jsxs("div",{className:"flex justify-between text-xs font-black text-slate-600 font-righteous uppercase tracking-widest",children:[h.jsx("span",{children:"STRICT (1)"}),h.jsx("span",{children:"UNLIMITED (20)"})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-black text-[var(--neon-pink)] uppercase tracking-[0.4em] mb-4 flex items-center gap-4 font-righteous opacity-80",children:"BACKGROUND THREADS"}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...Yr].reverse().map(E=>h.jsxs("div",{className:"bg-black/60 p-5 rounded-[2rem] border border-white/10 flex flex-col justify-between group hover:border-[var(--neon-pink)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4 cursor-pointer",onClick:()=>qt(E.songName,E.artist,E.type),children:[h.jsx("div",{className:"text-2xl font-black text-white truncate uppercase tracking-tight font-bungee group-hover:text-[var(--neon-pink)] transition-all",children:E.songName}),h.jsx("div",{className:"text-base text-slate-500 uppercase tracking-widest mt-1 font-righteous opacity-60 truncate",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsx(Yi,{url:E.youtubeUrl}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Zn(E.id),className:"px-4 py-2 bg-[var(--neon-purple)] text-white text-sm font-black uppercase rounded-lg hover:bg-white hover:text-black transition-all shadow-[0_0_10px_var(--neon-purple)] tracking-[0.1em]",children:"BOOST"}),h.jsx("button",{onClick:()=>{Gt("Remove from atmosphere?",async()=>{await Ki(E.id),await ve()})},className:"text-rose-500/20 hover:text-rose-500 p-2 font-black",children:""})]})]})]},E.id)),Yr.length===0&&h.jsx("p",{className:"text-base text-slate-700 italic px-4 font-righteous uppercase tracking-widest opacity-50",children:"NO BACKGROUND TRACKS"})]})]}),h.jsxs("div",{className:"pt-6 border-t border-white/5",children:[h.jsxs("h4",{className:"text-base font-black text-[var(--neon-cyan)] uppercase tracking-[0.4em] mb-6 flex justify-between items-center font-righteous opacity-80",children:[h.jsx("span",{children:"VERIFIED_LINKS"}),h.jsx("button",{onClick:()=>g(!0),className:"text-[var(--neon-cyan)] hover:text-white transition-colors underline decoration-dotted",children:"+ ADD NEW"})]}),h.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar custom-scrollbar-h",children:[[...dr].reverse().map(E=>h.jsxs("div",{className:"bg-black/80 p-5 rounded-[2rem] border border-white/5 flex flex-col justify-between group hover:border-[var(--neon-cyan)] transition-all shadow-lg min-w-[280px] max-w-[280px]",children:[h.jsxs("div",{className:"min-w-0 mb-4",children:[h.jsx("div",{className:"text-2xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors font-bungee mb-1",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous font-bold",children:E.artist})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-4",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(Z5,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>b(E),className:"text-slate-600 hover:text-white p-2",children:""})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:()=>qt(E.songName,E.artist,E.type),className:"px-3 py-1 bg-black border border-[var(--neon-cyan)] text-[var(--neon-cyan)] text-sm font-black uppercase rounded-md hover:bg-[var(--neon-cyan)] hover:text-black transition-all tracking-widest",children:"RUN"}),h.jsx("button",{onClick:()=>{u(!0)},className:"px-3 py-1 bg-[var(--neon-pink)] text-black text-sm font-black uppercase rounded-md hover:bg-white transition-all shadow-lg tracking-widest",children:"PUSH"}),h.jsx("button",{onClick:()=>{Gt("Delete verified song?",async()=>{await X_(E.id),await ve()})},className:"text-rose-500/20 hover:text-rose-500 px-1 font-black",children:""})]})]})]},E.id)),dr.length===0&&h.jsx("p",{className:"text-xl text-slate-800 italic px-4 font-righteous uppercase tracking-widest opacity-30",children:"NO VERIFIED SONGS"})]})]})]})]})]})]}),h.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[600px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"PERFORMERS"}),h.jsxs("div",{className:"flex items-center gap-2 bg-white/5 px-3 py-1 rounded-full border border-white/5",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-sm text-[var(--neon-cyan)] font-bold uppercase tracking-widest",children:[at," ONLINE"]})]})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.participants.map(E=>{const J=E.status===Ut.READY,ne=e.requests.filter(ue=>ue.participantId===E.id).filter(ue=>ue.status===Ue.APPROVED&&ue.type===ht.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] transition-all border ${J?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_15px_rgba(0,255,157,0.2)]":"bg-black/40 border-white/5 hover:bg-white/5"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-4",children:[h.jsx("button",{onClick:async()=>{await ra(E.id,J?Ut.STANDBY:Ut.READY),await ve()},className:`w-3 h-3 rounded-full shrink-0 transition-all ${J?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-800"}`}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>Cr(E.id),className:`text-xl font-black uppercase truncate text-left transition-colors font-righteous ${J?"text-white":"text-slate-500 hover:text-[var(--neon-green)]"}`,children:E.name}),ne>0&&h.jsxs("span",{className:"block text-xs text-[var(--neon-cyan)] font-black mt-0.5 tracking-[0.2em]",children:[ne," REQUESTS"]})]})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>O(E),className:"p-2 hover:text-[var(--neon-cyan)] transition-colors text-slate-600",children:"+"}),h.jsx("button",{onClick:()=>{Gt(`Remove ${E.name}?`,async()=>{await og(E.id),await ve()})},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-colors",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg font-righteous uppercase tracking-widest",children:"NO DATA"})})]})]}),h.jsxs("section",{className:"bg-[#0a0a0a] border-4 border-white/5 rounded-[3rem] p-8 shadow-[0_0_40px_rgba(0,0,0,0.5)] relative overflow-hidden flex flex-col h-[400px]",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold font-bungee text-white uppercase tracking-tight opacity-90",children:"LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await t1(),await ve()},className:"text-sm font-bold text-rose-500/40 hover:text-rose-500 uppercase tracking-widest transition-all",children:"CLEAR"})]}),h.jsxs("div",{className:"space-y-3 overflow-y-auto custom-scrollbar pr-2 flex-1",children:[e.history.map((E,J)=>h.jsxs("div",{className:"bg-black/40 p-4 rounded-2xl border border-white/5 flex flex-col group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"min-w-0 pr-2",children:[h.jsx("div",{className:"text-xl font-bold text-white uppercase truncate tracking-tight group-hover:text-[var(--neon-purple)] transition-colors font-bungee",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 uppercase truncate tracking-widest font-righteous",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-all",children:[h.jsx(Tc,{request:E}),h.jsx(Sc,{request:E}),h.jsx(Yi,{url:E.youtubeUrl})]})]}),h.jsxs("div",{className:"flex items-center justify-between mt-2 border-t border-white/5 pt-2",children:[h.jsxs("span",{className:"text-base font-black text-[var(--neon-pink)] uppercase truncate",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-pink)] hover:underline transition-all uppercase tracking-widest",children:"RE-QUEUE"})]})]},J)),e.history.length===0&&h.jsx("div",{className:"text-center py-16 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-800",children:"EMPTY"})})]})]})]})]}),Mt==="ROTATION"&&h.jsxs("div",{className:"space-y-16 animate-in slide-in-from-bottom-2 pb-32",children:[e.currentRound&&e.currentRound.length>0&&h.jsxs("section",{className:"glass-panel border-4 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(0,255,157,0.3)] relative overflow-hidden neon-sign-border-green",children:[h.jsxs("div",{className:"flex items-center gap-8 mb-12",children:[h.jsx("div",{className:"w-8 h-8 bg-[var(--neon-green)] rounded-full animate-ping shadow-[0_0_25px_var(--neon-green)]"}),h.jsx("h3",{className:"text-6xl font-black text-white uppercase tracking-tighter font-righteous neon-glow-green",children:"NOW PLAYING"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:e.currentRound.map((E,J)=>{const U=e.currentRound.findIndex(ue=>ue.status!==Ue.DONE),ne=J===(U===-1?0:U);return h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${ne?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsx("div",{className:"w-16 h-full flex flex-col justify-center items-center border-r border-white/10 pr-4 shrink-0",children:h.jsx("span",{className:`text-xl font-bold font-mono tracking-tighter ${ne?"text-[var(--neon-green)]":"text-slate-400"}`,children:E.requestNumber})}),h.jsxs("div",{className:"flex items-baseline gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-3xl font-black uppercase truncate font-righteous tracking-tight ${ne?"text-white":"text-slate-300"}`,children:E.songName}),h.jsxs("div",{className:"flex items-center gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-xl font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:E.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg",children:"/"}),h.jsxs("span",{className:"text-xl font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",E.participantName]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-3 z-10 pl-6 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:[ne&&h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)] text-black text-[10px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] mr-2 shrink-0",children:"LIVE"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Tc,{request:E}),h.jsx(Sc,{request:E}),h.jsx(Yi,{url:E.youtubeUrl}),h.jsx("button",{onClick:()=>C(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white/5 hover:bg-white hover:text-black border border-white/10 transition-all text-slate-400 group",title:"EDIT",children:h.jsx("span",{className:"text-sm font-black font-righteous",children:"EDIT"})}),h.jsx("button",{onClick:()=>fi(E),className:"w-10 h-10 flex items-center justify-center rounded-lg bg-black border border-white/20 hover:bg-white hover:text-black hover:border-white transition-all group",title:"RESET TRACK",children:h.jsx("span",{className:"text-lg",children:""})}),h.jsxs("button",{disabled:E.status===Ue.DONE,onClick:async()=>{await Z_(E.id),await ve()},className:`h-10 px-6 rounded-lg text-sm font-black uppercase tracking-widest font-righteous transition-all flex items-center gap-2 ${E.status===Ue.DONE?"bg-white/10 text-white/40 cursor-not-allowed border border-white/5":"bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black border border-[var(--neon-cyan)]/50"}`,children:[h.jsx("span",{children:E.status===Ue.DONE?"COMPLETED":"DONE"}),E.status!==Ue.DONE&&h.jsx("span",{className:"text-lg leading-none",children:""})]})]})]})]},E.id)})})]}),h.jsxs("section",{className:"bg-[#050510] border-4 border-[var(--neon-cyan)]/30 rounded-[3rem] p-10 shadow-[0_0_80px_rgba(0,229,255,0.15)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[h.jsx("div",{className:"w-4 h-4 bg-[var(--neon-cyan)] shadow-[0_0_20px_var(--neon-cyan)] rounded-full animate-pulse"}),h.jsx("h3",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"UPCOMING"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-2 gap-6",children:[Tt.map(E=>h.jsxs("div",{className:"relative group perspective-1000",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-purple)] to-[var(--neon-blue)] rounded-[2.5rem] blur-xl opacity-20 group-hover:opacity-40 transition-opacity"}),h.jsxs("div",{className:"relative bg-[#101015] p-8 rounded-[2.5rem] border border-white/10 flex justify-between items-center group-hover:border-[var(--neon-cyan)] transition-all shadow-2xl h-full",children:[h.jsxs("div",{className:"min-w-0 pr-6 flex-1",children:[h.jsx("div",{className:"text-white font-black uppercase truncate text-4xl font-bungee tracking-tight mb-2 group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsxs("div",{className:"text-lg text-slate-500 uppercase flex items-center gap-3 font-righteous tracking-[0.2em] opacity-80",children:[h.jsxs("span",{className:"text-[var(--neon-green)] font-black",children:["@",E.participantName]}),h.jsx("span",{className:"opacity-20",children:"|"}),h.jsx("span",{className:"truncate",children:E.artist})]})]}),h.jsxs("div",{className:"flex gap-3 shrink-0 flex-col",children:[h.jsx("button",{onClick:()=>Zn(E.id),className:"px-6 py-3 bg-[var(--neon-green)] text-black text-base font-black rounded-xl uppercase tracking-[0.2em] font-righteous shadow-[0_0_20px_var(--neon-green)] transition-all hover:bg-white hover:scale-105",children:"STAGE"}),h.jsx("button",{onClick:async()=>{await Ki(E.id),await ve()},className:"px-6 py-3 border border-white/10 text-white/40 hover:text-rose-500 hover:border-rose-500/50 rounded-xl transition-all text-lg font-black uppercase tracking-[0.2em]",children:"REMOVE"})]})]})]},E.id)),Tt.length===0&&h.jsx("div",{className:"col-span-full py-32 text-center border-4 border-dashed border-white/5 rounded-[4rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] italic font-righteous text-slate-700",children:"NO DATA STREAM"})})]})]})]}),Mt==="PERFORMERS"&&h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10 animate-in slide-in-from-bottom-2 pb-32",children:[h.jsxs("section",{className:"lg:col-span-8 bg-[#0a0a0a] border-4 border-[var(--neon-cyan)]/20 rounded-[3rem] p-10 shadow-[0_0_60px_rgba(0,229,255,0.1)] relative overflow-hidden backdrop-blur-md",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-cyan",children:"SINGERS"}),h.jsxs("div",{className:"flex items-center gap-4 px-6 py-2 bg-black/40 border border-[var(--neon-cyan)]/30 rounded-full shadow-lg",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-[var(--neon-cyan)] animate-pulse"}),h.jsxs("span",{className:"text-lg font-bold text-[var(--neon-cyan)] uppercase tracking-widest font-righteous",children:[at," ACTIVE"]})]})]}),h.jsxs("div",{className:"grid gap-6",children:[e.participants.map(E=>{const J=E.status===Ut.READY,ne=e.requests.filter(ue=>ue.participantId===E.id).filter(ue=>ue.status===Ue.APPROVED&&ue.type===ht.SINGING).length;return h.jsxs("div",{className:`flex items-center justify-between p-6 rounded-[2rem] transition-all border-2 ${J?"bg-[#002a1a]/30 border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.15)]":"bg-black/40 border-white/5 hover:border-white/20"}`,children:[h.jsxs("div",{className:"min-w-0 flex items-center gap-6 text-left",children:[h.jsx("button",{onClick:async()=>{await ra(E.id,J?Ut.STANDBY:Ut.READY),await ve()},className:`w-12 h-12 rounded-full shrink-0 border-2 transition-all flex items-center justify-center ${J?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_20px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-white/50"}`,children:J&&h.jsx("div",{className:"w-4 h-4 bg-white rounded-full animate-pulse"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>Cr(E.id),className:`font-bold text-4xl uppercase truncate font-bungee tracking-tight transition-colors ${J?"text-white":"text-slate-600 hover:text-[var(--neon-green)]"}`,children:E.name}),ne>0&&h.jsxs("div",{className:"text-base font-bold text-[var(--neon-cyan)] uppercase mt-1 tracking-widest font-righteous opacity-90",children:[ne," TRACKS READY"]})]})]}),h.jsxs("div",{className:"flex gap-4 items-center",children:[h.jsx("button",{onClick:()=>O(E),className:"px-6 py-3 bg-[var(--neon-cyan)]/10 text-[var(--neon-cyan)] rounded-xl border border-[var(--neon-cyan)]/50 transition-all font-righteous text-base font-black uppercase tracking-[0.2em] hover:bg-[var(--neon-cyan)] hover:text-black hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"ADD TRACK"}),h.jsx("button",{onClick:()=>{Gt(`Remove ${E.name}?`,async()=>{await og(E.id),await ve()})},className:"text-rose-500/30 hover:text-rose-500 p-3 transition-colors text-3xl font-black",children:""})]})]},E.id)}),e.participants.length===0&&h.jsx("div",{className:"py-32 text-center border-4 border-dashed border-white/5 rounded-[3rem] opacity-30",children:h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.6em] italic font-righteous text-slate-800",children:"NO CONNECTIONS"})})]})]}),h.jsxs("section",{className:"lg:col-span-4 lg:sticky lg:top-36 h-fit bg-[#050510] border-4 border border-white/5 rounded-[3.5rem] p-8 shadow-[0_0_60px_rgba(157,0,255,0.15)] relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-purple",children:"SESSION LOG"}),e.history.length>0&&h.jsx("button",{onClick:async()=>{await t1(),await ve()},className:"text-sm font-black text-rose-500/40 hover:text-rose-500 uppercase tracking-[0.3em] font-righteous transition-all",children:"CLEAR ALL"})]}),h.jsxs("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[e.history.filter(E=>(E.playedAt||0)>=(e.startedAt||0)).map((E,J)=>h.jsxs("div",{className:"bg-black/40 p-5 rounded-[1.5rem] border border-white/5 group hover:border-[var(--neon-purple)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-2xl font-black text-white uppercase truncate font-bungee tracking-tight group-hover:text-[var(--neon-purple)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-600 font-bold uppercase truncate font-righteous tracking-widest mt-1",children:E.artist})]}),h.jsx(Yi,{url:E.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between border-t border-white/5 pt-3 mt-1",children:[h.jsxs("button",{onClick:()=>Cr(E.participantId),className:"text-sm font-black text-[var(--neon-pink)] uppercase truncate hover:text-white font-righteous tracking-widest transition-colors mb-0",children:["@",E.participantName]}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"opacity-0 group-hover:opacity-100 text-xs font-black text-[var(--neon-cyan)] hover:text-white transition-all font-righteous tracking-widest uppercase ml-auto",children:"RELOAD"})]})]},J)),e.history.length===0&&h.jsx("div",{className:"text-center py-20 opacity-20",children:h.jsx("p",{className:"text-lg italic font-righteous uppercase tracking-widest text-slate-700",children:"EMPTY"})})]})]}),h.jsxs("section",{className:"lg:col-span-12 bg-black/40 border-4 border-white/5 rounded-[3rem] p-10 mt-10 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-10 px-2",children:[h.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter font-bungee neon-glow-cyan",children:"COMPLETED ROUNDS"}),h.jsx("div",{className:"text-[var(--neon-cyan)]/40 text-sm font-black uppercase tracking-[0.4em] font-righteous",children:"HISTORY"})]}),h.jsx("div",{className:"grid gap-12",children:(()=>{const E={};e.history.filter(U=>(U.playedAt||0)>=(e.startedAt||0)).forEach(U=>{const ne=U.playedAt||0;E[ne]||(E[ne]=[]),E[ne].push(U)});const J=Object.keys(E).map(Number).sort((U,ne)=>ne-U);return J.length===0?h.jsx("div",{className:"text-center py-24 border-4 border-dashed border-white/5 rounded-[2.5rem] opacity-20",children:h.jsx("p",{className:"text-2xl font-black uppercase tracking-[0.4em] font-righteous text-slate-500",children:"HISTORY_NULL"})}):J.map(U=>h.jsxs("div",{className:"bg-[#050510] border-2 border-white/5 rounded-[2.5rem] p-8 relative group hover:border-[var(--neon-cyan)]/30 transition-all",children:[h.jsxs("div",{className:"absolute top-0 left-10 py-1 px-4 bg-[var(--neon-cyan)] text-black text-[10px] font-black uppercase tracking-widest rounded-b-lg font-righteous shadow-[0_0_15px_rgba(0,229,255,0.4)]",children:["ROUND_",new Date(U).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-4",children:E[U].map((ne,ue)=>h.jsxs("div",{className:"flex flex-col p-4 bg-black/40 rounded-2xl border border-white/5 group/song hover:bg-white/5 transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("div",{className:"text-lg font-black text-white uppercase truncate font-bungee tracking-tight group-hover/song:text-[var(--neon-cyan)] transition-colors",children:ne.songName}),h.jsx(Yi,{url:ne.youtubeUrl})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-xs font-black text-[var(--neon-pink)] uppercase tracking-widest font-righteous",children:["@",ne.participantName]}),h.jsxs("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-tighter",children:["POS_",ue+1]})]})]},ne.id))})]},U))})()})]})]}),Mt==="LIBRARY"&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-bottom-2 space-y-10 pb-32",children:[h.jsx("div",{className:"sticky top-0 z-40 pt-4 -mt-4",children:h.jsxs("div",{className:"relative group p-1 rounded-[2.5rem] bg-[#050510]/90 shadow-2xl backdrop-blur-xl border border-white/10",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[var(--neon-pink)]/20 via-[var(--neon-purple)]/20 to-[var(--neon-cyan)]/20 blur-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500"}),h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:us,onChange:E=>yo(E.target.value),className:"w-full bg-black/50 border-2 border-white/10 rounded-[2.3rem] py-6 pl-16 pr-32 text-2xl font-bold tracking-widest text-white placeholder:text-slate-600 focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous uppercase"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors pointer-events-none",children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})}),h.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-2",children:h.jsx("button",{onClick:()=>g(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-[2rem] font-black text-base uppercase tracking-widest shadow-[0_0_15px_rgba(0,229,255,0.4)] active:scale-95 transition-all font-righteous hover:bg-white hover:scale-105",children:"+ ADD NEW"})})]})}),h.jsx("div",{className:"flex flex-col gap-3",children:(()=>{const J=((e==null?void 0:e.verifiedSongbook)||[]).map(U=>({...U,isVerified:!0,title:U.songName,source:"VERIFIED"})).filter(U=>{if(!us)return!0;const ne=us.toLowerCase();return U.title.toLowerCase().includes(ne)||U.artist.toLowerCase().includes(ne)});return J.length===0?h.jsxs("div",{className:"col-span-full text-center py-40 opacity-30 border-4 border-dashed border-white/5 rounded-[4rem]",children:[h.jsx("div",{className:"text-8xl mb-6 opacity-50 grayscale animate-pulse",children:us?"":""}),h.jsx("p",{className:"text-5xl font-black uppercase tracking-[0.5em] font-righteous text-slate-600",children:us?"NO MATCH FOUND":"SONGBOOK EMPTY"})]}):J.map((U,ne)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-4 rounded-[2rem] flex items-center justify-between group hover:border-[var(--neon-cyan)] transition-all relative hover:z-50 shadow-lg",children:[h.jsxs("div",{className:"flex items-center gap-6 flex-1 min-w-0",children:[h.jsx("div",{className:"w-12 h-12 flex items-center justify-center bg-black rounded-lg border border-white/10 text-[var(--neon-cyan)] text-2xl",children:""}),h.jsx("div",{className:"min-w-0 pr-4",children:h.jsxs("div",{className:"flex items-center gap-3",children:[U.isVerified&&h.jsx("div",{className:"px-2 py-0.5 bg-[var(--neon-pink)] text-black rounded-full text-[10px] font-black uppercase tracking-widest font-righteous shrink-0",children:"VERIFIED"}),h.jsx("h4",{className:"text-3xl font-black text-white uppercase truncate tracking-tighter font-bungee group-hover:text-[var(--neon-cyan)] transition-colors",children:U.title}),h.jsxs("span",{className:"text-base text-slate-600 font-bold uppercase font-righteous tracking-widest truncate",children:["/ ",U.artist]})]})})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx(Tc,{request:U}),h.jsx(Sc,{request:U}),h.jsx(Yi,{url:U.youtubeUrl}),h.jsx("button",{onClick:async()=>{await X_(U.id).then(ve)},className:"p-2 text-rose-500/20 hover:text-rose-500 transition-all text-xl",children:""})]}),h.jsxs("div",{className:"flex gap-2 bg-black/40 p-1 rounded-xl border border-white/5 ml-4",children:[h.jsxs("div",{className:"relative group/assign",children:[h.jsx("button",{className:"px-6 py-2.5 bg-white text-black text-sm font-black uppercase rounded-lg hover:bg-[var(--neon-cyan)] transition-all font-righteous tracking-wider",children:"ASSIGN"}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-cyan)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/assign:opacity-100 group-hover/assign:visible transition-all p-4 z-50 backdrop-blur-xl w-[200px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"TRANSMIT TO:"}),h.jsxs("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:[e.participants.map(ue=>h.jsx("button",{onClick:async()=>{const Pe=await Qi({participantId:ue.id,participantName:ue.name,songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:ht.SINGING});Pe&&await Ec(Pe.id),await ve()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-cyan)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ue.name},ue.id)),h.jsx("div",{className:"h-[1px] bg-white/10 my-2"}),h.jsx("button",{onClick:async()=>{const ue=await Qi({participantId:"DJ-MANUAL",participantName:"GUEST",songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:ht.SINGING});ue&&await Ec(ue.id),await ve()},className:"w-full text-left p-2 rounded-lg bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)] hover:text-black text-sm font-black uppercase font-righteous transition-all",children:"+ GUEST"})]})]})]}),h.jsxs("div",{className:"relative group/star",children:[h.jsx("button",{className:"px-4 py-2.5 bg-black border border-white/10 text-[var(--neon-pink)] rounded-lg font-black text-sm uppercase tracking-widest hover:border-[var(--neon-pink)] transition-all font-righteous",children:""}),h.jsxs("div",{className:"absolute bottom-full right-0 mb-4 bg-[#0a0a0a] border-2 border-[var(--neon-pink)]/30 rounded-[1.5rem] shadow-2xl opacity-0 invisible group-hover/star:opacity-100 group-hover/star:visible transition-all p-4 z-50 backdrop-blur-xl w-[180px]",children:[h.jsx("p",{className:"text-base text-[var(--neon-pink)] font-black uppercase mb-3 border-b border-white/10 pb-2 font-righteous tracking-widest",children:"ADD FAVORITE:"}),h.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar pr-2",children:e.participants.map(ue=>h.jsx("button",{onClick:async()=>{await D5(ue.id,{songName:U.title,artist:U.artist,youtubeUrl:U.youtubeUrl,type:U.type}),await ve()},className:"w-full text-left p-2 rounded-lg hover:bg-white/10 hover:text-[var(--neon-pink)] text-lg font-black text-slate-400 uppercase truncate font-righteous transition-all",children:ue.name},ue.id))})]})]})]})]})]},ne))})()})]})]}),k&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-6 z-[100] backdrop-blur-xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 shadow-[0_0_100px_rgba(255,42,109,0.2)] animate-in zoom-in-95 duration-500 relative overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-start mb-8",children:[h.jsx("h2",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee neon-glow-pink",children:"REVIEW LINEUP"}),h.jsx("button",{onClick:()=>V(!1),className:"text-slate-600 hover:text-white font-bold text-5xl px-2 transition-all transform hover:scale-110",children:""})]}),h.jsx("div",{className:"mb-8 text-lg text-[var(--neon-cyan)] font-bold uppercase tracking-widest font-righteous opacity-80 decoration-dotted underline underline-offset-4",children:"OPERATIONAL READY CHECK"}),h.jsx("div",{className:"space-y-4 mb-10 max-h-[400px] overflow-y-auto pr-4 custom-scrollbar",children:(()=>{var J;const E=e.participants.filter(U=>{var ne;return(ne=e.requests)==null?void 0:ne.some(ue=>ue.participantId===U.id&&ue.status===Ue.APPROVED&&ue.type===ht.SINGING&&!ue.isInRound)}).sort((U,ne)=>(ne.joinedAt||0)-(U.joinedAt||0));if(E.length>0)return E.map(U=>{var Pe;const ne=U.status===Ut.READY,ue=(Pe=e.requests)==null?void 0:Pe.find(Nt=>Nt.participantId===U.id&&Nt.status===Ue.APPROVED&&Nt.type===ht.SINGING&&!Nt.isInRound);return h.jsxs("div",{className:`flex items-center justify-between p-4 rounded-[1.5rem] border-2 transition-all duration-300 ${ne?"bg-[#150030] border-[var(--neon-green)] shadow-[0_0_20px_rgba(57,255,20,0.15)]":"bg-black/40 border-white/5 opacity-50"}`,children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsx("button",{onClick:async()=>{await ra(U.id,ne?Ut.STANDBY:Ut.READY),await ve()},className:`w-6 h-6 rounded-full shrink-0 flex items-center justify-center transition-all border-2 ${ne?"bg-[var(--neon-green)] border-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-slate-900 border-white/10 hover:border-slate-600"}`,children:ne&&h.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-ping"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:`font-bold uppercase text-2xl truncate tracking-tight font-bungee ${ne?"text-white":"text-slate-600"}`,children:U.name}),ne?ue?h.jsx("div",{className:"text-[var(--neon-cyan)] text-base font-black uppercase tracking-[0.2em] font-righteous mt-0.5 opacity-90",children:ue.songName}):h.jsx("div",{className:"text-rose-500 text-sm font-black uppercase tracking-[0.1em] font-righteous mt-0.5",children:" NO CONNECTION"}):h.jsx("div",{className:"text-slate-700 text-sm font-black uppercase tracking-[0.2em] font-righteous mt-0.5",children:"STANDBY"})]})]}),ne&&ue&&h.jsx("div",{className:"shrink-0 text-sm bg-[var(--neon-cyan)] text-black px-4 py-1.5 rounded-full font-black uppercase tracking-widest font-righteous shadow-[0_0_10px_var(--neon-cyan)] animate-in fade-in zoom-in",children:"READY"})]},U.id)});{const U=((J=e.requests)==null?void 0:J.filter(ne=>ne.status===Ue.APPROVED&&ne.type===ht.LISTENING&&!ne.isInRound).sort((ne,ue)=>ne.createdAt-ue.createdAt).slice(0,5))||[];return U.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"p-4 bg-white/5 rounded-xl border border-dashed border-white/10 text-center",children:h.jsx("p",{className:"text-[var(--neon-blue)] font-black uppercase tracking-widest font-righteous",children:"FALLBACK: LISTENING MODE"})}),U.map(ne=>h.jsxs("div",{className:"flex items-center justify-between p-4 rounded-[1.5rem] border-2 bg-[#0a0a20] border-[var(--neon-blue)]/30",children:[h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"text-[var(--neon-blue)] text-xl font-black uppercase tracking-tight font-bungee",children:ne.songName}),h.jsx("div",{className:"text-slate-500 text-sm font-bold uppercase tracking-widest font-righteous",children:ne.artist})]}),h.jsxs("div",{className:"text-xs font-black uppercase tracking-widest text-[var(--neon-pink)] font-righteous",children:["@",ne.participantName]})]},ne.id))]}):h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[2.5rem] border-4 border-dashed border-white/5 animate-in fade-in duration-700",children:h.jsx("p",{className:"text-slate-700 text-2xl font-black uppercase tracking-[0.4em] font-righteous",children:"NO DATA"})})}})()}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-4 bg-black hover:bg-white hover:text-black text-white border border-white/10 rounded-xl font-black uppercase text-base tracking-widest transition-all font-righteous",children:"CANCEL"}),(()=>{var ue;const E=e.participants.filter(Pe=>{var Nt;return(Nt=e.requests)==null?void 0:Nt.some($n=>$n.participantId===Pe.id&&$n.status===Ue.APPROVED&&$n.type===ht.SINGING&&!$n.isInRound)}).length,J=((ue=e.requests)==null?void 0:ue.filter(Pe=>Pe.status===Ue.APPROVED&&Pe.type===ht.LISTENING&&!Pe.isInRound).length)||0,U=E>0?E:J,ne=E>0?"ACTIVATE ROUND":"ACTIVATE LISTENING";return h.jsx("button",{onClick:Nr,disabled:U===0,className:`flex-[2] py-4 rounded-xl font-black uppercase text-base tracking-widest transition-all flex items-center justify-center gap-3 shadow-lg font-righteous ${U>0?"bg-[var(--neon-green)] hover:bg-white hover:text-black text-black hover:scale-105":"bg-slate-900 text-slate-800 cursor-not-allowed border border-white/5"}`,children:U>0?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-ping"}),ne," (",U,")"]}):"IDLE"})})()]}),h.jsxs("div",{className:"bg-[#151520] p-6 rounded-[2rem] border border-white/5 mt-8",children:[h.jsxs("h3",{className:"text-xl font-black text-white uppercase tracking-widest font-righteous mb-4 flex items-center gap-3",children:[h.jsx("span",{className:"text-[var(--neon-purple)]",children:""})," Priority Protocol"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Object.values(Ss).map(E=>h.jsxs("button",{onClick:()=>{B5(E)},className:`p-4 rounded-xl border-2 text-left transition-all relative overflow-hidden group ${e.queueStrategy===E?"bg-[var(--neon-purple)]/20 border-[var(--neon-purple)] text-white shadow-[0_0_15px_var(--neon-purple)]":"bg-black/40 border-white/5 text-slate-500 hover:border-white/20 hover:text-slate-300"}`,children:[h.jsx("div",{className:"font-bold font-righteous uppercase tracking-wider relative z-10",children:E.replace("_"," ")}),h.jsxs("div",{className:"text-[10px] uppercase font-mono mt-1 opacity-60 relative z-10",children:[E==="FRESH_MEAT"&&"New Singers First",E==="FAIR_ROTATION"&&"Fewest Songs + Oldest Wait",E==="FIFO"&&"Strict First In First Out",E==="OLDEST_MEMBER"&&"Oldest Singers First",E==="RANDOM"&&"Chaotic Shuffle"]}),e.queueStrategy===E&&h.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[var(--neon-green)] animate-pulse"})]},E))})]})]})}),pe&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-rose-500/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(244,63,94,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-rose-500 shadow-[0_0_20px_rgba(244,63,94,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-rose-500/10 text-rose-500 rounded-[2rem] border-2 border-rose-500/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(244,63,94,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-rose",children:"SYSTEM RESET"}),h.jsxs("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:["This will ",h.jsx("span",{className:"text-rose-500 underline decoration-2 underline-offset-4 decoration-rose-500",children:"TERMINATE ALL SESSIONS"}),", clear requests, and wipe history logs."]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>ye(!1),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Ta,className:"flex-[2] py-4 bg-rose-500 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(244,63,94,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"EXECUTE WIPE"})]})]})}),($||ze)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[70] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-6xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-purple",children:"User Directory"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] uppercase font-black tracking-[0.3em] font-righteous opacity-80 mt-1",children:"Authenticated Identities & Signal History"})]}),h.jsxs("div",{className:"flex gap-3",children:[ze&&h.jsx("button",{onClick:()=>dn(null),className:"px-6 py-3 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/10 transition-all",children:" ALL ACCOUNTS"}),h.jsx("button",{onClick:()=>{Gt("DANGER: This will permanently delete ALL GUEST ACCOUNTS and DUPLICATE ENTRIES from the Firestore database. Proceed?",async()=>{const E=await ET();E.success?(alert(`DATABASE CLEANUP SUCCESS: Removed ${E.deletedCount} orphan records.`),await ve()):alert(`CLEANUP FAILED: ${E.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/50 text-rose-500 rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-rose-500 hover:text-white transition-all hover:scale-105",children:"PURGE GUESTS"}),h.jsx("button",{onClick:()=>In(!0),className:"px-6 py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"+ NEW ACCOUNT"}),h.jsx("button",{onClick:pi,className:"text-slate-600 hover:text-white p-2 ml-2 font-black text-4xl transition-colors transform hover:scale-110",children:""})]})]}),h.jsx("div",{className:"p-6 border-b-2 border-white/5 bg-black/20",children:h.jsxs("div",{className:"relative group max-w-2xl mx-auto",children:[h.jsx("input",{type:"text",placeholder:"SCANNING DIRECTORY RECORDS...",value:Hn,onChange:E=>os(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-10 py-4 text-white font-black uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-10 space-y-12 custom-scrollbar bg-black/20",children:ze?h.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500 grid lg:grid-cols-12 gap-8",children:[h.jsx("div",{className:"lg:col-span-4 space-y-6",children:h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden group hover:border-[var(--neon-purple)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-[var(--neon-purple)]/10 blur-[60px] rounded-full -mr-24 -mt-24 group-hover:bg-[var(--neon-purple)]/20 transition-all"}),h.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[h.jsx("div",{className:"scale-125 mb-4",children:h.jsx(fr,{name:ze.name,isActive:e.participants.some(E=>E.id===ze.id)})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("div",{className:"text-sm font-bold text-[var(--neon-cyan)] uppercase tracking-widest mb-2 font-righteous",children:"SINGER PROFILE"}),h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight leading-none font-bungee break-words",children:ze.name})]}),h.jsxs("div",{className:"w-full mt-8 space-y-3 pt-6 border-t border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SINGER ID"}),h.jsxs("span",{className:"text-[var(--neon-pink)] font-mono opacity-80",children:[ze.id.slice(0,8),"..."]})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm uppercase font-black font-righteous tracking-widest",children:[h.jsx("span",{className:"text-slate-600",children:"SECURITY"}),h.jsx("span",{className:`px-2 py-0.5 rounded-full ${ze.password?"bg-[var(--neon-pink)]/10 text-[var(--neon-pink)]":"bg-slate-900 text-slate-600"}`,children:ze.password?"SECURE PIN":"OPEN LINK"})]})]}),h.jsxs("div",{className:"w-full mt-10 space-y-3",children:[h.jsx("button",{onClick:()=>Ft(ze),className:"w-full py-3 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous",children:"CHANGE PASSWORD"}),h.jsx("button",{onClick:async()=>{await na(ze.id),ui(ze),T(!0),await ve()},className:"w-full py-3 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest transition-all shadow-[0_0_15px_rgba(0,229,255,0.3)] font-righteous hover:bg-white",children:"SYNC QR CODE"}),h.jsx("div",{className:"pt-2 border-t border-white/5 mt-2 space-y-2"}),h.jsx("button",{onClick:()=>{Gt("Permanently delete this account?",async()=>{await Zh(ze.id),dn(null),await ve()})},className:"w-full py-3 bg-rose-500/5 hover:bg-rose-500 text-rose-500/40 hover:text-white rounded-xl text-sm font-black uppercase tracking-widest transition-all border border-transparent hover:border-rose-500/30 font-righteous mt-2",children:"TERMINATE ACCOUNT"})]})]})]})}),h.jsx("div",{className:"lg:col-span-8 space-y-6",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-pink)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["LIBRARY STARS (",ze.favorites.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[ze.favorites.map(E=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl flex justify-between items-center group hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-black text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-pink)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-2 shrink-0",children:[h.jsx("button",{onClick:async()=>{await Qi({participantId:ze.id,participantName:ze.name,songName:E.songName,artist:E.artist,youtubeUrl:E.youtubeUrl,type:E.type}),await ve()},className:"px-3 py-1.5 bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[var(--neon-cyan)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-cyan)] hover:text-black transition-all",children:"ADD"}),h.jsx("button",{onClick:()=>L({type:"favorite",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Gt("Remove from stars?",async()=>{await k5(ze.id,E.id),await ve()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]},E.id)),ze.favorites.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"Catalog is empty"})]})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden",children:[h.jsxs("h4",{className:"text-sm font-black text-[var(--neon-cyan)] uppercase tracking-[0.3em] mb-6 font-righteous",children:["PERFORMANCE LOG (",ze.personalHistory.length,")"]}),h.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[ze.personalHistory.map((E,J)=>h.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-xl group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-xl font-bold text-white truncate uppercase tracking-tight font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:E.songName}),h.jsx("div",{className:"text-sm text-slate-500 font-bold uppercase tracking-widest mt-0.5 font-righteous opacity-60",children:E.artist})]}),h.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[h.jsx("button",{onClick:()=>L({type:"history",itemId:E.id}),className:"p-1.5 text-slate-700 hover:text-white transition-colors",children:""}),h.jsx("button",{onClick:()=>{Gt("Erase from history?",async()=>{await j5(ze.id,E.id),await ve()})},className:"p-1.5 text-rose-500/30 hover:text-rose-500 transition-colors",children:""})]})]}),h.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-white/5",children:[h.jsx("span",{className:"text-xs text-slate-700 font-black uppercase font-righteous tracking-widest",children:new Date(E.createdAt).toLocaleDateString()}),h.jsx("button",{onClick:async()=>{await Tm(E),await ve()},className:"px-3 py-1.5 bg-[var(--neon-pink)]/10 border border-[var(--neon-pink)]/30 text-[var(--neon-pink)] rounded-lg text-xs font-black uppercase font-righteous hover:bg-[var(--neon-pink)] hover:text-black transition-all",children:"RE-QUEUE"})]})]},J)),ze.personalHistory.length===0&&h.jsxs("div",{className:"flex flex-col items-center py-20 opacity-20",children:[h.jsx("span",{className:"text-4xl mb-3 grayscale",children:""}),h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous text-slate-600",children:"No transmissions recorded"})]})]})]})]})})]}):lr?h.jsxs("form",{onSubmit:Ea,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:"SECURITY UPDATE"}),h.jsxs("p",{className:"text-center text-slate-400 font-righteous uppercase tracking-widest mb-8",children:["UPDATING KEY FOR: ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:Lt==null?void 0:Lt.name})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"NEW ENCRYPTION PIN"}),h.jsx("input",{required:!0,type:"password",value:_a,onChange:E=>{Jn(E.target.value),fn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all",placeholder:"ENTER NEW PIN"})]}),qn&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",qn]})})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{di(!1),dn(Lt),mt(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"UPDATE KEY"})]})]}):vo?h.jsxs("form",{onSubmit:Rl,className:"max-w-xl mx-auto bg-[#101015] border-2 border-white/10 p-10 rounded-[3rem] space-y-6 shadow-[0_0_60px_rgba(255,0,127,0.1)] animate-in fade-in zoom-in-95 duration-500",children:[h.jsx("h3",{className:"text-5xl font-bold text-white uppercase tracking-tight font-bungee neon-glow-pink mb-2 text-center",children:Lt?"Modify Profile":"New User Account"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"IDENTITY HANDLE"}),h.jsx("input",{required:!0,type:"text",value:Xn.name,onChange:E=>{At({...Xn,name:E.target.value}),fn("")},className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]}),qn&&h.jsx("div",{className:"mb-4 animate-pulse",children:h.jsxs("p",{className:"text-[var(--neon-pink)] font-bold uppercase text-sm tracking-widest flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:""})," ",qn]})}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-500 uppercase mb-2 ml-4 tracking-widest font-righteous",children:"ENCRYPTION PIN (OPTIONAL)"}),h.jsx("input",{type:"password",value:Xn.password,onChange:E=>At({...Xn,password:E.target.value}),className:"w-full bg-black border border-white/10 rounded-2xl px-6 py-4 text-white font-bold uppercase font-righteous tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"button",onClick:()=>{In(!1),mt(null)},className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-bold uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-bold uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white",children:"AUTHORIZE ACCOUNT"})]})]}):h.jsx("div",{className:"space-y-16",children:(()=>{const E=s.filter(U=>!U.password&&e.participants.some(ne=>ne.id===U.id)&&(U.name.toLowerCase().includes(Hn.toLowerCase())||U.id.toLowerCase().includes(Hn.toLowerCase()))),J=s.filter(U=>(U.password||!e.participants.some(ne=>ne.id===U.id))&&(U.name.toLowerCase().includes(Hn.toLowerCase())||U.id.toLowerCase().includes(Hn.toLowerCase())));return h.jsxs(h.Fragment,{children:[E.length>0&&h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-[var(--neon-green)] uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"CONNECTIONS"}),h.jsx("div",{className:"h-[2px] w-full bg-gradient-to-r from-[var(--neon-green)]/30 to-transparent"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:E.map(U=>h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 rounded-[2rem] p-4 flex items-center justify-between hover:border-[var(--neon-green)] transition-all shadow-lg group relative overflow-hidden",children:[h.jsxs("div",{className:"flex items-center gap-6 min-w-0 pr-4",children:[h.jsx(fr,{name:U.name,isActive:!0}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("button",{onClick:()=>dn(U),className:"text-white font-bold text-3xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-green)] transition-colors font-bungee",children:U.name}),h.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[h.jsx("span",{className:"text-[10px] bg-[var(--neon-green)] text-black px-2 py-0.5 rounded-full font-black uppercase tracking-widest font-righteous shrink-0",children:"LIVE"}),h.jsxs("span",{className:"text-sm text-slate-600 uppercase font-black font-righteous tracking-widest truncate",children:[U.favorites.length,"   ",U.personalHistory.length," TX"]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[h.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 bg-black/40 rounded-2xl border border-white/5",children:[h.jsx("button",{onClick:()=>dn(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>hr(U),className:"py-2.5 px-4 bg-white/5 hover:bg-white/10 text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>Vt(U),className:"py-2.5 px-6 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO_SET"}),h.jsx("button",{onClick:()=>ls(U),className:"py-2.5 px-6 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-white rounded-lg text-xs font-black uppercase tracking-widest transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"MANUAL"})]}),h.jsx("button",{onClick:()=>{Gt("Terminate temporary link?",async()=>{await Zh(U.id),await ve()})},className:"w-10 h-10 flex items-center justify-center text-rose-500/20 hover:text-rose-500 hover:bg-rose-500/10 rounded-xl transition-all font-black",children:""})]})]},U.id))})]}),h.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-6",children:[h.jsx("h3",{className:"text-base font-black text-slate-600 uppercase tracking-[0.5em] font-righteous whitespace-nowrap",children:"ARCHIVE DIRECTORY"}),h.jsx("div",{className:"h-[1px] w-full bg-white/5"})]}),h.jsx("div",{className:"flex flex-col gap-4",children:J.map(U=>{const ne=e.participants.some(ue=>ue.id===U.id);return h.jsxs("div",{className:`bg-[#101015] border-2 ${ne?"border-[var(--neon-cyan)] shadow-[0_0_20px_rgba(0,229,255,0.1)]":"border-white/5"} rounded-[2.5rem] p-6 flex flex-col justify-between hover:border-[var(--neon-purple)] transition-all group`,children:[h.jsxs("div",{className:"flex justify-between items-start gap-4 mb-3",children:[h.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-black border-2 ${U.password?"bg-indigo-900/50 border-[var(--neon-purple)] text-white shadow-[0_0_15px_rgba(167,139,250,0.3)]":"bg-slate-800 border-white/10 text-slate-500"}`,children:U.name.charAt(0).toUpperCase()}),U.isAdmin&&h.jsx("div",{className:"absolute -top-2 -right-2 bg-[var(--neon-pink)] text-black text-[10px] font-black px-2 py-0.5 rounded-full shadow-lg border border-white/20",children:"ADMIN"})]}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("div",{className:"flex justify-between items-start gap-2",children:h.jsx("button",{onClick:()=>dn(U),className:"text-white font-bold text-2xl uppercase truncate tracking-tight text-left block hover:text-[var(--neon-purple)] transition-colors font-bungee",children:U.name})}),h.jsxs("p",{className:"text-xs text-slate-500 uppercase font-black tracking-[0.2em] mt-1 font-righteous",children:[U.password?" AUTHENTICATED":"GUEST ID","  ",U.favorites.length," "]})]})]}),h.jsx("button",{onClick:()=>ui(U),className:"p-3 bg-white/5 border border-white/10 rounded-xl hover:bg-[var(--neon-cyan)]/20 hover:border-[var(--neon-cyan)] hover:text-[var(--neon-cyan)] transition-all group/qr",title:"Generate CONNECTION QR",children:h.jsxs("div",{className:"w-6 h-6 flex flex-col justify-between items-center p-0.5",children:[h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"}),h.jsxs("div",{className:"w-full flex justify-between",children:[h.jsx("div",{className:"w-[2px] h-[2px] bg-current"}),h.jsx("div",{className:"w-[2px] h-[2px] bg-current"})]}),h.jsx("div",{className:"w-full h-[2px] bg-current"})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>dn(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"LOG"}),h.jsx("button",{onClick:()=>hr(U),className:"flex-1 py-2.5 bg-black border border-white/10 hover:border-[var(--neon-purple)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"}),h.jsx("button",{onClick:()=>Vt(U),className:"flex-[2] py-2.5 bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-cyan)]",children:"AUTO-SET"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>ls(U),className:"flex-[4] py-2.5 bg-slate-900 border border-white/5 hover:border-[var(--neon-pink)] text-slate-500 hover:text-white rounded-lg flex items-center justify-center gap-2 transition-all text-xs font-black uppercase font-righteous",children:"MANUAL SELECT"}),h.jsx("button",{onClick:()=>{Gt("Erase this record permanently?",async()=>{await Zh(U.id),await ve()})},className:"flex-1 py-2.5 bg-rose-500/5 text-rose-500/20 hover:text-rose-500 border border-transparent hover:border-rose-500/30 rounded-lg transition-all flex items-center justify-center",children:""})]})]})]},U.id)})}),J.length===0&&E.length===0&&h.jsx("div",{className:"text-center py-24 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-slate-800 text-base font-black uppercase tracking-[0.5em] font-righteous",children:"EMPTY DIRECTORY - NO CONNECTIONS DETECTED"})})]})]})})()})})]})}),(l||A||R||j||p||y)&&h.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[100] backdrop-blur-xl",children:h.jsx("div",{className:"w-full max-w-md",children:(()=>{let E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:ht.SINGING},J="Global Track Input";if(R&&ze)if(R.type==="favorite"){const U=ze.favorites.find(ne=>ne.id===R.itemId);U&&(E={singerName:ze.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},J=`Edit Permanent Favorite for ${ze.name}`)}else{const U=ze.personalHistory.find(ne=>ne.id===R.itemId);U&&(E={singerName:ze.name,songName:U.songName,artist:U.artist,youtubeUrl:U.youtubeUrl||"",type:U.type},J=`Edit History Entry for ${ze.name}`)}else A?(E={singerName:A.participantName,songName:A.songName,artist:A.artist,youtubeUrl:A.youtubeUrl||"",type:A.type},J="Modify Track"):y?(E={singerName:"",songName:y.songName,artist:y.artist,youtubeUrl:y.youtubeUrl||"",type:y.type},J="Edit Verified Song"):p?(E={singerName:"",songName:"",artist:"",youtubeUrl:"",type:ht.SINGING},J="Add to Verified Songbook"):j&&(E.singerName=j.name,J=`Song for ${j.name}`);return h.jsx(kT,{title:J,showSingerName:!R&&!y&&!p,initialSingerName:E.singerName,initialSongName:E.songName,initialArtist:E.artist,initialYoutubeUrl:E.youtubeUrl,initialType:E.type,submitLabel:A||R||y?"Save Update":p?"Add to Library":"Queue Track",onSubmit:cr,onCancel:pi,participants:e.participants},(A==null?void 0:A.id)||(R==null?void 0:R.itemId)||(j==null?void 0:j.id)||(y==null?void 0:y.id)||(p?"new-verified":"new-request"))})()})}),(_||kn)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-500",children:h.jsxs("div",{className:"w-full max-w-2xl bg-[#0a0a0a] border-4 border-white/10 rounded-[3rem] p-8 relative overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] animate-in zoom-in-95 duration-500",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] via-[var(--neon-purple)] to-[var(--neon-pink)] animate-gradient-x"}),h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tight font-bungee neon-glow-white",children:kn?"USER CONNECTION":"JOIN ROOM"}),kn&&h.jsxs("p",{className:"text-[var(--neon-cyan)] text-xs font-black uppercase tracking-widest font-righteous mt-1",children:["TARGET: ",kn.name]})]}),h.jsx("button",{onClick:()=>{T(!1),ui(null)},className:"text-slate-600 hover:text-white p-2 font-black text-3xl transition-colors",children:""})]}),h.jsx("div",{className:"flex flex-col items-center gap-4",children:(()=>{const E=Sd(),J=E.includes("localhost")||E.includes("127.0.0.1"),U=Pe=>{const Nt=Pe.replace(/\/$/,"")+"/";return kn?`${Nt}?userId=${kn.id}&room=${oe||""}&view=PARTICIPANT`:`${Nt}?room=${oe||""}&view=PARTICIPANT`};if(!J){const Pe=U(E);return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:" LIVE URL  SCAN TO JOIN"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(cx,{value:Pe,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-[var(--neon-green)]/10 border border-[var(--neon-green)]/30 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-green)] break-all text-center",children:Pe})})]})}const ne=dt.trim()?dt.trim().startsWith("http")?dt.trim():`http://${dt.trim()}:5173/SingMode-v.2/`:null,ue=ne?U(ne):"http://enter-your-ip-below";return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"w-full p-3 bg-rose-500/20 border border-rose-500/40 rounded-xl",children:[h.jsx("p",{className:"text-rose-400 text-[10px] font-black uppercase tracking-widest text-center",children:" LOCALHOST  phones can't connect via this URL"}),h.jsx("p",{className:"text-slate-500 text-[10px] text-center mt-1 font-mono",children:"Deploy to GitHub Pages for automatic public URLs, or enter your LAN IP below"})]}),h.jsx("p",{className:"text-[var(--neon-yellow)] font-black uppercase tracking-[0.2em] text-[10px] font-righteous self-start",children:"MANUAL NETWORK IP"}),h.jsx("div",{className:"bg-white p-4 rounded-2xl w-full max-w-sm mx-auto shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:scale-105 transition-transform",children:h.jsx(cx,{value:ue,size:300,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),h.jsx("div",{className:"w-full p-3 bg-black/60 border border-white/10 rounded-xl",children:h.jsx("p",{className:"text-[10px] font-mono text-[var(--neon-cyan)] break-all text-center",children:ne?ue:"Enter IP below to generate URL"})}),h.jsx("input",{type:"text",value:dt,onChange:Pe=>ft(Pe.target.value),placeholder:"e.g. 192.168.0.160",className:"w-full bg-black border-2 border-[var(--neon-yellow)]/40 focus:border-[var(--neon-yellow)] rounded-xl px-4 py-3 text-white font-mono text-sm outline-none transition-all placeholder:text-slate-600"}),h.jsx("button",{onClick:()=>{cg(dt.trim())},className:"w-full py-3 bg-[var(--neon-yellow)] text-black rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous",children:"SAVE & USE THIS IP"})]})})()}),h.jsx("div",{className:"mt-6 p-3 bg-white/5 rounded-2xl border border-white/5 text-center",children:h.jsx("p",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-widest text-sm font-righteous",children:kn?"AUTO-LOGIN ENABLED":`ROOM ID: ${oe}`})})]})}),bt&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-xl bg-[#050510] border-4 border-white/10 p-12 rounded-[3.5rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-glow-purple",children:"Connection Source"}),h.jsx("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mb-12 font-righteous opacity-80",children:"Set the endpoint for guest terminal connections"}),h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"bg-black/40 p-8 rounded-[2rem] border-2 border-white/5 border-dashed",children:[h.jsx("p",{className:"text-sm text-slate-500 uppercase font-black mb-3 tracking-[0.3em] font-righteous",children:"LOCAL ENVIRONMENT DETECTION"}),h.jsxs("div",{className:"text-xl text-[var(--neon-cyan)] font-mono font-black tracking-widest",children:[window.location.hostname," ",h.jsx("span",{className:"text-sm text-slate-700 opacity-60",children:"(CURRENT HOST)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-black text-slate-500 uppercase mb-4 ml-4 tracking-[0.3em] font-righteous",children:"TERMINAL ADDRESS / PUBLIC TUNNEL URL"}),h.jsx("input",{type:"text",value:dt,onChange:E=>ft(E.target.value),placeholder:"E.G. 192.168.1.15 OR HTTPS://CONNECTION.NGROK.APP",className:"w-full bg-black border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-black uppercase font-mono tracking-widest outline-none focus:border-[var(--neon-pink)] transition-all placeholder:text-slate-800 text-lg"})]}),h.jsx("div",{className:"bg-[var(--neon-pink)]/5 border border-[var(--neon-pink)]/10 p-6 rounded-2xl",children:h.jsx("p",{className:"text-sm text-[var(--neon-pink)]/60 font-black leading-relaxed uppercase tracking-widest font-righteous italic",children:"Note: Cross-network connectivity requires tunneling (ngrok) for public-private bridge."})}),h.jsxs("div",{className:"flex gap-4 pt-6",children:[h.jsx("button",{onClick:()=>Q(!1),className:"flex-1 py-4 bg-black border border-white/10 text-white rounded-xl text-sm font-black uppercase tracking-widest font-righteous hover:bg-white/5",children:"ABORT"}),h.jsx("button",{onClick:Sr,className:"flex-[2] py-4 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"AUTHORIZE CONFIG"})]})]})]})}),qr&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[200] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#0a0a0a] border-4 border-white/10 rounded-[4rem] overflow-hidden shadow-[0_0_100px_rgba(0,0,0,0.8)] flex flex-col max-h-[90vh] relative animate-in zoom-in-95 duration-300",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsxs("div",{className:"p-8 border-b-2 border-white/5 flex justify-between items-center bg-black/40 backdrop-blur-xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white font-bungee uppercase tracking-tight neon-glow-pink",children:"Signal Selection"}),h.jsxs("p",{className:"text-base text-[var(--neon-cyan)] font-black uppercase tracking-[0.4em] mt-1 font-righteous opacity-80",children:["Verified Catalog  Target: ",h.jsx("span",{className:"text-[var(--neon-pink)]",children:qr.name})]})]}),h.jsx("button",{onClick:()=>ls(null),className:"text-slate-600 hover:text-white p-3 font-black text-4xl transition-colors transform hover:scale-110",children:""})]}),h.jsx("div",{className:"p-6 bg-black/20 border-b-2 border-white/5",children:h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"FILTER VERIFIED TRANSMISSIONS...",value:Er,onChange:E=>ci(E.target.value),className:"w-full bg-[#050510] border-2 border-white/10 rounded-2xl px-12 py-4 text-white font-black uppercase tracking-widest font-righteous outline-none focus:border-[var(--neon-pink)] transition-all shadow-inner placeholder:text-slate-700 text-xl"}),h.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-700 group-focus-within:text-[var(--neon-pink)] transition-colors",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[h.jsx("circle",{cx:"11",cy:"11",r:"8"}),h.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:[Er&&fs.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO MATCHING TRANSMISSIONS"})}),!Er&&dr.length===0&&h.jsx("div",{className:"text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO VERIFIED SONGS IN LIBRARY"})}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(Er?fs:dr).map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-2xl p-4 relative overflow-hidden group hover:border-[var(--neon-pink)] transition-all",children:[h.jsx("h3",{className:"text-lg font-black text-white uppercase truncate font-righteous",children:E.songName}),h.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-4 font-righteous",children:E.artist}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>jn(E),className:"flex-1 py-2 bg-[var(--neon-pink)]/20 text-[var(--neon-pink)] hover:text-black rounded-lg text-xs font-black uppercase transition-all font-righteous hover:bg-[var(--neon-pink)]",children:"SELECT"}),h.jsx("button",{onClick:()=>gi(E),className:"flex-1 py-2 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-white rounded-lg text-xs font-black uppercase transition-all font-righteous",children:"EDIT"})]})]},E.id))})]}),h.jsx("div",{className:"p-6 border-t-2 border-white/5 flex justify-end bg-black/40 backdrop-blur-xl",children:h.jsx("button",{onClick:()=>g(!0),className:"py-3 px-6 bg-[var(--neon-cyan)] text-black rounded-xl text-sm font-black uppercase tracking-widest font-righteous shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all hover:scale-105",children:"ADD NEW VERIFIED SONG"})})]})}),h.jsx("style",{children:`
        @keyframes gradient-x {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient-x {
          background-size: 200% 200%;
          animation: gradient-x 3s ease infinite;
        }
        .neon-glow-pink {
          text-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 0 0 20px rgba(255, 0, 255, 0.3);
        }
        .neon-glow-cyan {
          text-shadow: 0 0 10px rgba(0, 229, 255, 0.5), 0 0 20px rgba(0, 229, 255, 0.3);
        }
        .neon-glow-purple {
          text-shadow: 0 0 10px rgba(167, 139, 250, 0.5), 0 0 20px rgba(167, 139, 250, 0.3);
        }
        .neon-glow-green {
           text-shadow: 0 0 10px rgba(0, 255, 157, 0.5), 0 0 20px rgba(0, 255, 157, 0.3);
        }
        .neon-glow-white {
           text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.02);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.1);
          border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.2);
        }
      `}),Mt==="ADMIN"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-green)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsx("div",{className:"flex justify-between items-center mb-10 relative z-10",children:h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-green",children:[h.jsx("span",{className:"text-5xl",children:""})," SESSION CONTROL"]}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-widest mt-2 font-righteous",children:"MANAGE ACTIVE INSTANCES"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[hs.map(E=>h.jsxs("div",{className:"bg-black/40 border-2 border-white/5 rounded-[2rem] p-6 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("div",{className:"w-12 h-12 bg-black rounded-xl border border-white/10 flex items-center justify-center text-2xl",children:E.id===(e==null?void 0:e.id)?"":""}),h.jsx("div",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest border ${E.id===(e==null?void 0:e.id)?"bg-[var(--neon-cyan)]/20 text-[var(--neon-cyan)] border-[var(--neon-cyan)]":"bg-slate-800 text-slate-400 border-white/10"}`,children:E.id===(e==null?void 0:e.id)?"CURRENT":"REMOTE"})]}),h.jsx("h3",{className:"text-xl font-black text-white uppercase truncate font-bungee mb-1",children:E.venueName||"Unknown Venue"}),h.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider mb-6 font-righteous",children:["HOST: ",E.hostName,"  ID: ",E.id]}),h.jsx("button",{onClick:()=>{Gt(`Force close session "${E.venueName}"? This cannot be undone.`,async()=>{await AT(E.id)})},className:"w-full py-3 bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white border border-rose-500/30 rounded-xl font-black uppercase tracking-widest text-xs transition-all font-righteous",children:"FORCE CLOSE"})]},E.id)),hs.length===0&&h.jsx("div",{className:"col-span-full text-center py-20 opacity-50",children:h.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-slate-600 font-righteous",children:"NO ACTIVE SESSIONS FOUND"})})]})]})}),Mt==="SESSION"&&h.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:h.jsxs("div",{className:"bg-[#0a0a10]/90 backdrop-blur-2xl rounded-[3rem] p-10 border border-white/5 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--neon-purple)]/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/4 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-10 relative z-10",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-4xl font-bold font-bungee text-white uppercase flex items-center gap-4 neon-glow-purple",children:[h.jsx("span",{className:"text-5xl",children:""})," DAY_SHOW SESSION"]}),h.jsx("p",{className:"text-slate-400 mt-2 font-mono",children:"Monitor all connected devices and manage active synchronization."})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"STATUS"}),h.jsx("span",{className:`text-xl font-black ${oe?"text-[var(--neon-green)]":"text-rose-500"} uppercase font-bungee`,children:oe?"ACTIVE":"OFFLINE"})]}),h.jsxs("div",{className:"px-6 py-3 bg-white/5 rounded-2xl border border-white/10 flex items-center gap-3",children:[h.jsx("span",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest font-righteous",children:"ROOM"}),h.jsx("span",{className:"text-2xl font-black text-white font-mono",children:oe||"----"})]})]})]}),oe?h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[(Na=e.deviceConnections)==null?void 0:Na.map(E=>{var ue;const J=E.status==="connected",U=E.userId?s.find(Pe=>Pe.id===E.userId)||((ue=e.participants)==null?void 0:ue.find(Pe=>Pe.id===E.userId)):null,ne=E.isGuest||(U&&"isGuest"in U?U.isGuest:!1);return h.jsxs("div",{className:`p-6 rounded-[2rem] border transition-all relative overflow-hidden group ${J?"bg-[#151520] border-[var(--neon-purple)]/30 hover:border-[var(--neon-purple)]":"bg-[#05050A] border-white/5 opacity-60"}`,children:[h.jsx("div",{className:`absolute top-6 right-6 w-3 h-3 rounded-full ${J?"bg-[var(--neon-green)] shadow-[0_0_10px_var(--neon-green)]":"bg-rose-500"}`}),h.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[h.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-3xl shadow-lg ${U?ne?"bg-[var(--neon-orange)]/20 text-[var(--neon-orange)]":"bg-[var(--neon-blue)]/20 text-[var(--neon-blue)]":"bg-white/5 text-slate-500"}`,children:U?ne?"":"":""}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-white font-righteous tracking-wide flex items-center gap-3",children:[E.id,ne&&h.jsx("span",{className:"px-2 py-0.5 rounded bg-rose-500 text-[8px] font-black text-white",children:"GUEST"})]}),h.jsxs("div",{className:"text-xs font-mono text-slate-500 mt-1 flex flex-col gap-1",children:[h.jsx("div",{className:"truncate max-w-[150px]",title:E.peerId,children:E.peerId}),E.userAgent&&h.jsx("div",{className:"text-[10px] text-[var(--neon-cyan)]/60 font-black uppercase flex items-center gap-1",children:E.userAgent.toLowerCase().includes("mobile")?" MOBILE":" DESKTOP"})]}),h.jsx("div",{className:`mt-2 text-xs font-bold uppercase tracking-widest px-2 py-0.5 rounded inline-block ${J?"bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"bg-rose-500/10 text-rose-500"}`,children:E.status})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"p-4 bg-black/40 rounded-xl border border-white/5",children:[h.jsx("div",{className:"text-[10px] uppercase text-slate-500 font-bold tracking-widest mb-1",children:"Assigned Session"}),h.jsx("div",{className:"text-white font-medium truncate",children:U?U.name:h.jsx("span",{className:"text-slate-600 italic",children:"Unassigned"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{const Pe=prompt("Enter User Name to link (must exist in Directory):");if(Pe){const Nt=s.find($n=>$n.name.toLowerCase()===Pe.toLowerCase());Nt?(S5(E.id,Nt.id,Nt.isGuest),ve()):alert("User not found!")}},className:"flex-1 py-3 rounded-xl bg-white/5 hover:bg-white/10 border border-white/5 hover:border-white/20 text-sm font-bold text-white transition-all",children:U?"CHANGE":"LINK USER"}),h.jsx("button",{onClick:()=>{Gt("Forget this device?",async()=>{await N5(E.id),ve()})},className:"px-4 py-3 rounded-xl bg-rose-500/10 hover:bg-rose-500/20 border border-rose-500/20 text-rose-500 transition-all",children:"Forget"})]})]})]},E.id)}),(!e.deviceConnections||e.deviceConnections.length===0)&&h.jsx("div",{className:"col-span-full py-20 text-center text-slate-500 font-mono",children:"No devices detected yet. Scan the QR code to connect."})]}):h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsxs("div",{className:"max-w-xl w-full bg-[#0a0a0a] border-4 border-dashed border-white/5 rounded-[4rem] p-16 text-center",children:[h.jsx("div",{className:"w-24 h-24 bg-[var(--neon-purple)]/10 text-[var(--neon-purple)] rounded-[2.5rem] flex items-center justify-center text-5xl mx-auto mb-10 shadow-[0_0_50px_rgba(180,0,255,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-4xl font-black text-white uppercase mb-4 font-bungee tracking-tight",children:"OPEN BROADCAST"}),h.jsxs("p",{className:"text-slate-500 font-bold uppercase tracking-widest text-xs mb-10 font-righteous leading-relaxed",children:["ACTIVATE THE WORLDWIDE SYNC PROTOCOL. ",h.jsx("br",{}),"ALLOW SINGER CONNECTIONS AND REMOTE COMMANDS."]}),h.jsx("button",{onClick:()=>we(!0),className:"mb-10 px-6 py-3 bg-white/5 hover:bg-white/10 rounded-2xl border border-white/10 flex items-center justify-center gap-3 text-xs font-black text-slate-400 hover:text-white transition-all uppercase tracking-[0.2em] font-righteous mx-auto shadow-inner",children:" VIEW SESSION HISTORY"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[10px] font-black text-[var(--neon-purple)] uppercase tracking-[0.3em] mb-3 font-righteous",children:"SESSION NAME / ROOM ID"}),h.jsx("input",{type:"text",value:de,onChange:E=>Ne(E.target.value.toUpperCase().replace(/\s+/g,"_")),className:"w-full bg-black border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono text-center text-2xl tracking-widest focus:border-[var(--neon-purple)] outline-none transition-all"})]}),h.jsx("button",{onClick:$r,disabled:je||!de,className:"w-full py-6 bg-[var(--neon-purple)] text-white rounded-[1.5rem] font-black uppercase tracking-[0.2em] text-xl shadow-[0_0_40px_rgba(180,0,255,0.4)] hover:scale-105 hover:bg-fuchsia-500 transition-all disabled:opacity-50 disabled:scale-100 font-righteous",children:je?"INITIALIZING...":"OPEN DAY_SHOW SESSION"})]})]})}),oe&&h.jsxs("div",{className:"mt-10 p-8 bg-black/40 rounded-[2.5rem] border border-white/5 relative overflow-hidden animate-in slide-in-from-bottom-4 duration-700",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-cyan)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-cyan",children:"Live Session Log"}),h.jsx("span",{className:"px-3 py-1 rounded-full bg-[var(--neon-cyan)]/10 border border-[var(--neon-cyan)]/30 text-[9px] font-black text-[var(--neon-cyan)] uppercase tracking-widest animate-pulse",children:" REALTIME_FEED"})]}),h.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto pr-4 no-scrollbar custom-scrollbar",children:[(yi=e.logs)==null?void 0:yi.slice().reverse().map((E,J)=>h.jsxs("div",{className:"flex gap-4 items-start animate-in slide-in-from-left-2 duration-300 group",children:[h.jsxs("span",{className:"text-[10px] font-mono text-slate-600 shrink-0 mt-0.5 group-hover:text-slate-400 transition-colors",children:["[",new Date(E.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),"]"]}),h.jsx("span",{className:`text-xs font-righteous uppercase tracking-wide px-2 py-0.5 rounded ${E.type==="error"?"text-rose-500 bg-rose-500/5":E.type==="warn"?"text-[var(--neon-yellow)] bg-[var(--neon-yellow)]/5":"text-slate-300 group-hover:text-white transition-colors"}`,children:E.message})]},J)),(!e.logs||e.logs.length===0)&&h.jsx("div",{className:"text-center py-10 text-slate-700 font-black uppercase tracking-widest text-[10px] italic",children:"AWAITING_INITIAL_SYNC_EVENTS..."})]})]})]})}),le&&h.jsx("div",{className:"fixed inset-0 bg-black/98 flex items-center justify-center p-6 z-[400] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl bg-[#050510] border-4 border-[var(--neon-purple)]/30 rounded-[4rem] p-12 shadow-[0_0_100px_rgba(180,0,255,0.2)] flex flex-col max-h-[85vh] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-[var(--neon-purple)]/5 blur-[100px] rounded-full -mr-48 -mt-48 pointer-events-none"}),h.jsxs("div",{className:"flex justify-between items-center mb-12",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-5xl font-black text-white uppercase tracking-tight font-bungee neon-text-glow-purple",children:"SESSION_HISTORY"}),h.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-[0.2em] text-xs mt-2 font-righteous",children:"ARCHIVE OF PREVIOUS SINGMODE V.2 BROADCASTS"})]}),h.jsx("button",{onClick:()=>we(!1),className:"w-16 h-16 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center text-2xl transition-all",children:""})]}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-4 space-y-4 no-scrollbar",children:Ge.length===0?h.jsx("div",{className:"py-32 text-center text-slate-600 font-black uppercase tracking-widest font-righteous italic",children:"NO PREVIOUS SESSIONS RECORDED"}):h.jsx("div",{className:"grid gap-4",children:Ge.map(E=>h.jsxs("div",{className:"p-8 bg-white/5 rounded-[2.5rem] border border-white/5 hover:border-white/10 transition-all group flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-8",children:[h.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)]/20 flex flex-col items-center justify-center",children:h.jsx("span",{className:"text-2xl",children:""})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-tight font-righteous",children:E.venueName||"Main Lounge"}),h.jsxs("div",{className:"flex items-center gap-4 mt-1 text-slate-500 font-mono text-sm",children:[h.jsxs("span",{children:["ID: ",E.id]}),h.jsx("span",{children:""}),h.jsx("span",{children:new Date(E.startedAt).toLocaleDateString()})]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-1 font-righteous",children:"Duration"}),h.jsx("div",{className:"text-white font-mono text-xl",children:E.endedAt?Math.floor((E.endedAt-E.startedAt)/(60*1e3))+" MINS":"---"})]})]},E.id))})})]})}),Fr.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:Fr.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>js(E=>({...E,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{js(E=>({...E,isOpen:!1})),await Fr.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},tD=({onJoin:r})=>{const[e,t]=ie.useState([]),[s,a]=ie.useState(!0);return ie.useEffect(()=>{const l=RT(u=>{t(u),a(!1)});return()=>l()},[]),s?h.jsx("div",{className:"text-center py-20 animate-pulse",children:h.jsx("div",{className:"text-[var(--neon-cyan)] text-xl font-black uppercase tracking-widest font-righteous",children:"SEARCHING FOR STAGES..."})}):e.length===0?h.jsxs("div",{className:"text-center py-20 px-6 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5 mx-auto max-w-2xl",children:[h.jsx("p",{className:"text-[var(--neon-pink)] text-2xl font-black uppercase tracking-widest font-bungee mb-4",children:"NO STAGES FOUND"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-wider text-sm",children:"There are no active sessions nearby."})]}):h.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6 animate-in fade-in slide-in-from-bottom-8 duration-700",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"w-3 h-3 bg-[var(--neon-green)] rounded-full animate-ping"}),h.jsx("h2",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] font-righteous text-lg",children:"LIVE STAGES"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(l=>h.jsxs("div",{className:"group relative bg-[#101015] border-2 border-white/5 hover:border-[var(--neon-cyan)] p-8 rounded-[2.5rem] transition-all hover:-translate-y-2 hover:shadow-[0_0_50px_rgba(0,229,255,0.15)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 via-transparent to-[var(--neon-purple)]/0 group-hover:from-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-purple)]/5 transition-all duration-500"}),h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("div",{className:"w-16 h-16 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-3xl shadow-xl group-hover:scale-110 transition-transform duration-500 group-hover:border-[var(--neon-cyan)]",children:""}),h.jsx("div",{className:"px-3 py-1 bg-[var(--neon-green)]/10 text-[var(--neon-green)] border border-[var(--neon-green)]/20 rounded-lg text-[10px] font-black uppercase tracking-widest font-righteous",children:"ONLINE"})]}),h.jsx("h3",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight group-hover:text-[var(--neon-cyan)] transition-colors truncate",children:l.venueName||"OPEN MIC"}),h.jsxs("div",{className:"flex items-center gap-2 mb-8 text-slate-400 font-righteous uppercase tracking-wider text-xs",children:[h.jsx("span",{className:"text-[var(--neon-pink)]",children:"HOST:"})," ",l.hostName]}),h.jsx("button",{onClick:()=>r(l.id),className:"w-full py-4 bg-white text-black font-black uppercase tracking-[0.2em] rounded-xl hover:bg-[var(--neon-cyan)] transition-all font-righteous hover:scale-[1.02] active:scale-95 shadow-lg",children:"JOIN STAGE"})]})]},l.id))})]})},r1=({url:r})=>r?h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",title:"Open Video Link",className:"p-2 rounded-lg text-[var(--neon-cyan)] hover:bg-[var(--neon-cyan)]/20 border border-[var(--neon-cyan)]/30 transition-all shadow-[0_0_10px_rgba(0,229,255,0.2)]",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),h.jsx("polyline",{points:"15 3 21 3 21 9"}),h.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})}):null,nD=()=>{const[r,e]=ie.useState(null),[t,s]=ie.useState(null),[a,l]=ie.useState(!0),[u,p]=ie.useState(""),[g,y]=ie.useState(""),[b,_]=ie.useState(""),[T,k]=ie.useState(""),[V,$]=ie.useState(""),[Z,ae]=ie.useState(null),[he,pe]=ie.useState(!1),[ye,De]=ie.useState(null),[Ee,A]=ie.useState(null),[C,R]=ie.useState("ROTATION"),[L,j]=ie.useState(!1),[O,I]=ie.useState(""),[rt,bt]=ie.useState(!1),[Q,le]=ie.useState(0),[we,Ge]=ie.useState(!1),[et,P]=ie.useState("connecting"),K=it.getRoomId(),oe=Sd()+(K?`?room=${K}&view=PARTICIPANT`:""),[de,Ne]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),je=(se,me)=>{Ne({isOpen:!0,message:se,onConfirm:me})};ie.useEffect(()=>{(async()=>{const Dt=new URLSearchParams(window.location.search).get("userId");if(Dt){console.log(`[Participant] CONNECTION Login detected for userId: ${Dt}`);const Oe=await M5(Dt);Oe.success&&Oe.profile&&(s(Oe.profile),l(!1),window.history.replaceState({},"",window.location.pathname+(K?`?room=${K}`:"")))}const Ht=await Un();if(Ht){s(Ht);let Oe=null;K&&(Oe=await n1(K)),Oe||(Oe=await Qe()),ae(Oe);const Ae=Oe.participants.find(Pt=>Pt.id===Ht.id);if(Ae)e(Ae);else{console.log(`[Participant] Auto-joining session ${K} for profile ${Ht.id}`);try{const Pt=await na(Ht.id);e(Pt)}catch(Pt){console.error("Auto-join failed:",Pt)}}}else{let Oe=null;K&&(Oe=await n1(K)),Oe||(Oe=await Qe()),ae(Oe)}})(),it.onConnectionStatus=qe=>{P(qe)},it.onStateReceived=qe=>{console.log("[Participant] Real-time state received via syncService (PeerJS)"),ae(qe);const Dt=t==null?void 0:t.id;if(Dt){const Ht=qe.participants.find(Oe=>Oe.id===Dt);Ht?e(Ht):(console.log("[Participant] User no longer in session participant list. Clearing state."),e(null))}};let me=null;return K&&(console.log(`[Participant] Subscribing to Firestore state for room: ${K}`),me=X5(K,qe=>{console.log("[Participant] Real-time state received via Firestore"),ae(qe);const Dt=t==null?void 0:t.id;if(Dt){const Ht=qe.participants.find(Oe=>Oe.id===Dt);Ht?e(Ht):(console.log("[Participant] User no longer in session participant list (Firestore). Clearing state."),e(null))}})),()=>{it.onStateReceived=null,me&&me()}},[K,t]);const Re=async()=>{const se=await Qe();ae(se);const me=await Un();if(s(me),!me)e(null);else{const qe=se.participants.find(Dt=>Dt.id===me.id);qe&&e(qe)}};ie.useEffect(()=>(window.addEventListener("kstar_sync",Re),window.addEventListener("storage",Re),()=>{window.removeEventListener("kstar_sync",Re),window.removeEventListener("storage",Re)}),[]);const dt=async se=>{se.preventDefault(),p("");try{if(a){const me=await P5(g,T);if(me.success&&me.profile){const qe=await na(me.profile.id);e(qe),s(me.profile)}else p(me.error||"Authorization failed.")}else{if(T!==V){p("PASSWORDS_DO_NOT_MATCH");return}const me=await Wc({name:g,email:b||void 0,password:T||void 0},!0);if(me.success&&me.profile){const qe=await na(me.profile.id);e(qe),s(me.profile)}else p(me.error||"Initialization failed.")}}catch(me){p(me.message||"An unexpected error occurred.")}},ft=async se=>{r&&(await ra(r.id,se),await Re())},Hn=async se=>{r&&(ye?(await Uc(ye.id,{songName:se.songName,artist:se.artist,youtubeUrl:se.youtubeUrl,type:se.type,message:se.message}),De(null)):(await Qi({participantId:r.id,participantName:r.name,songName:se.songName,artist:se.artist,youtubeUrl:se.youtubeUrl,type:se.type,message:se.message}),pe(!1),r.status!==Ut.READY&&await ra(r.id,Ut.READY)),A(null),await Re())},os=()=>{pe(!1),De(null),A(null)},Ds=async()=>{p("");try{const se=`Guest-${Math.floor(Math.random()*1e4)}`,me=await Wc({name:se},!0);if(me.success&&me.profile){const qe=await na(me.profile.id);e(qe),s(me.profile),A(null),pe(!0),await ra(me.profile.id,Ut.READY)}else p(me.error||"Guest initialization failed.")}catch(se){p(se.message||"An unexpected error occurred.")}};if(!r)return h.jsxs("div",{className:"max-w-2xl mx-auto p-8 flex flex-col items-center justify-center min-h-[90vh] text-center animate-in fade-in duration-1000 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-[#10002B] to-black -z-10"}),h.jsxs("div",{className:"w-48 h-48 flex items-center justify-center mb-12 relative group",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)] blur-[60px] opacity-40 group-hover:opacity-60 transition-opacity"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 relative z-10 bg-black shadow-2xl",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_40px_rgba(255,0,127,0.5)] w-full h-full",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"})})})]}),h.jsx("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-cyan)] font-righteous mb-16 uppercase tracking-[0.6em] text-lg font-black neon-glow-cyan",children:"SINGER LOGIN"}),h.jsxs("div",{className:"w-full max-w-lg mb-12 relative z-20",children:[h.jsx("button",{onClick:Ds,className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsx("p",{className:"text-slate-500 font-righteous uppercase tracking-widest text-xs mt-4",children:"GUEST PASS"})]}),h.jsxs("div",{className:"relative w-full max-w-lg",children:[h.jsx("div",{className:"absolute inset-0 flex items-center mb-8",children:h.jsx("div",{className:"w-full border-t border-white/10"})}),h.jsx("div",{className:"relative flex justify-center mb-8",children:h.jsx("span",{className:"bg-black px-4 text-slate-500 font-righteous uppercase tracking-widest text-sm",children:"MEMBER LOGIN"})})]}),h.jsxs("form",{onSubmit:dt,className:"w-full space-y-8 bg-[#050510] p-10 md:p-14 rounded-[4rem] border-4 border-white/5 shadow-[0_0_100px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)]"}),u&&h.jsx("div",{className:"bg-rose-500/10 border border-rose-500/30 text-rose-500 text-base py-4 px-6 rounded-2xl font-black uppercase tracking-widest animate-pulse font-righteous",children:u}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"STAGE NAME"}),h.jsx("input",{type:"text",required:!0,value:g,onChange:se=>y(se.target.value),placeholder:"Stage Name",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-2xl uppercase tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"EMAIL (OPTIONAL)"}),h.jsx("input",{type:"email",value:b,onChange:se=>_(se.target.value),placeholder:"myname@emailserver.com",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-purple)] outline-none transition-all shadow-inner text-xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"PASSWORD"}),h.jsx("input",{type:"password",required:!a,value:T,onChange:se=>k(se.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),!a&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-base font-black text-slate-500 uppercase tracking-[0.3em] mb-3 text-left font-righteous ml-4",children:"CONFIRM PASSWORD"}),h.jsx("input",{type:"password",required:!0,value:V,onChange:se=>$(se.target.value),placeholder:"",className:"w-full bg-[#101015] border-2 border-white/10 rounded-2xl px-8 py-5 text-white font-bold focus:border-[var(--neon-pink)] outline-none transition-all shadow-inner text-3xl tracking-wider placeholder:text-slate-600 font-righteous"})]}),h.jsx("button",{type:"submit",className:"w-full py-6 mt-6 bg-[var(--neon-pink)] hover:bg-white hover:text-black text-white rounded-2xl font-black text-3xl shadow-[0_0_40px_rgba(255,0,127,0.3)] transition-all uppercase tracking-[0.2em] font-bungee hover:scale-[1.02] active:scale-95",children:a?"SIGN IN":"CREATE PROFILE"}),h.jsx("button",{type:"button",onClick:()=>{l(!a),p("")},className:"text-slate-600 hover:text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.3em] pt-6 block mx-auto transition-colors font-righteous border-b-2 border-transparent hover:border-[var(--neon-cyan)] pb-1",children:a?"CREATE ACCOUNT":"BACK TO START"})]})]});if(!Z)return null;const Gr=Z.requests.filter(se=>se.participantId===r.id);return h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-10 relative",children:[h.jsxs("header",{className:"relative rounded-[3rem] p-1 overflow-hidden shadow-2xl group",children:[h.jsx("div",{className:"absolute inset-0 bg-[#0a0a0a] rounded-[2.9rem]"}),h.jsx("div",{className:"absolute top-0 inset-x-0 h-32 bg-[var(--neon-purple)]/10 blur-[50px]"}),h.jsxs("div",{className:"relative p-8 flex flex-col items-center text-center",children:[h.jsx("div",{className:"absolute top-6 right-6 z-20"}),h.jsxs("div",{className:"w-24 h-24 p-1 rounded-full border-2 border-white/10 mb-6 relative",children:[h.jsx("div",{className:"absolute inset-0 rounded-full bg-[var(--neon-pink)]/20 blur-xl"}),h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full object-cover relative z-10"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 bg-black rounded-full flex items-center justify-center border-2 border-black z-20",children:h.jsx("div",{className:`w-3 h-3 rounded-full animate-pulse shadow-[0_0_10px_currentColor] ${et==="connected"?"bg-[var(--neon-green)] text-[var(--neon-green)]":et==="connecting"?"bg-[var(--neon-yellow)] text-[var(--neon-yellow)]":"bg-rose-500 text-rose-500"}`})})]}),h.jsx("h2",{className:"text-4xl font-bold text-white tracking-tight uppercase leading-none font-bungee mb-2",children:r.name}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:()=>{je("Are you sure you want to sign out?",async()=>{console.log("[Participant] Initiating sign out..."),await Xd(),window.location.href=window.location.pathname})},className:"flex items-center gap-2 px-4 py-2 bg-rose-500/10 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl transition-all font-black uppercase text-[10px] tracking-widest font-righteous border border-rose-500/20 hover:border-transparent",children:[h.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"SIGN OUT"]})})]})]}),Z&&Z.currentRound&&Z.currentRound.length>0&&h.jsxs("section",{className:"animate-in fade-in slide-in-from-top-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 px-4",children:[h.jsx("div",{className:"w-2 h-2 bg-[var(--neon-green)] rounded-full animate-blink"}),h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-base font-righteous",children:"ON STAGE"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:Z.currentRound.map((se,me)=>h.jsxs("div",{className:`p-3 pl-6 pr-4 rounded-xl border-l-8 transition-all duration-300 flex items-center justify-between gap-4 w-full shadow-lg relative overflow-hidden group ${me===0?"bg-[#001005] border-l-[var(--neon-green)] border-y border-r border-[#1a3320] z-10 scale-[1.01]":"bg-[#0a0a10] border-l-slate-700 border-y border-r border-white/10 opacity-70 hover:opacity-100"}`,children:[h.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_49%,rgba(255,255,255,0.03)_50%,transparent_51%)] bg-[length:50px_100%] pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-6 min-w-0 flex-1 z-10",children:[h.jsxs("div",{className:"relative",children:[me===0&&h.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-[var(--neon-green)] text-black text-[8px] font-black uppercase tracking-[0.2em] rounded animate-pulse shadow-[0_0_10px_var(--neon-green)] z-20",children:"LIVE"}),h.jsx("div",{className:`w-14 h-14 flex flex-col justify-center items-center border-2 rounded-xl transition-all shrink-0 ${me===0?"border-[var(--neon-green)] bg-[var(--neon-green)]/10 text-[var(--neon-green)]":"border-white/10 text-slate-400"}`,children:h.jsx("span",{className:"text-xl font-bold font-mono tracking-tighter",children:se.requestNumber})})]}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6 min-w-0 flex-1",children:[h.jsx("h3",{className:`text-xl sm:text-2xl font-black uppercase font-righteous tracking-tight leading-tight ${me===0?"text-white":"text-slate-300"}`,children:se.songName}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 opacity-80 shrink-0",children:[h.jsx("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-cyan)] uppercase tracking-wider",children:se.artist}),h.jsx("span",{className:"text-slate-600 font-mono text-lg hidden sm:inline",children:"/"}),h.jsxs("span",{className:"text-sm sm:text-lg font-bold font-righteous text-[var(--neon-pink)] uppercase tracking-wider",children:["@",se.participantName]})]})]})]}),h.jsx("div",{className:"flex items-center gap-3 z-10 pl-4 border-l border-white/10 bg-gradient-to-l from-black/80 to-transparent",children:me===0&&h.jsx(r1,{url:se.youtubeUrl})})]},se.id))})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 bg-[#0a0a0a] p-2 rounded-2xl border border-white/5 shadow-inner",children:["ROTATION","REQUESTS","FAVORITES","HISTORY","VOCALS"].map(se=>h.jsxs("button",{onClick:()=>R(se),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all font-righteous flex flex-col items-center justify-center gap-1.5 ${C===se?"bg-[#151520] text-white shadow-[0_0_20px_rgba(255,255,255,0.05)] border border-white/10":"text-slate-600 hover:text-white hover:bg-white/5"}`,children:[h.jsx("span",{className:`text-2xl mb-0.5 ${C===se?"text-[var(--neon-pink)]":"grayscale opacity-50"}`,children:se==="ROTATION"?"":se==="REQUESTS"?"":se==="FAVORITES"?"":se==="HISTORY"?"":""}),se==="ROTATION"?"STAGE":se==="REQUESTS"?"MY SONGS":se==="FAVORITES"?"SONGBOOK":se==="HISTORY"?"LOG":"MIC SETUP"]},se))}),h.jsx("button",{onClick:()=>{A(null),pe(!0)},className:"w-full py-8 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-blue)] text-white rounded-[2.5rem] font-black text-4xl shadow-[0_0_60px_rgba(255,0,127,0.4)] uppercase tracking-[0.1em] active:scale-95 transition-all font-bungee hover:brightness-110 border-4 border-white/10 animate-pulse",children:"SING!"}),h.jsxs("div",{className:"flex gap-4 pt-2",children:[h.jsx("button",{onClick:()=>ft(Ut.READY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Ut.READY?"bg-[#051005] border-[var(--neon-green)] shadow-[0_0_30px_rgba(0,255,157,0.2)] text-[var(--neon-green)]":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"READY"})}),h.jsx("button",{onClick:()=>ft(Ut.STANDBY),className:`flex-1 py-4 rounded-[1.5rem] font-bold text-xl uppercase tracking-wider transition-all border-2 flex items-center justify-center gap-2 group relative overflow-hidden font-bungee ${r.status===Ut.STANDBY?"bg-[#150505] border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.2)] text-rose-500":"bg-[#101015] border-white/5 text-slate-700 hover:border-white/10"}`,children:h.jsx("span",{className:"relative z-10",children:"NOT YET"})})]}),(he||ye)&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-50 overflow-y-auto backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsx("div",{className:"w-full max-w-lg space-y-6",children:h.jsx(kT,{title:ye?"Remix Request":"New Transmission",submitLabel:ye?"Save Remix":"Transmit",initialSongName:(ye==null?void 0:ye.songName)||(Ee==null?void 0:Ee.songName)||"",initialArtist:(ye==null?void 0:ye.artist)||(Ee==null?void 0:Ee.artist)||"",initialYoutubeUrl:(ye==null?void 0:ye.youtubeUrl)||(Ee==null?void 0:Ee.youtubeUrl)||"",initialType:(ye==null?void 0:ye.type)||(Ee==null?void 0:Ee.type)||ht.SINGING,onSubmit:Hn,onCancel:os,participants:Z.participants,currentUserId:r.id},(ye==null?void 0:ye.id)||"new-request")})}),h.jsxs("main",{className:"min-h-[300px] pb-32",children:[C==="ROTATION"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsx("h3",{className:"text-[var(--neon-green)] font-black uppercase tracking-[0.3em] text-sm px-4 font-righteous opacity-80",children:"COMING UP"}),h.jsx("div",{className:"space-y-4",children:(()=>{Z.requests.filter(Ae=>Ae.status===Ue.PENDING&&!Ae.isInRound);const se=Z.requests.filter(Ae=>Ae.status===Ue.APPROVED&&Ae.type===ht.SINGING&&!Ae.isInRound),me=Z.participants.filter(Ae=>se.some(Pt=>Pt.participantId===Ae.id)).sort((Ae,Pt)=>(Pt.joinedAt||0)-(Ae.joinedAt||0)),qe={};se.forEach(Ae=>{qe[Ae.participantId]||(qe[Ae.participantId]=[]),qe[Ae.participantId].push(Ae)}),Object.keys(qe).forEach(Ae=>{qe[Ae].sort((Pt,qr)=>Pt.createdAt-qr.createdAt)});const Dt=[];let Ht=0,Oe=!0;for(;Oe;)Oe=!1,me.forEach(Ae=>{qe[Ae.id]&&qe[Ae.id][Ht]&&(Dt.push(qe[Ae.id][Ht]),Oe=!0)}),Ht++;return Dt.length===0?h.jsx("div",{className:"text-center py-16 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"QUEUE EMPTY"})}):Dt.map((Ae,Pt)=>h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 p-6 rounded-[2rem] flex justify-between items-center group hover:border-[var(--neon-blue)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-blue)] transition-colors",children:Ae.songName}),h.jsxs("div",{className:"text-base text-[var(--neon-cyan)] uppercase tracking-[0.2em] flex items-center gap-2 font-righteous",children:[Ae.artist," ",h.jsx("span",{className:"text-white/20",children:"|"})," ",h.jsx("span",{className:"text-slate-400",children:Ae.participantName})]})]}),h.jsx("div",{className:"shrink-0 w-12 h-12 rounded-full border border-[var(--neon-blue)]/50 bg-[var(--neon-blue)]/10 flex items-center justify-center text-[var(--neon-blue)] text-xl font-black font-bungee shadow-[0_0_15px_rgba(5,217,232,0.2)]",children:Pt+1})]},Ae.id))})()})]}),C==="REQUESTS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[Gr.map(se=>h.jsx("div",{className:"relative group",children:h.jsxs("div",{className:"bg-[#151520] border-2 border-white/5 p-6 rounded-[2rem] hover:border-[var(--neon-pink)] transition-all",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsxs("div",{className:"font-bold text-white tracking-tight uppercase truncate font-bungee text-3xl group-hover:text-[var(--neon-pink)] transition-colors",children:[h.jsxs("span",{className:"text-slate-500 mr-2 text-[11px] font-mono tracking-widest",children:["#",se.requestNumber]}),se.songName]}),h.jsx(r1,{url:se.youtubeUrl})]}),h.jsx("div",{className:"text-base text-slate-400 font-bold uppercase tracking-[0.2em] truncate font-righteous",children:se.artist})]}),h.jsx("div",{className:`shrink-0 px-3 py-1 rounded-lg border text-xs font-black uppercase tracking-widest ${se.status===Ue.APPROVED?se.isInRound?"bg-[var(--neon-green)] border-[var(--neon-green)] text-black animate-pulse shadow-[0_0_15px_var(--neon-green)]":"bg-[var(--neon-cyan)]/10 border-[var(--neon-cyan)] text-[var(--neon-cyan)]":"border-white/10 text-slate-600"}`,children:se.status===Ue.APPROVED?se.isInRound?"LIVE":"QUEUED":"PENDING"})]}),(se.status===Ue.PENDING||se.status===Ue.APPROVED)&&h.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/5",children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:async()=>{await lg(r.id,se.id,"up"),await Re()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Up",children:""}),h.jsx("button",{onClick:async()=>{await lg(r.id,se.id,"down"),await Re()},className:"w-10 h-10 bg-white/5 hover:bg-white/10 rounded-xl flex items-center justify-center text-white transition-all text-xl",title:"Move Down",children:""})]}),h.jsx("button",{onClick:()=>De(se),className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-white",children:"EDIT"}),h.jsx("button",{onClick:async()=>{await Ki(se.id),await Re()},className:"flex-1 py-3 bg-rose-500/10 hover:bg-rose-500/20 rounded-xl text-sm font-black uppercase tracking-widest transition-all font-righteous text-rose-500",children:"CANCEL"})]})]})},se.id)),Gr.length===0&&h.jsx("div",{className:"text-center py-20 bg-black/20 rounded-[3rem] border-2 border-dashed border-white/5",children:h.jsx("p",{className:"text-base font-black uppercase tracking-[0.5em] font-righteous text-slate-700",children:"NO REQUESTS"})})]}),C==="FAVORITES"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"relative group",children:[h.jsx("input",{type:"text",placeholder:"SEARCH SONGBOOK...",value:O,onChange:se=>I(se.target.value),className:"w-full bg-[#101015] border-2 border-white/10 rounded-[2rem] py-5 px-6 pl-14 text-xl font-bold uppercase tracking-wider text-white focus:outline-none focus:border-[var(--neon-pink)] transition-all font-righteous placeholder:text-slate-600 shadow-inner"}),h.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl text-slate-600 group-focus-within:text-[var(--neon-pink)] transition-colors",children:""})]}),h.jsx("div",{className:"grid gap-3",children:(()=>{const se=[...t.favorites.map(me=>({...me,isFavorite:!0})),...((Z==null?void 0:Z.verifiedSongbook)||[]).filter(me=>!t.favorites.some(qe=>qe.songName===me.songName&&qe.artist===me.artist)).map(me=>({...me,isFavorite:!1}))].filter(me=>!O||me.songName.toLowerCase().includes(O.toLowerCase())||me.artist.toLowerCase().includes(O.toLowerCase()));return se.length===0?h.jsx("div",{className:"text-center py-20 opacity-30 font-righteous text-sm uppercase tracking-widest text-slate-500",children:"NO_MATCHES"}):se.map(me=>h.jsxs("div",{className:"bg-[#101015] p-5 rounded-[2rem] flex justify-between items-center group border-2 border-white/5 hover:border-[var(--neon-yellow)] transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight group-hover:text-[var(--neon-yellow)] transition-colors",children:me.songName}),me.isFavorite&&h.jsx("span",{className:"text-lg text-[var(--neon-yellow)] animate-pulse",children:""})]}),h.jsx("div",{className:"text-sm text-slate-400 font-bold uppercase tracking-[0.2em] font-righteous",children:me.artist})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{A({...me}),pe(!0)},className:"bg-[var(--neon-pink)] text-black px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-white transition-all font-righteous shadow-[0_0_15px_rgba(255,0,127,0.3)] hover:scale-105 active:scale-95",children:"ADD"}),h.jsx("button",{onClick:async()=>{await TT(me),await Re()},className:`px-2 transition-colors ${me.isFavorite?"text-rose-500":"text-slate-700 hover:text-[var(--neon-yellow)]"}`,children:me.isFavorite?"":""})]})]},me.id))})()})]}),C==="HISTORY"&&t&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-4",children:[t.personalHistory.map((se,me)=>h.jsxs("div",{className:"bg-[#101015] p-6 rounded-[2rem] flex justify-between items-center border-2 border-white/5 hover:border-[var(--neon-purple)] group transition-all",children:[h.jsxs("div",{className:"min-w-0 pr-4",children:[h.jsx("div",{className:"text-white font-bold uppercase truncate text-2xl font-bungee tracking-tight mb-1 group-hover:text-[var(--neon-purple)] transition-colors",children:se.songName}),h.jsx("div",{className:"text-base text-[var(--neon-cyan)]/70 font-bold uppercase tracking-[0.2em] font-righteous",children:se.artist})]}),h.jsx("button",{onClick:()=>{A({...se,type:ht.SINGING}),pe(!0)},className:"text-slate-600 hover:text-white border border-white/5 hover:border-white px-4 py-2 rounded-xl font-black text-xs uppercase tracking-widest transition-all font-righteous",children:"AGAIN"})]},me)),t.personalHistory.length===0&&h.jsx("div",{className:"text-center py-20 opacity-30 border-2 border-dashed border-white/5 rounded-[2.5rem] bg-black/20",children:h.jsx("p",{className:"text-sm font-black uppercase tracking-[0.4em] font-righteous text-slate-600",children:"NO HISTORY FOUND"})})]}),C==="VOCALS"&&h.jsxs("section",{className:"animate-in slide-in-from-bottom-8 duration-500 space-y-6",children:[h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 relative overflow-hidden group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-100 transition-opacity",children:h.jsx("span",{className:"text-5xl",children:""})}),h.jsx("h3",{className:"text-[var(--neon-cyan)] font-black uppercase tracking-[0.3em] font-righteous mb-6",children:"VOCAL SETUP"}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("div",{className:"w-full bg-black/40 border border-white/10 rounded-2xl p-6 flex flex-col items-center",children:[h.jsx("span",{className:"text-sm font-black text-slate-500 uppercase tracking-widest font-righteous mb-2",children:"SINGER RANGE"}),h.jsx("span",{className:"text-4xl font-bold text-white uppercase font-bungee tracking-tight neon-text-glow-cyan",children:(t==null?void 0:t.vocalRange)||"UNKNOWN"})]}),rt?h.jsxs("div",{className:"w-full space-y-3 py-2",children:[h.jsx("div",{className:"h-2 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[var(--neon-cyan)] animate-pulse shadow-[0_0_10px_var(--neon-cyan)]",style:{width:`${Q}%`}})}),h.jsx("div",{className:"text-xs text-[var(--neon-cyan)] font-black animate-pulse font-righteous text-center tracking-[0.2em]",children:"CALIBRATING VOICE..."})]}):h.jsx("button",{onClick:async()=>{bt(!0);let se=0;const me=setInterval(()=>{se+=5,le(se),se>=100&&(clearInterval(me),setTimeout(async()=>{const qe=["Soprano","Alto","Tenor","Baritone","Bass"],Dt=qe[Math.floor(Math.random()*qe.length)];t&&await L5(t.id,Dt),bt(!1),le(0),await Re()},500))},100)},className:"px-8 py-4 bg-[var(--neon-cyan)]/10 hover:bg-[var(--neon-cyan)] text-[var(--neon-cyan)] hover:text-black rounded-xl font-black uppercase tracking-[0.2em] transition-all font-righteous border border-[var(--neon-cyan)]/30 hover:shadow-[0_0_20px_var(--neon-cyan)]",children:"START_CALIBRATION_SEQUENCE"})]})]}),h.jsxs("div",{className:"bg-[#101015] border-2 border-white/5 rounded-[2.5rem] p-8 opacity-50 relative overflow-hidden border-dashed",children:[h.jsx("h3",{className:"text-slate-500 font-black uppercase tracking-[0.3em] font-righteous mb-2",children:"MICROPHONE_TOOLS"}),h.jsx("p",{className:"text-slate-600 font-mono text-xs uppercase tracking-wider",children:"HARDWARE_LINK_OFFLINE // COMING_SOON"})]})]})]}),h.jsxs("footer",{className:"fixed bottom-6 left-6 right-6 z-40 flex gap-4",children:[h.jsxs("button",{onClick:()=>Ge(!0),className:"flex-1 bg-[#101015] border-2 border-[var(--neon-green)]/30 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:bg-[var(--neon-green)] hover:text-black hover:border-[var(--neon-green)] transition-all group",children:[h.jsx("span",{className:"text-sm font-black uppercase tracking-[0.3em] font-righteous group-hover:text-black text-[var(--neon-green)]",children:"SCAN_NODES"}),h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})]}),h.jsxs("button",{onClick:()=>j(!0),className:"flex-1 bg-[#101015] border-2 border-white/10 p-4 rounded-[2rem] flex items-center justify-between px-8 shadow-2xl hover:border-[var(--neon-pink)] transition-all group",children:[h.jsx("span",{className:"text-sm text-[var(--neon-pink)] font-black uppercase tracking-[0.3em] font-righteous",children:"SYSTEM_LINK"}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform",children:""})})]})]}),we&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-4 md:p-10 overflow-hidden max-h-[90vh] overflow-y-auto",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-green)] via-[var(--neon-cyan)] to-[var(--neon-blue)] animate-gradient-x"}),h.jsx("button",{onClick:()=>Ge(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors z-50",children:""}),h.jsx("h3",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight mb-8 font-bungee neon-glow-green mt-8",children:"CONNECTIONS"}),h.jsx(tD,{onJoin:se=>{window.location.search=`?room=${se}`}})]})}),L&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-8 z-[200] animate-in zoom-in-95 duration-300",children:h.jsxs("div",{className:"w-full max-w-sm text-center relative bg-[#050510] border-4 border-white/10 rounded-[3rem] p-10 overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] animate-gradient-x"}),h.jsx("button",{onClick:()=>j(!1),className:"absolute top-6 right-6 text-slate-700 hover:text-white text-3xl transition-colors",children:""}),h.jsx("div",{className:"bg-white p-4 rounded-[2rem] inline-block mb-8 shadow-[0_0_40px_rgba(255,255,255,0.1)]",children:h.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=${encodeURIComponent(oe)}&bgcolor=ffffff`,alt:"Room QR",className:"w-48 h-48"})}),h.jsx("h3",{className:"text-5xl font-black text-white uppercase tracking-tight mb-2 font-bungee neon-glow-white",children:"SYNC_NODE"}),h.jsx("p",{className:"text-[var(--neon-cyan)] text-sm font-black uppercase tracking-[0.4em] font-righteous opacity-80",children:"SCAN TO INITIALIZE CONNECTION"})]})}),de.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:de.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>Ne(se=>({...se,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{Ne(se=>({...se,isOpen:!1})),await de.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]})},nl=({title:r,icon:e,description:t,items:s})=>h.jsxs("div",{className:"bg-[#101015] border border-white/5 p-10 rounded-[3.5rem] hover:border-[var(--neon-pink)] transition-all backdrop-blur-xl group relative overflow-hidden shadow-2xl",children:[h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[var(--neon-pink)]/5 blur-3xl rounded-full -mr-16 -mt-16 group-hover:bg-[var(--neon-pink)]/10 transition-colors"}),h.jsx("div",{className:"w-20 h-20 bg-black border border-white/10 rounded-2xl flex items-center justify-center text-4xl mb-8 group-hover:scale-110 group-hover:border-[var(--neon-pink)] group-hover:text-white transition-all shadow-2xl relative z-10",children:e}),h.jsx("h3",{className:"text-3xl font-bold text-white font-bungee uppercase mb-4 tracking-tight group-hover:text-[var(--neon-pink)] transition-colors relative z-10 leading-none",children:r}),h.jsx("p",{className:"text-[var(--neon-cyan)]/70 mb-8 font-bold uppercase text-[10px] tracking-[0.2em] font-righteous leading-relaxed relative z-10 transition-opacity",children:t}),h.jsx("ul",{className:"space-y-4 relative z-10",children:s.map((a,l)=>h.jsxs("li",{className:"flex items-start gap-3 text-[11px] text-slate-500 font-bold uppercase tracking-widest font-righteous group-hover:text-[var(--neon-cyan)] transition-colors",children:[h.jsx("span",{className:"text-[var(--neon-cyan)] font-bold",children:""}),a]},l))})]}),rD=({onBack:r,onAdminLogin:e})=>{const t=()=>{prompt("Enter Admin Password:")==="Organized"?e():alert("Access Denied: Incorrect Password")};return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-slate-200 p-6 md:p-16 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsx("div",{className:"absolute -top-[500px] -right-[500px] w-[1000px] h-[1000px] bg-[var(--neon-pink)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute -bottom-[500px] -left-[500px] w-[1000px] h-[1000px] bg-[var(--neon-cyan)]/5 blur-[200px] rounded-full"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-5 pointer-events-none"}),h.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-24 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsx("div",{onClick:r,className:"cursor-pointer hover:scale-105 transition-transform",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-10 h-10 rounded-full border border-[var(--neon-pink)]"}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest",children:"Singmode v.2"})]})}),h.jsx("button",{onClick:r,className:"px-8 py-4 bg-black border border-white/10 hover:border-[var(--neon-pink)] text-slate-400 hover:text-white rounded-2xl font-bold text-[9px] uppercase tracking-widest font-righteous transition-all",children:"RETURN TO HUB"})]}),h.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-32 animate-in fade-in zoom-in duration-700 delay-100",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-bold font-bungee text-white mb-8 tracking-tight uppercase leading-none neon-text-glow-purple",children:["The ultimate ",h.jsx("span",{className:"text-[var(--neon-cyan)]",children:"karaoke"})," os"]}),h.jsx("p",{className:"text-[10px] md:text-xs text-[var(--neon-cyan)]/80 font-bold uppercase tracking-[0.4em] font-righteous leading-relaxed max-w-2xl mx-auto border-y border-[var(--neon-cyan)]/20 py-4",children:"Singmode v.2 transforms any arena into a high-fidelity visual theater. Connect instantly, dominate the queue, and emit your signal."})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-32 animate-in fade-in slide-in-from-bottom-8 duration-1000 delay-200",children:[h.jsx(nl,{title:"DJ Console",icon:"",description:"The command center for your sessions. Maintain signal flow.",items:["Real-time Queue Logic","Drag & Drop Sequencer","Instant Signal Auth","Master Output Control"]}),h.jsx(nl,{title:"Singer Web",icon:"",description:"A personal terminal for every guest. Eliminate analog friction.",items:["Identity Transmission","Smart Vector Search","High-Speed Requests","Live Sync Lyrics"]}),h.jsx(nl,{title:"Theater Box",icon:"",description:"A stunning visual matrix for the main screen. Pure aesthetics.",items:["Ultra-HD Playback","Generative Backgrounds","Active HUD Overlays","QR Signal Entrance"]}),h.jsx(nl,{title:"Hybrid AI",icon:"",description:"Gemini integration enhances the arena with predictive logic.",items:["Vibe-Matched Vectors","Dynamic Visual Synthesis","Automated Interstitials","Identity Verification"]}),h.jsx(nl,{title:"Sync Matrix",icon:"",description:"Real-time P2P technology keeps the cluster in perfect sync.",items:["Zero-Latency State","Decentralized Design","Instant Node Creation","Omni-Device Support"]}),h.jsx(nl,{title:"Prime Suite",icon:"",description:"Unlock premium protocols for venues and power units.",items:["Broadcast Protocols","Branding Overlays","Logic Routing","Priority Channel"]}),h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 border-2 border-dashed border-white/10 rounded-[3.5rem] flex flex-col items-center justify-center p-10 group hover:border-[var(--neon-cyan)] transition-all",children:[h.jsx("p",{className:"text-[10px] text-slate-700 font-black uppercase tracking-[0.4em] mb-6 font-righteous group-hover:text-[var(--neon-cyan)]",children:"ADMIN LOGIN"}),h.jsx("button",{onClick:t,className:"p-6 bg-black border border-white/5 rounded-2xl text-[10px] font-black uppercase tracking-widest font-righteous text-white/40 hover:text-white hover:border-white transition-all shadow-xl",children:" ENTER ADMIN MODE"})]})]}),h.jsx("div",{className:"text-center animate-in fade-in duration-700 delay-500 pb-32",children:h.jsx("button",{onClick:r,className:"px-16 py-8 bg-[var(--neon-cyan)] hover:bg-white text-black rounded-[3rem] font-bold text-2xl uppercase tracking-widest font-righteous shadow-[0_0_50px_rgba(34,211,238,0.4)] hover:scale-105 transition-all",children:"START SINGING"})})]})]})},sD=({onBack:r})=>{const[e,t]=ie.useState(null),[s,a]=ie.useState(""),[l,u]=ie.useState(!1),[p,g]=ie.useState({primary:"#ff007f",secondary:"#05d9e8",accent:"#feff3f"}),[y,b]=ie.useState({isOpen:!1,message:"",onConfirm:()=>{}}),_=(k,V)=>{b({isOpen:!0,message:k,onConfirm:V})};ie.useEffect(()=>{(async()=>{const V=await Qe();t(V),V.brandIdentity&&(a(V.brandIdentity.venueName),u(V.brandIdentity.isBusinessAccount)),V.customTheme&&g({primary:V.customTheme.primaryNeon,secondary:V.customTheme.secondaryNeon,accent:V.customTheme.accentNeon})})()},[]);const T=async()=>{var V;if(!e)return;const k={...e};k.brandIdentity={venueName:s,isBusinessAccount:l,logoUrl:(V=k.brandIdentity)==null?void 0:V.logoUrl},k.customTheme={primaryNeon:p.primary,secondaryNeon:p.secondary,accentNeon:p.accent},await vt(k),document.documentElement.style.setProperty("--neon-pink",p.primary),document.documentElement.style.setProperty("--neon-cyan",p.secondary),document.documentElement.style.setProperty("--neon-yellow",p.accent),alert("Configurations locked in.")};return e?h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white p-6 md:p-16 relative overflow-hidden font-righteous",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-pink)] via-[var(--neon-purple)] to-[var(--neon-cyan)] z-50 animate-gradient-x"}),h.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[h.jsxs("header",{className:"flex justify-between items-center mb-20 animate-in fade-in slide-in-from-top-4 duration-700",children:[h.jsxs("div",{onClick:r,className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-12 h-12 rounded-full border-2 border-[var(--neon-pink)] group-hover:scale-110 transition-all"}),h.jsx("h1",{className:"text-3xl font-bungee tracking-tight",children:"ADMIN SETTINGS"})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:r,className:"px-6 py-3 bg-black border border-white/10 hover:border-white text-slate-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all",children:"CLOSE MENU"}),h.jsxs("button",{onClick:()=>{_("Are you sure you want to sign out?",async()=>{await Xd(),window.location.reload()})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500/30 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] uppercase tracking-widest transition-all flex items-center gap-2",children:[h.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),"LOG OUT"]})]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-cyan)] mb-2 uppercase",children:"Venue Settings"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"VENUE DISPLAY"})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-slate-500 uppercase tracking-widest mb-2 ml-4",children:"Venue Display Name"}),h.jsx("input",{type:"text",value:s,onChange:k=>a(k.target.value),placeholder:"Enter Venue Name",className:"w-full bg-black/60 border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-bold outline-none focus:border-[var(--neon-cyan)] transition-all uppercase"})]}),h.jsxs("div",{className:"flex items-center justify-between p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1",children:"Business Account"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold",children:"Unlocks Revenue Stream Matrix"})]}),h.jsx("button",{onClick:()=>u(!l),className:`w-14 h-8 rounded-full transition-all relative ${l?"bg-[var(--neon-cyan)]":"bg-slate-800"}`,children:h.jsx("div",{className:`absolute top-1 w-6 h-6 rounded-full bg-white transition-all ${l?"right-1":"left-1"}`})})]})]})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-[var(--neon-pink)] mb-2 uppercase",children:"Theme Matrix"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"THEME COLORS"})]}),h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Primary Neon"}),h.jsx("input",{type:"color",value:p.primary,onChange:k=>g({...p,primary:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Secondary Neon"}),h.jsx("input",{type:"color",value:p.secondary,onChange:k=>g({...p,secondary:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]}),h.jsxs("div",{className:"flex items-center justify-between bg-white/5 p-4 rounded-xl border border-white/5",children:[h.jsx("label",{className:"text-[10px] uppercase font-black tracking-widest",children:"Accent Neon"}),h.jsx("input",{type:"color",value:p.accent,onChange:k=>g({...p,accent:k.target.value}),className:"bg-transparent border-none w-10 h-10 cursor-pointer"})]})]})})]}),h.jsxs("section",{className:"bg-black/40 border-2 border-white/5 rounded-[3rem] p-10 space-y-8 shadow-2xl col-span-full",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bungee text-rose-500 mb-2 uppercase",children:"System Maintenance"}),h.jsx("p",{className:"text-[10px] text-slate-500 uppercase tracking-widest font-black opacity-60",children:"DATABASE PURGE OPERATIONS"})]}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Account Optimization"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Deletes all guests and duplicate entries"}),h.jsx("button",{onClick:()=>{_("DANGER: This will permanently delete all guest accounts and duplicate stage names. Proceed?",async()=>{const k=await ET();k.success?alert(`Cleanup complete. Deleted ${k.deletedCount} items.`):alert(`Cleanup failed: ${k.error}`)})},className:"px-6 py-3 bg-rose-500/10 border border-rose-500 hover:bg-rose-500 text-rose-500 hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE GUESTS & DUPLICATES"})]}),h.jsxs("div",{className:"flex-1 p-6 bg-white/5 rounded-2xl border border-white/5",children:[h.jsx("h4",{className:"text-xs font-black uppercase tracking-widest mb-1 text-white",children:"Signal Maintenance"}),h.jsx("p",{className:"text-[9px] text-slate-500 uppercase font-bold mb-4",children:"Cleans up dead or abandoned stage signals"}),h.jsx("button",{onClick:()=>{_("This will remove all inactive or stale stage sessions from the public list. Proceed?",async()=>{const k=await K5();k.success?alert(`Signal cleanup complete. Removed ${k.deletedCount} stale sessions.`):alert(`Cleanup failed: ${k.error}`)})},className:"px-6 py-3 bg-[var(--neon-purple)]/10 border border-[var(--neon-purple)] hover:bg-[var(--neon-purple)] text-[var(--neon-purple)] hover:text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"PURGE STALE CONNECTIONS"})]})]})]})]}),h.jsx("div",{className:"mt-12 flex justify-center",children:h.jsx("button",{onClick:T,className:"px-16 py-6 bg-white text-black rounded-[2rem] font-bold text-xl uppercase tracking-widest font-bungee hover:bg-[var(--neon-cyan)] transition-all shadow-2xl hover:scale-105 active:scale-95",children:"SAVE CHANGES"})})]}),y.isOpen&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[300] backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-[#050510] border-4 border-[var(--neon-pink)]/30 rounded-[3rem] p-10 text-center shadow-[0_0_100px_rgba(255,42,109,0.3)] animate-in zoom-in-95 duration-300 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-[var(--neon-pink)] shadow-[0_0_20px_rgba(255,42,109,0.8)]"}),h.jsx("div",{className:"w-20 h-20 bg-[var(--neon-pink)]/10 text-[var(--neon-pink)] rounded-[2rem] border-2 border-[var(--neon-pink)]/20 flex items-center justify-center mx-auto mb-6 text-4xl font-black shadow-[0_0_30px_rgba(255,42,109,0.2)] animate-pulse",children:""}),h.jsx("h2",{className:"text-5xl font-black text-white uppercase mb-4 tracking-tight font-bungee neon-text-glow-pink",children:"CONFIRM"}),h.jsx("p",{className:"text-slate-400 text-lg mb-8 leading-relaxed font-black font-righteous uppercase tracking-widest",children:y.message}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>b(k=>({...k,isOpen:!1})),className:"flex-1 py-4 bg-black border-2 border-white/10 text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous transition-all hover:bg-white/5",children:"CANCEL"}),h.jsx("button",{onClick:async()=>{b(k=>({...k,isOpen:!1})),await y.onConfirm()},className:"flex-[2] py-4 bg-[var(--neon-pink)] text-white rounded-xl text-base font-black uppercase tracking-widest font-righteous shadow-[0_0_30px_rgba(255,42,109,0.4)] transition-all hover:bg-rose-400 hover:scale-105",children:"PROCEED"})]})]})})]}):null},iD=()=>{const[r,e]=ie.useState("SELECT"),[t,s]=ie.useState(!0),[a,l]=ie.useState(null),[u,p]=ie.useState(!1),[g,y]=ie.useState(!1),[b,_]=ie.useState("");ie.useEffect(()=>{(async()=>{var A;const he=new URLSearchParams(window.location.search),pe=(A=he.get("view"))==null?void 0:A.toUpperCase(),ye=he.get("userId"),De=he.get("room");(De||ye)&&p(!0);try{pe==="DJ"?e("DJ"):pe==="PARTICIPANT"||pe==="STAGE"||De||ye?(e("PARTICIPANT"),await ig("PARTICIPANT",De||void 0)):e("SELECT")}catch(C){console.error("[App] Init Error:",C),l(C.message),e("SELECT")}const Ee=await Qe();Ee.customTheme&&(document.documentElement.style.setProperty("--neon-pink",Ee.customTheme.primaryNeon),document.documentElement.style.setProperty("--neon-cyan",Ee.customTheme.secondaryNeon),document.documentElement.style.setProperty("--neon-yellow",Ee.customTheme.accentNeon)),await F5(),s(!1)})()},[]);const T=async ae=>{s(!0),l(null);try{e(ae),ae==="PARTICIPANT"&&await ig(ae)}catch(he){l(he.message),e("SELECT")}finally{s(!1)}},k=()=>{b.trim()&&(cg(b.trim()),y(!1),_(""))},V=Sd(),$=it.getRoomId(),Z=`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(V+($?`?room=${$}`:""))}&bgcolor=ffffff`;if(t)return h.jsxs("div",{className:"min-h-screen bg-[#050510] flex flex-col items-center justify-center space-y-8 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black"}),h.jsxs("div",{className:"w-24 h-24 relative",children:[h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-pink)]/30 rounded-full animate-ping"}),h.jsx("div",{className:"absolute inset-0 border-4 border-[var(--neon-cyan)]/30 rounded-full animate-ping delay-75"}),h.jsx("div",{className:"relative z-10 w-full h-full border-4 border-t-[var(--neon-pink)] border-r-[var(--neon-purple)] border-b-[var(--neon-cyan)] border-l-[var(--neon-yellow)] rounded-full animate-spin"})]}),h.jsx("h2",{className:"text-2xl font-black font-bungee text-white uppercase tracking-widest animate-pulse z-10",children:"INITIALIZING"})]});if(r==="FEATURES")return h.jsx(rD,{onBack:()=>e("SELECT"),onAdminLogin:()=>e("ADMIN")});if(r==="ADMIN")return h.jsx(sD,{onBack:()=>e("SELECT")});if(r==="SELECT"){const ae=IT(),he=V.includes("localhost")||V.includes("127.0.0.1");return h.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-[#050510] relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#10002B] to-black -z-10"}),h.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('/grid.svg')] opacity-10"}),h.jsxs("div",{className:"max-w-7xl w-full z-10",children:[h.jsxs("div",{className:"text-center mb-20 animate-in fade-in slide-in-from-top-4 duration-1000",children:[h.jsxs("div",{className:"flex justify-center mb-10 relative",children:[h.jsx("div",{className:"absolute inset-0 bg-[var(--neon-pink)]/20 blur-[100px] rounded-full"}),h.jsx("div",{className:"p-3 rounded-full border-4 border-white/10 bg-black shadow-2xl relative z-10",children:h.jsx("div",{className:"rounded-full overflow-hidden border-4 border-[var(--neon-pink)] shadow-[0_0_50px_rgba(255,0,127,0.5)] w-48 h-48",children:h.jsx("img",{src:"IGK.jpeg",alt:"Island Groove",className:"w-full h-full object-cover"})})})]}),h.jsx("h1",{className:"text-6xl md:text-9xl font-bold font-bungee text-white mb-6 uppercase tracking-tight neon-text-glow-purple leading-none drop-shadow-2xl",children:"Singmode v.2"}),h.jsx("p",{className:"text-[var(--neon-yellow)] text-xl md:text-2xl font-bold tracking-widest uppercase neon-glow-yellow font-righteous",children:"KARAOKE_LOUNGE_SYSTEM"})]}),a&&h.jsxs("div",{className:"mb-12 p-10 bg-[#150005] border-4 border-rose-500 rounded-[3rem] text-center animate-in zoom-in duration-500 max-w-3xl mx-auto shadow-[0_0_60px_rgba(244,63,94,0.4)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-rose-500 animate-pulse"}),h.jsx("div",{className:"text-6xl mb-6",children:""}),h.jsx("h3",{className:"text-rose-500 font-bold uppercase tracking-widest text-3xl mb-4 font-bungee",children:"SYSTEM_CONFLICT"}),h.jsx("p",{className:"text-white text-xl font-bold leading-relaxed font-righteous",children:a}),h.jsx("p",{className:"text-rose-500/50 text-xs mt-8 uppercase font-bold tracking-widest font-righteous",children:"SINGLE_DJ_PROTOCOL_ACTIVE"})]}),h.jsxs("div",{className:`grid gap-8 ${u?"grid-cols-1 max-w-2xl mx-auto":"md:grid-cols-2"}`,children:[!u&&h.jsxs("button",{onClick:()=>T("DJ"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-pink)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(255,0,127,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-pink)]/0 to-[var(--neon-pink)]/5 group-hover:to-[var(--neon-pink)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-pink)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-pink)] transition-colors",children:"DJ_CONSOLE"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-cyan)] opacity-90 leading-relaxed",children:"COORDINATE ROTATION. APPROVE REQUESTS. COMMAND ATMOSPHERE."})]})]}),h.jsxs("button",{onClick:()=>T("PARTICIPANT"),className:"group relative p-12 bg-[#101015] border-4 border-white/5 rounded-[4rem] text-left transition-all hover:border-[var(--neon-cyan)] hover:-translate-y-2 hover:shadow-[0_0_80px_rgba(0,229,255,0.2)] overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--neon-cyan)]/0 to-[var(--neon-cyan)]/5 group-hover:to-[var(--neon-cyan)]/10 transition-all"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 bg-black border-2 border-white/10 rounded-3xl flex items-center justify-center text-5xl mb-8 group-hover:scale-110 transition-all group-hover:border-[var(--neon-cyan)] shadow-2xl",children:""}),h.jsx("h2",{className:"text-5xl font-bold mb-4 font-bungee uppercase tracking-tight text-white group-hover:text-[var(--neon-cyan)] transition-colors",children:"SINGER_UI"}),h.jsx("p",{className:"text-sm font-medium font-righteous uppercase tracking-widest text-[var(--neon-yellow)] opacity-90 leading-relaxed",children:"REQUEST SONGS. FAVORITE VIBES. ACCESS SONGBOOK."})]})]})]}),h.jsxs("div",{className:"mt-16 p-10 bg-[#080808] border-2 border-white/5 rounded-[3rem] flex flex-col md:flex-row items-center gap-10 relative overflow-hidden group hover:border-[var(--neon-green)] transition-all",children:[h.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[var(--neon-green)]/5 blur-[80px] rounded-full -mr-32 -mt-32 pointer-events-none"}),h.jsx("div",{className:"bg-white p-4 rounded-3xl shrink-0 shadow-[0_0_40px_rgba(0,255,157,0.2)] border-4 border-white/10 group-hover:scale-105 transition-transform",children:h.jsx("img",{src:Z,alt:"Join QR Code",width:"140",height:"140",className:"block"})}),h.jsxs("div",{className:"text-center md:text-left flex-1 relative z-10",children:[h.jsx("strong",{className:"text-[var(--neon-green)] block mb-3 uppercase tracking-[0.3em] text-xs font-black font-righteous",children:"SCAN TO JOIN"}),h.jsx("div",{className:"text-white text-xl font-mono break-all mb-4 bg-black/50 px-4 py-2 rounded-lg inline-block border border-white/5",children:V}),he&&h.jsxs("div",{className:"p-4 bg-amber-500/5 border border-amber-500/10 rounded-2xl",children:[h.jsx("p",{className:"text-amber-500 text-[10px] font-black uppercase tracking-widest mb-2 font-righteous",children:" LOCALHOST DETECTED"}),h.jsx("button",{onClick:()=>{y(!0),_(ae||"")},className:"text-[10px] font-black text-white hover:text-[var(--neon-cyan)] uppercase tracking-[0.2em] underline decoration-white/30 hover:decoration-[var(--neon-cyan)] transition-all font-righteous",children:"CONFIGURE NETWORK IP"})]})]})]})]}),g&&h.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-6 z-50 backdrop-blur-3xl animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-lg bg-[#0a0a0a] border-2 border-white/10 rounded-[3rem] p-10 space-y-8 shadow-[0_0_60px_rgba(0,0,0,0.8)] relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[var(--neon-cyan)] to-[var(--neon-blue)]"}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white mb-2 font-bungee uppercase tracking-tight",children:"Network Config"}),h.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-widest font-righteous",children:"ESTABLISH REMOTE CONNECTION PROTOCOLS"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("label",{className:"block text-[11px] font-bold text-[var(--neon-cyan)] uppercase tracking-[0.2em] ml-4 font-righteous",children:"Network IP Address"}),h.jsx("input",{type:"text",value:b,onChange:pe=>_(pe.target.value),placeholder:"e.g. 192.168.0.x OR https://....ngrok.io",className:"w-full bg-[#151520] border-2 border-white/10 rounded-2xl px-6 py-4 text-white font-mono focus:border-[var(--neon-cyan)] outline-none transition-all shadow-inner text-sm"}),h.jsxs("p",{className:"text-slate-500 text-[9px] uppercase tracking-widest font-righteous ml-4 opacity-60",children:[h.jsx("span",{className:"text-[var(--neon-yellow)]",children:"PRO TIP:"})," Use ",h.jsx("span",{className:"text-white",children:"ngrok"})," for secure external tunneling."]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-4 bg-black border border-white/10 hover:bg-white/5 text-slate-400 hover:text-white rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all font-righteous",children:"Cancel"}),h.jsx("button",{onClick:k,className:"flex-1 py-4 bg-[var(--neon-cyan)] text-black rounded-xl font-bold text-[10px] uppercase tracking-widest shadow-[0_0_20px_rgba(0,229,255,0.3)] hover:bg-white transition-all font-righteous hover:scale-105",children:"Save Configuration"})]})]})})]})}return h.jsxs("div",{className:"min-h-screen bg-[#050510] text-white selection:bg-[var(--neon-pink)] selection:text-white",children:[h.jsx("nav",{className:"fixed top-0 inset-x-0 z-[100] backdrop-blur-xl bg-black/80 border-b border-white/5 transition-all duration-300",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-6 h-20 flex items-center justify-between",children:[h.jsxs("div",{onClick:()=>e("SELECT"),className:"cursor-pointer group flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-[var(--neon-pink)] p-0.5 group-hover:shadow-[0_0_20px_rgba(255,0,127,0.4)] transition-all",children:h.jsx("img",{src:"IGK.jpeg",alt:"Logo",className:"w-full h-full rounded-full"})}),h.jsx("span",{className:"font-bungee text-xl text-white tracking-widest group-hover:text-[var(--neon-cyan)] transition-colors",children:"Singmode v.2"})]}),h.jsx("div",{className:"flex items-center gap-6",children:h.jsxs("button",{onClick:()=>{e("SELECT"),l(null)},className:"text-[9px] font-bold uppercase tracking-widest px-5 py-2.5 rounded-xl transition-all font-righteous bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white border border-white/5 hover:border-white/20",children:["EXIT ",r]})})]})}),h.jsx("main",{className:"pb-20",children:r==="DJ"?h.jsx(eD,{onAdminAccess:()=>e("ADMIN")}):h.jsx(nD,{})})]})},DT=document.getElementById("root");if(!DT)throw new Error("Could not find root element to mount to");const aD=w2.createRoot(DT);aD.render(h.jsx(p2.StrictMode,{children:h.jsx(iD,{})}));
